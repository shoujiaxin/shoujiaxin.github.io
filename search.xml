<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Ubuntu 18.04 æŠ˜è…¾æŒ‡åŒ—</title>
    <url>/2019/02/27/Ubuntu-18-04-%E6%8A%98%E8%85%BE%E6%8C%87%E5%8C%97/</url>
    <content><![CDATA[<p>è¿«äºæ‰“ç®—ç”¨ ROS (Robot Operating System) æ¥ç©æœºæ¢°è‡‚ï¼Œè€Œ macOS å’Œ Windows ä¸Šçš„ ROS ä¾æ—§å¤„äº Beta é˜¶æ®µï¼Œæ‰€ä»¥åˆè¦æŠ˜è…¾ä¸€ç•ª Linuxã€‚è§‚æœ›äº†ä¸€æ®µæ—¶é—´ Ubuntu 18.04ï¼Œæ„Ÿè§‰åº”è¯¥ç¨³å®šäº†ï¼Œæ›´é‡è¦çš„æ˜¯ 18.04 æ¯” 16.04 å¥½çœ‹çš„å¤šï¼Œæ‰€ä»¥åˆæ‹¿å‡ºäº†æ—§ç¬”è®°æœ¬æŠ˜è…¾ Linuxï¼Œé¡ºä¾¿åšä¸ªè®°å½•ï¼Œä»¥å¤‡åç”¨ã€‚</p>
<span id="more"></span>
<h2 id="ç¬”è®°æœ¬ç¡¬ä»¶é…ç½®">ç¬”è®°æœ¬ç¡¬ä»¶é…ç½®</h2>
<p>è¿™å° Dell ç¬”è®°æœ¬æ˜¯ 2014 å¹´ä¹°çš„äº†ï¼Œå·²ç»æ®‹ç ´ä¸å ªï¼Œæ­£é€‚åˆç”¨æ¥æŠ˜è…¾ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li>CPU: IntelÂ® Coreâ„¢ i5-4210U</li>
<li>GPU: GeForce GT 750M</li>
<li>RAM: 6G</li>
<li>SSD: Intel 730 240G</li>
</ul>
<h2 id="windows-10-å’Œ-ubuntu-18.04-åŒç³»ç»Ÿ">Windows 10 å’Œ Ubuntu 18.04 åŒç³»ç»Ÿ</h2>
<p>ç¬”è®°æœ¬åªæœ‰ä¸€å— 240G çš„ SSDï¼Œå¹³æ—¶æ–‡æ¡£å·¥ä½œåˆå¿…éœ€ Windowsï¼Œæ‰€ä»¥è¿˜æ˜¯åŒç³»ç»Ÿå§ã€‚</p>
<p>è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå®‰è£…å¥½ Windows 10ï¼Œæ‰“å¼€ <code>ç£ç›˜ç®¡ç†</code>ï¼Œå‹ç¼©å·ç•™å‡º 80G çš„æœªåˆ†é…ç©ºé—´å³å¯ã€‚</p>
<p>åˆ¶ä½œå¥½ Ubuntu 18.04 çš„å¯åŠ¨ç›˜ï¼Œé‡å¯è¿›å…¥å®‰è£…ç•Œé¢ï¼Œæ­¤æ—¶æœ€å¥½æ–­å¼€ç½‘ç»œè¿æ¥ï¼Œå¯ä»¥æ›´å¿«å®Œæˆå®‰è£…ã€‚é€‰æ‹© <code>Minimal installation</code> å¹¶å‹¾é€‰ <code>Install third-party software for graphics and Wi-Fi hardware and additional media formats</code>ï¼ŒInstallation type é»˜è®¤å³å¯å°† Ubuntu å®‰è£…åˆ°æœªåˆ†é…çš„ç£ç›˜ç©ºé—´ï¼Œå¹¶è‡ªåŠ¨ä¸º Ubuntu å®Œæˆåˆ†åŒºã€‚</p>
<h3 id="åŒç³»ç»Ÿæ—¶é—´åŒæ­¥">åŒç³»ç»Ÿæ—¶é—´åŒæ­¥</h3>
<p>ç”±äº Windows å’Œ Ubuntu é»˜è®¤çš„ BIOS æ—¶é—´è¯»å–æ–¹å¼ä¸åŒï¼Œè£…å®ŒåŒç³»ç»Ÿåä¸¤ä¸ªç³»ç»Ÿæ˜¾ç¤ºçš„æ—¶é—´ä¼šå·® 8 ä¸ªå°æ—¶ï¼Œå¯é€šè¿‡ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•<strong>ä¹‹ä¸€</strong>è¿›è¡Œä¿®æ”¹ï¼š</p>
<ul>
<li><p><strong>åœ¨ Windows ä¸­ä½¿ç”¨ UTC æ—¶é—´</strong> æ‰“å¼€è¿è¡Œçª—å£ï¼ˆå¿«æ·é”® <code>Win + R</code>ï¼‰ï¼Œè¾“å…¥ <code>regedit</code> å¯åŠ¨æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œæ‰¾åˆ° <code>è®¡ç®—æœº\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation\</code>ï¼Œæ·»åŠ ä¸€é¡¹ç±»å‹ä¸º <code>REG_DWORD</code> çš„é”®å€¼ï¼Œå‘½åä¸º <code>RealTimeIsUniversal</code>ï¼Œå€¼ä¸º 1ï¼Œä¿®æ”¹å®Œæˆåé‡å¯å³å¯ã€‚</p></li>
<li><p><strong>åœ¨ Ubuntu ä¸­å…³é—­ UTC æ—¶é—´</strong></p>
<p>ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install ntpdate</span><br><span class="line">sudo ntpdate time.windows.com</span><br><span class="line">sudo hwclock --localtime --systohc</span><br></pre></td></tr></table></figure>
<p>å°†å…¶ä¸­çš„ <code>UTC=yes</code> æ”¹ä¸º <code>UTC=no</code> å¹¶ä¿å­˜å³å¯ã€‚</p></li>
</ul>
<h2 id="nvidia-æ˜¾å¡é©±åŠ¨">Nvidia æ˜¾å¡é©±åŠ¨</h2>
<p>å½“åˆ 16.04 æœ€å¤´ç–¼çš„ä¸€ç‚¹æ˜¯ Ubuntu è‡ªå¸¦çš„æ˜¾å¡é©±åŠ¨å’Œ Nvidia çš„ç‹¬ç«‹æ˜¾å¡å†²çªï¼Œç³»ç»Ÿå®‰è£…å®Œæˆåå¦‚æœå¿˜è®°æ‰‹åŠ¨åˆ‡æ¢é©±åŠ¨ï¼Œé‡å¯ä¹‹åä¼šé»‘å±æ— æ³•è¿›å…¥ç³»ç»Ÿã€‚</p>
<p>18.04 å®‰è£…å®Œåé‡å¯äº†ä¸€ä¸‹å‘ç°è¿™ä¸ªé—®é¢˜å·²ç»ä¸å­˜åœ¨äº†ï¼Œä½†ä¼¼ä¹æ²¡æœ‰å®‰è£… Nvidia æ˜¾å¡çš„é©±åŠ¨ï¼Œæ•…è¿˜éœ€æ‰‹åŠ¨è£…ä¹‹ã€‚</p>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ubuntu-drivers autoinstall</span><br></pre></td></tr></table></figure>
<p>å³å¯è‡ªåŠ¨å®‰è£…åˆé€‚çš„é©±åŠ¨ã€‚å®‰è£…å®Œæˆé‡å¯ï¼Œå³å¯åœ¨åº”ç”¨ä¸­æ‰¾åˆ° NVIDIA X Server Settingsï¼Œåœ¨å…¶ä¸­çš„ <code>PRIME Profiles</code> å¯ä»¥åˆ‡æ¢ç‹¬æ˜¾å’Œé›†æ˜¾ã€‚</p>
<h2 id="åˆ‡æ¢-zsh">åˆ‡æ¢ Zsh</h2>
<p>Linux åˆ‡æ¢ Zsh å’Œ macOS ä¸­å¤§è‡´ç›¸åŒï¼Œä½†æ˜¯ <code>Minimal installation</code> å®‰è£…çš„ Ubuntu 18.04 æ˜¯ä¸è‡ªå¸¦ Zsh çš„ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install zsh</span><br><span class="line">chsh -s /usr/bin/zsh</span><br></pre></td></tr></table></figure>
<p>é‡å¯ç»ˆç«¯å³å¯åˆ‡æ¢åˆ° Zshã€‚</p>
<h3 id="å®‰è£…å’Œé…ç½®-oh-my-zsh">å®‰è£…å’Œé…ç½® <a href="https://ohmyz.sh">Oh My Zsh</a></h3>
<p>ç»ˆç«¯æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…ä¸»é¢˜å’Œå­—ä½“">å®‰è£…ä¸»é¢˜å’Œå­—ä½“</h3>
<p><a href="https://github.com/bhilburn/powerlevel9k">Powerlevel9k</a> ä¸»é¢˜çš„å®‰è£…å’Œé…ç½®ä»¥åŠå…¶ä½™çš„ç¾åŒ–è¿‡ç¨‹ä¹ŸåŸºæœ¬ä¸ macOS ä¸­ä¸€æ ·ï¼Œä½†æ˜¯å’Œ Powerline å­—ä½“çš„å®‰è£…ç¨å¾®ä¸åŒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/bhilburn/powerlevel9k.git ~/.oh-my-zsh/custom/themes/powerlevel9k  # å®‰è£…ä¸»é¢˜</span><br><span class="line">sudo apt-get install fonts-powerline  # å®‰è£…å­—ä½“</span><br></pre></td></tr></table></figure>
<p>å†ä¿®æ”¹ <code>~/.zshrc</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ZSH_THEME=&quot;powerlevel9k/powerlevel9k&quot;</span><br><span class="line">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(context dir dir_writable vcs)</span><br><span class="line">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status background_jobs history time)</span><br><span class="line">DEFAULT_USER=&quot;&lt;username&gt;&quot;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h3>
<p>ä¸ªäººå¸¸ç”¨çš„æ’ä»¶ä¸»è¦æ˜¯ zsh-autosuggestions å’Œ zsh-syntax-highlighting è¿™ä¸¤ä¸ªã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions</span><br><span class="line">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®ä»£ç†">é…ç½®ä»£ç†</h2>
<p>ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œä»£ç†æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç”¨ <a href="https://github.com/shadowsocks/shadowsocks-qt5">Shadowsocks-Qt5</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo add-apt-repository ppa:hzwhuang/ss-qt5</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install shadowsocks-qt5</span><br></pre></td></tr></table></figure>
<p>ä¹‹å‰ç‰ˆæœ¬çš„ Ubuntu é€šå¸¸é€šè¿‡ä¸Šé¢æ·»åŠ  PPA æºçš„æ–¹å¼å®‰è£…å®¢æˆ·ç«¯ï¼Œä½†æ˜¯æ ¹æ®ç›®å‰ (2019-02-27) PPA æºä¸Šçš„ <a href="https://code.launchpad.net/~hzwhuang/+archive/ubuntu/ss-qt5">Shadowsocks-Qt5 é¡µé¢</a>ï¼Œè¿˜ä¸æ”¯æŒ 18.04ï¼Œæ‰€ä»¥æš‚æ—¶ä»å…¶ GitHub çš„ <a href="https://github.com/shadowsocks/shadowsocks-qt5/releases/latest">Release</a> ä¸‹è½½å§ï¼Œä¹Ÿå¯ä»¥å°† <code>/etc/apt/sources.list.d/hzwhuang-ubuntu-ss-qt5-bionic.list</code> ä¸­ ss-qt5 çš„æºåœ°å€ç”±</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu bionic main</span><br></pre></td></tr></table></figure>
<p>æ”¹ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu artful main</span><br></pre></td></tr></table></figure>
<h3 id="å…¨å±€ä»£ç†">å…¨å±€ä»£ç†</h3>
<p>å®‰è£…å¥½å®¢æˆ·ç«¯ï¼Œå¯ä»¥åœ¨ Settings - Network - Network Proxy ä¸­è®¾ç½®ä»£ç†ã€‚é€‰æ‹© <code>Manual</code>ï¼Œ<code>HTTP Proxy</code>ã€<code>HTTPS Proxy</code> å’Œ <code>FTP Proxy</code> çš„åœ°å€å‡æ¸…ç©ºï¼Œç«¯å£æ”¹ä¸º <code>0</code>ï¼Œ<code>Socks Proxy</code> çš„åœ°å€ä¸º <code>127.0.0.1</code>ï¼Œç«¯å£å·ä¸º <code>1080</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1lyUGS90-Fd6lSeyDVXOFnxc_GobOL_6z" alt="å…¨å±€ä»£ç†" width="30%"></p>
<p>ä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼åœ¨ç³»ç»Ÿä¸­æ‰‹åŠ¨é…ç½®çš„ä»£ç†ä¸ºå…¨å±€ä»£ç†ï¼Œä½¿ç”¨èµ·æ¥æœ‰ä¸€äº›ä¸æ–¹ä¾¿ã€‚</p>
<h3 id="pac-ä»£ç†">PAC ä»£ç†</h3>
<p>å¦‚æœå°šæœªå®‰è£… pipï¼Œé¦–å…ˆæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install python3-pip</span><br></pre></td></tr></table></figure>
<p>å†é€šè¿‡ pip å®‰è£… GenPACï¼Œå¹¶ç”¨å…¶ç”Ÿæˆ PAC æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo pip3 install -U genpac</span><br><span class="line">genpac --pac-proxy &quot;SOCKS5 127.0.0.1:1080&quot; --gfwlist-proxy=&quot;SOCKS5 127.0.0.1:1080&quot; --gfwlist-url=https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt --output=&quot;proxy.pac&quot;</span><br></pre></td></tr></table></figure>
<p>æœ€ååœ¨ Settings - Network - Network Proxy ä¸­é€‰æ‹© <code>Automatic</code>ï¼ŒConfiguration URL å¡«å…¥ <code>file:///home/&lt;username&gt;/proxy.pac</code> å³å¯ã€‚</p>
<h3 id="å®¢æˆ·ç«¯å¼€æœºè‡ªå¯">å®¢æˆ·ç«¯å¼€æœºè‡ªå¯</h3>
<p>ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gnome-session-properties</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€ Startup Applications Preferencesï¼Œæ·»åŠ éœ€è¦å¼€æœºè‡ªå¯çš„ç¨‹åºã€‚</p>
<p>å¦‚æœæ˜¯ä» Github ä¸‹è½½çš„ Shadowsocks-Qt5ï¼Œå¯ä»¥ç‚¹å‡» Browse é€‰æ‹©ä¸‹è½½çš„ AppImage æ–‡ä»¶ï¼›è‹¥æ˜¯é€šè¿‡æ·»åŠ  PPA æºæ–¹å¼ä¸‹è½½çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥è¾“å…¥å‘½ä»¤ <code>/usr/bin/ss-qt5</code> æ¥æ·»åŠ è‡ªå¯ã€‚</p>
<h2 id="exfat-æ ¼å¼æ”¯æŒ">exFAT æ ¼å¼æ”¯æŒ</h2>
<p>ç°åœ¨ U ç›˜å¤§å¤šä½¿ç”¨ exFAT æ ¼å¼ï¼Œè€Œ Ubuntu 18.04 é»˜è®¤æ— æ³•è¯»å–è¯¥æ ¼å¼ï¼Œéœ€è¦å®‰è£… <code>exfat-utils</code>ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install exfat-utils</span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ¢ä¸»é¢˜">æ›´æ¢ä¸»é¢˜</h2>
<p>é¦–å…ˆå®‰è£… tweak-tool å’Œ user themes æ’ä»¶ï¼Œè¿è¡Œå‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install gnome-tweak-tool</span><br><span class="line">sudo apt-get install gnome-shell-extensions</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€ Tweaksï¼Œåœ¨ Extensions ä¸­å¯åŠ¨æ’ä»¶ User themesï¼Œå°†ä» <a href="https://www.gnome-look.org">Gnome-look.org</a> ä¸‹è½½çš„è§£å‹åˆ° <code>~/.themes</code>ï¼Œå†å¯åŠ¨ Tweaks å³å¯è®¾ç½®ä¸»é¢˜ã€‚</p>
<p>åœ¨ Tweaks ä¸­ï¼ŒæŒ‰ä¸‹ <code>Ctrl + F2</code> å¯ä»¥æ‰“å¼€å‘½ä»¤çª—å£ï¼Œè¾“å…¥ <code>r</code> å³å¯é‡å¯æ¡Œé¢ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨ Ubuntu Software ä¸­å®‰è£… Dash to Dock å¯ä»¥å®ç° Dock å±…ä¸­å’ŒèƒŒæ™¯é€æ˜ç­‰ã€‚</p>
]]></content>
      <categories>
        <category>Linux çš„æŠ˜è…¾æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>macOS ç¯å¢ƒå®‰è£…å’Œé…ç½®</title>
    <url>/2018/11/26/macOS-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>åˆæ˜¯ä¸€æ³¢æ¥ä¸€æ³¢çš„éªšæ“ä½œæŠŠç³»ç»Ÿæå´©çš„ä¸€å¤©ï¼Œä¸ºäº†èŠ‚çœä»Šåé‡è£…ç³»ç»Ÿé…ç½®ç¯å¢ƒçš„æ—¶é—´ï¼ŒæŠŠå„ç§ç¯å¢ƒçš„å®‰è£…å’Œé…ç½®åšä¸ªè®°å½•å§â€¦â€¦</p>
<span id="more"></span>
<hr />
<h2 id="xcode">Xcode</h2>
<h3 id="å®‰è£…">å®‰è£…</h3>
<p>å½“ç„¶æ˜¯å» App Store ä¸‹è½½äº†ï¼Œä¹‹åçš„ Homebrew ç­‰éƒ½è¦ä¾èµ–å®ƒã€‚</p>
<hr />
<h2 id="homebrew"><a href="https://brew.sh">Homebrew</a></h2>
<blockquote>
<p>macOS ç¼ºå¤±çš„è½¯ä»¶åŒ…çš„ç®¡ç†å™¨</p>
</blockquote>
<p>ç®—æ˜¯å¼ºè¿«ç—‡å¿…å¤‡å§</p>
<h3 id="å®‰è£…-1">å®‰è£…</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="homebrew-cask"><a href="https://formulae.brew.sh/cask/">Homebrew Cask</a></h2>
<blockquote>
<p>"To install, drag this iconâ€¦" no more!</p>
</blockquote>
<p>åŒä¸Š</p>
<h3 id="å®‰è£…-2">å®‰è£…</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew tap caskroom/cask</span><br><span class="line">brew install vitorgalvao/tiny-scripts/cask-repair</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè¿˜å®‰è£…äº† cask-repairï¼Œç”¨äºæ·»åŠ æ–°çš„ Cask æˆ–è€…æ›´æ–° Caskï¼Œè¯¦è§ <a href="https://github.com/Homebrew/homebrew-cask/blob/master/CONTRIBUTING.md">How To Contribute</a></p>
<h3 id="é…ç½®">é…ç½®</h3>
<p>ä½¿ç”¨ cask-repair æäº¤æ–°çš„ Cask æˆ–è€…æ›´æ–°æ—¶ï¼Œä¼šé»˜è®¤ä½¿ç”¨ç³»ç»Ÿçš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ Cask çš„ä¿¡æ¯æ–‡ä»¶ <code>*.rb</code>ï¼Œä¸€èˆ¬éƒ½é»˜è®¤ä¸º TextEdit.appï¼Œå¯ä»¥åœ¨ <code>~/.bash_profile</code> ä¸­ä¿®æ”¹ Homebrew ä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export HOMEBREW_EDITOR=code</span><br></pre></td></tr></table></figure>
<p><code>code</code> è¡¨ç¤ºå°† Homebrew ä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨æ”¹ä¸º Visual Studio Code</p>
<hr />
<h2 id="python">Python</h2>
<p>ä¸ºäº†æ–¹ä¾¿ä¸åŒç‰ˆæœ¬çš„ Python å…±å­˜ï¼Œå¹¶ä¸”éš”ç¦»å¤šä¸ª Python ç¯å¢ƒï¼Œä½¿ç”¨ <a href="https://conda.io/docs/">Conda</a> è¿›è¡Œç®¡ç†ã€‚</p>
<blockquote>
<p>Conda æ˜¯ Pythonã€Rã€Ruby ç­‰å¤šç§è¯­è¨€çš„åŒ…ã€ä¾èµ–å’Œç¯å¢ƒç®¡ç†</p>
</blockquote>
<p>Conda æœ‰å¤šä¸ªä¸åŒçš„å‘è¡Œç‰ˆï¼Œæ¯”å¦‚ <a href="https://anaconda.org/">Anaconda</a> å’Œ <a href="https://conda.io/miniconda.html">Miniconda</a> ç­‰ï¼Œå‰è€…åŒ…å«äº†è®¸å¤šç§‘å­¦è®¡ç®—çš„åŒ…ï¼Œå› æ­¤å®‰è£…åŒ…ä½“ç§¯å¾ˆå¤§ï¼Œä¸ºäº†èŠ‚çœå®‰è£…æ—¶é—´å’Œå ç”¨ç©ºé—´ï¼Œå°±ä½¿ç”¨ Minicondaã€‚</p>
<h3 id="å®‰è£…-3">å®‰è£…</h3>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew cask install miniconda</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®-1">é…ç½®</h3>
<p>å®‰è£…å¥½ä»¥åéœ€è¦å°† Conda çš„è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œåœ¨ <code>~/.bash_profile</code> ä¸­åŠ å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export PATH=$&#123;PATH&#125;:/usr/local/miniconda3/bin</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>
<ul>
<li><p>åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒï¼ˆé»˜è®¤ç¯å¢ƒä¸º baseï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda env list</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»ºæ–°çš„ç¯å¢ƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda create --name &lt;name&gt; python=&lt;version&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>ä»å·²æœ‰ç¯å¢ƒå¤åˆ¶ä¸€ä¸ªç¯å¢ƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda create --name &lt;new name&gt; --clone &lt;old name&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>è¿›å…¥ &amp; é€€å‡ºç¯å¢ƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda activate &lt;name&gt;  # è¿›å…¥åä¸º name çš„ç¯å¢ƒï¼Œæˆ–è€…ä½¿ç”¨ source activate &lt;name&gt;</span><br><span class="line">conda deactivate       # é€€å‡ºå½“å‰ç¯å¢ƒï¼Œæˆ–è€…ä½¿ç”¨ source deactivate</span><br></pre></td></tr></table></figure></li>
<li><p>å®‰è£…åŒ…ï¼ˆé»˜è®¤å®‰è£…åˆ°å½“å‰ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰è¿›å…¥ä»»ä½•ç¯å¢ƒï¼Œåˆ™å®‰è£…åˆ° base ä¸­ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda install &lt;package&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr />
<h2 id="latex">LaTeX</h2>
<p>é…ç½® LaTeX çš„ç¯å¢ƒæ˜¯æœ€å¤´ç–¼çš„â€¦â€¦ç»è¿‡æˆ‘çš„å¤šæ¬¡å°ï¼ˆä½œï¼‰è¯•ï¼ˆæ­»ï¼‰ï¼Œæ€»ç®—æ‘¸ç´¢å‡ºæ­£ç¡®çš„å§¿åŠ¿â€¦â€¦é‚£å°±æ˜¯ç”¨ Dockerã€‚é¦–å…ˆ Homebrew å®‰è£… Docker</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brew cask install docker</span><br></pre></td></tr></table></figure>
<p>é•œåƒå¯ä»¥ä½¿ç”¨ <a href="https://hub.docker.com/r/shoujiaxin/texlive">shoujiaxin/texlive</a>ï¼Œæ­¤é•œåƒåŸºäº Debian ä¸”å®‰è£…äº† TeXLive 2019ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull shoujiaxin/texlive:latest</span><br></pre></td></tr></table></figure>
<p>å¸¦æœ‰ <code>latest</code> tag çš„é•œåƒä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ TeXLiveï¼›å¸¦æœ‰ <code>cjk</code> tag çš„é•œåƒä¸­ç”¨äºé…ç½®ç‰¹æ®Šä¸­æ–‡å­—ä½“ï¼Œç›®å‰åŠ å…¥äº†éš¶ä¹¦</p>
<p>ä½¿ç”¨æ—¶å¯ä»¥ç”¨ç±»ä¼¼ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°†å‘½ä»¤é‡å®šå‘è‡³ Docker é•œåƒã€‚ä»¥ <code>xelatex</code> å‘½ä»¤ä¸ºä¾‹ï¼Œåˆ›å»ºæ–‡ä»¶ <code>xelatex</code> å¹¶å†™å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">set -euo pipefail</span><br><span class="line">docker run -i --rm -w &quot;$(pwd)&quot; -v &quot;$(pwd):$(pwd)&quot; shoujiaxin/texlive xelatex &quot;$@&quot;</span><br></pre></td></tr></table></figure>
<p>ç»™äºˆæ–‡ä»¶æ‰§è¡Œæƒé™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo chmod +x ./xelatex</span><br></pre></td></tr></table></figure>
<p>å°†æ–‡ä»¶æ‰€åœ¨è·¯å¾„åŠ å…¥ <code>~/.zshrc</code> å³å¯ã€‚</p>
<h2 id="zsh">Zsh</h2>
<p>macOS çš„é»˜è®¤ç»ˆç«¯æ˜¯ Bashï¼Œç›¸æ¯” Zsh åŠŸèƒ½å’Œå¯å®šåˆ¶æ€§æœ‰é™ï¼Œæœ¬ç€ç”Ÿå‘½åœ¨äºæŠ˜è…¾çš„åŸåˆ™ï¼Œ<strong>æ¢ï¼</strong></p>
<h3 id="åˆ‡æ¢é»˜è®¤-shell">åˆ‡æ¢é»˜è®¤ Shell</h3>
<p>ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ç®¡ç†å‘˜å¯†ç ï¼Œé‡å¯ç»ˆç«¯å³å¯å°†é»˜è®¤çš„ Shell åˆ‡æ¢åˆ° Zshï¼Œå¦‚éœ€åˆ‡æ¢å›æ¥ï¼Œæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chsh -s /bin/bash</span><br></pre></td></tr></table></figure>
<p>Zsh çš„é…ç½®ä½äº <code>~/.zshrc</code>ï¼Œéœ€è¦ç»§ç»­ä½¿ç”¨ Bash çš„é…ç½®å¯ä»¥åœ¨æœ«å°¾æ·»åŠ </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source ~/.bash_profile</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…å’Œé…ç½®-oh-my-zsh">å®‰è£…å’Œé…ç½® <a href="https://ohmyz.sh">Oh My Zsh</a></h3>
<blockquote>
<p>Oh My Zsh is a delightful, open source, community-driven framework for managing your Zsh configuration. It comes bundled with thousands of helpful functions, helpers, plugins, themes, and a few things that make you shout...</p>
</blockquote>
<p>ç»ˆç«¯æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæˆå Oh My Zsh çš„é…ç½®æ–‡ä»¶ä½äº <code>~/.oh-my-zsh</code>ã€‚</p>
<h3 id="æ›´æ¢ä¸»é¢˜å’ŒèƒŒæ™¯">æ›´æ¢ä¸»é¢˜å’ŒèƒŒæ™¯</h3>
<p>Oh My Zsh çš„ä¸»é¢˜ä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œæ•…æ¢æˆ <a href="https://github.com/bhilburn/powerlevel9k">Powerlevel9k</a>ï¼Œ<a href="https://github.com/bhilburn/powerlevel9k/wiki/Install-Instructions#step-1-install-powerlevel9k">Install the Powerlevel9k Theme</a> ä»‹ç»äº†å„ç§å®‰è£…ä¸»é¢˜çš„æ–¹æ³•ï¼Œè¿™é‡Œä½¿ç”¨å®‰è£…åˆ° Oh My Zsh çš„æ–¹æ³•ã€‚</p>
<p>æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/bhilburn/powerlevel9k.git ~/.oh-my-zsh/custom/themes/powerlevel9k</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å°†ä¸»é¢˜å®‰è£…åˆ° <code>~/.oh-my-zsh/custom/themes/</code> ä¸­ï¼Œä¿®æ”¹ <code>~/.zshrc</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ZSH_THEME=&quot;powerlevel9k/powerlevel9k&quot;</span><br></pre></td></tr></table></figure>
<p>å³å¯æ›´æ¢ä¸»é¢˜ä¸º Powerlevel9kã€‚</p>
<p>Powerlevel9k ä¾èµ– Powerline å­—ä½“ï¼Œå¦åˆ™ç»ˆç«¯ä¸­ä¼šæœ‰ä¹±ç ï¼Œ<a href="https://github.com/bhilburn/powerlevel9k/wiki/Install-Instructions#step-2-install-a-powerline-font">Install a Powerline Font</a> ä»‹ç»äº†å‡ ç§å®‰è£… Powerline å­—ä½“çš„æ–¹æ³•ï¼Œç»è¿‡å¤šæ¬¡å°è¯•ï¼Œè¿™é‡Œä½¿ç”¨æœ€ä¾¿æ·çš„æ–¹æ³•ï¼Œå³å®‰è£… <a href="https://github.com/ryanoasis/nerd-fonts">Nerd å­—ä½“</a>ï¼Œæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">brew tap caskroom/fonts</span></span><br><span class="line">brew cask install font-hack-nerd-font</span><br></pre></td></tr></table></figure>
<p>ç›®å‰ (2019-02-27) å¦‚æœæŒ‰ç…§å®˜æ–¹çš„å®‰è£…æ­¥éª¤ï¼Œtap äº† caskroom/fontsï¼Œåœ¨æ‰§è¡Œ <code>brew update</code> æ—¶ä¼šæŠ¥é”™ï¼ŒçŒœæµ‹æ˜¯å› ä¸º Homebrew æ›´æ–°å Homebrew Cask å·²ç»åŒ…å«äº†å„ç§å­—ä½“ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å®‰è£…ï¼Œä¹Ÿå¯ä»¥åœ¨å®‰è£…å®Œæˆä»¥å untap ä¸€ä¸‹ã€‚</p>
<p>å­—ä½“å®‰è£…å®Œæˆä¿®æ”¹ <code>~/.zshrc</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">POWERLEVEL9K_MODE=&#x27;nerdfont-complete&#x27;</span><br><span class="line">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(context dir dir_writable vcs)</span><br><span class="line">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status background_jobs history time)</span><br><span class="line">DEFAULT_USER=&quot;&lt;username&gt;&quot;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å®Œæˆå­—ä½“é…ç½®å’Œå„ç§è‡ªå®šä¹‰ã€‚å…¶ä¸­ï¼Œ<code>POWERLEVEL9K_LEFT_PROMPT_ELEMENTS</code> æ§åˆ¶ç»ˆç«¯å·¦ä¾§æ˜¾ç¤ºå†…å®¹ï¼š<code>dir</code> æ˜¾ç¤ºå½“å‰è·¯å¾„ã€<code>dir_writable</code> åœ¨å½“å‰è·¯å¾„æ²¡æœ‰å†™æƒé™æ—¶ä¼šæ˜¾ç¤ºä¸€ä¸ª ğŸ”’ã€<code>vcs</code> åˆ™æ˜¯æ˜¾ç¤ºç‰ˆæœ¬æ§åˆ¶ï¼›<code>POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS</code> æ§åˆ¶ç»ˆç«¯å³ä¾§æ˜¾ç¤ºå†…å®¹ï¼š<code>status</code> å‘½ä»¤è¿”å›çš„çŠ¶æ€ã€<code>history</code> å†å²è®°å½•æ•°ä»¥åŠ <code>time</code> æ—¶é—´ç­‰ï¼›è®¾ç½® <code>DEFAULT_USER</code> å¯ä»¥éšè—ç™»å½•è¯¥ç”¨æˆ·æ—¶ç»ˆç«¯å·¦ä¾§æ˜¾ç¤ºçš„ç”¨æˆ·åã€‚</p>
<h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h3>
<ul>
<li><p><a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions</a> ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure>
<p>å°† zsh-autosuggestions çš„æºç  clone åˆ° <code>~/.oh-my-zsh/custom/plugins</code>ã€‚æ‰“å¼€ <code>~/.zshrc</code>ï¼Œå°† <code>zsh-autosuggestions</code> æ·»åŠ åˆ° <code>plugins=()</code> è¡Œçš„æ‹¬å·ä¸­ï¼Œå¤šä¸ªæ’ä»¶ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p></li>
<li><p><a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting</a> ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure>
<p>å°† zsh-syntax-highlighting çš„æºç  clone åˆ° <code>~/.oh-my-zsh/custom/plugins</code>ã€‚æ‰“å¼€ <code>~/.zshrc</code>ï¼Œå°† <code>zsh-syntax-highlighting</code> æ·»åŠ åˆ° <code>plugins=()</code> è¡Œçš„æ‹¬å·ä¸­ï¼Œå¤šä¸ªæ’ä»¶ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p></li>
</ul>
]]></content>
      <categories>
        <category>Mac çš„ä½¿ç”¨æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>macOS</tag>
      </tags>
  </entry>
  <entry>
    <title>äº”è‡ªç”±åº¦æœºæ¢°è‡‚çš„å»ºæ¨¡ (1) â€”â€” é½æ¬¡åæ ‡åŠå…¶å˜æ¢çŸ©é˜µ</title>
    <url>/2018/10/01/%E4%BA%94%E8%87%AA%E7%94%B1%E5%BA%A6%E6%9C%BA%E6%A2%B0%E8%87%82%E7%9A%84%E5%BB%BA%E6%A8%A1-1-%E2%80%94%E2%80%94-%E9%BD%90%E6%AC%A1%E5%9D%90%E6%A0%87%E5%8F%8A%E5%85%B6%E5%8F%98%E6%8D%A2%E7%9F%A9%E9%98%B5/</url>
    <content><![CDATA[<h2 id="é½æ¬¡åæ ‡ç³»">é½æ¬¡åæ ‡ç³»</h2>
<p>åœ¨æ¬§æ°å‡ ä½•ä¸­ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨ç¬›å¡å°”åæ ‡ç³» (Cartesian Coordinate System) æ¥ä½œä¸ºäºŒç»´å¹³é¢æˆ–ä¸‰ç»´ç©ºé—´ä¸­åæ ‡ç³»ç»Ÿã€‚ä¸æ­¤ç±»ä¼¼ï¼Œåœ¨æŠ•å½±å‡ ä½•ä¸­ï¼Œåˆ™ä½¿ç”¨<strong>é½æ¬¡åæ ‡ç³»</strong> (Homogeneous Coordinates)ï¼Œä¹Ÿç§°<strong>æŠ•å½±åæ ‡ç³»</strong> (Projective Coordinates) ä½œä¸ºåæ ‡ç³»ç»Ÿã€‚</p>
<span id="more"></span>
<p>é½æ¬¡åæ ‡å¯ä»¥è®©åŒ…æ‹¬æ— ç©·è¿œç‚¹åœ¨å†…çš„ç‚¹ä»¥æœ‰é™çš„åæ ‡è¡¨ç¤ºï¼Œä½¿ç”¨é½æ¬¡åæ ‡çš„å…¬å¼é€šå¸¸ä¼šæ¯”ä½¿ç”¨ç¬›å¡å°”åæ ‡çš„å…¬å¼æ›´ç®€å•ã€ä¸”æ›´å¯¹ç§°ã€‚ä¸ºäº†è¡¨ç¤ºæ— ç©·è¿œç‚¹ï¼Œé½æ¬¡åæ ‡ç”¨æ¥è¡¨ç¤ºåæ ‡çš„æ•°å€¼æ•°ç›®æ¯”æŠ•å½±ç©ºé—´çš„ç»´åº¦å¤š 1ã€‚</p>
<p>å®æŠ•å½±å¹³é¢å¯ä»¥çœ‹ä½œæ˜¯åŒ…å«æ— ç©·è¿œç‚¹åœ¨å†…çš„æ¬§æ°å¹³é¢ï¼Œè¿™äº›æ— ç©·è¿œç‚¹ä½äºå„è‡ªçš„æ— ç©·è¿œçº¿ä¸Šï¼Œæ— ç©·è¿œç‚¹çš„åæ ‡å¯ç”±æ— ç©·è¿œçº¿çš„æ–œç‡ç»™å‡ºã€‚å¯¹äºæ¬§æ°å¹³é¢ä¸Šçš„å¹³è¡Œçº¿ï¼Œåœ¨æŠ•å½±å¹³é¢å¯ä»¥çœ‹ä½œç›¸äº¤äºè¯¥æ–¹å‘ä¸Šçš„æ— ç©·è¿œç‚¹ã€‚</p>
<p>ç»™å®šæ¬§æ°å¹³é¢ä¸Šä¸€ç‚¹ <span class="math inline">\((x, y)\)</span>ï¼Œå¯¹ä»»æ„éé›¶å®æ•° <span class="math inline">\(Z\)</span>ï¼Œä¸‰å…ƒç»„ <span class="math inline">\((xZ, yZ, Z)\)</span> å³ä¸ºè¯¥ç‚¹çš„é½æ¬¡åæ ‡ã€‚ç”±é½æ¬¡åæ ‡çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹å‡ ä¸ªæ€§è´¨ï¼š</p>
<ul>
<li>é½æ¬¡åæ ‡æ‰€è¡¨ç¤ºçš„ç‚¹çš„ç¬›å¡å°”åæ ‡å¯ç”±å‰ä¸¤ä¸ªæ•°å€¼é™¤ä»¥ç¬¬ä¸‰ä¸ªæ•°å€¼å¾—åˆ°ï¼šé½æ¬¡åæ ‡ <span class="math inline">\((X, Y, Z)\)</span>ï¼Œå½“ <span class="math inline">\(Z\)</span> ä¸ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºæ¬§æ°å¹³é¢ä¸Šçš„ç‚¹ <span class="math inline">\((\frac{X}{Z}, \frac{Y}{Z})\)</span>ï¼›å½“ <span class="math inline">\(Z\)</span> ä¸º 0 æ—¶ï¼Œåˆ™è¡¨ç¤ºæ— ç©·è¿œç‚¹</li>
<li>ä¸€ä¸ªç‚¹çš„é½æ¬¡åæ ‡ä¹˜ä»¥ä¸€ä¸ªéé›¶å®æ•°æ‰€å¾—çš„é½æ¬¡åæ ‡ä»ç„¶è¡¨ç¤ºè¯¥ç‚¹ï¼Œæ•…ä¸€ä¸ªç‚¹å¯ä»¥æœ‰æ— é™å¤šä¸ªé½æ¬¡åæ ‡è¡¨ç¤º</li>
<li>é½æ¬¡åæ ‡çš„åŸç‚¹ä¸º <span class="math inline">\((0, 0, 1)\)</span>ï¼Œè€Œ <span class="math inline">\((0, 0, 0)\)</span> ä¸è¡¨ç¤ºä»»ä½•ç‚¹</li>
</ul>
<p>å¯¹äºå‘é‡ <span class="math inline">\((x, y, 1)\)</span>ï¼Œå¯ä»¥åœ¨å‡ ä½•æ„ä¹‰ä¸Šç†è§£ä¸ºç©ºé—´ä¸­ç¬¬ä¸‰ä¸ªç»´åº¦ä¸ºå¸¸æ•°çš„å¹³é¢ä¸Šçš„ä¸€ä¸ªäºŒç»´å‘é‡ã€‚åŒæ ·åœ°ï¼Œåœ¨ä¸‰ç»´ç©ºé—´çš„ç‚¹ <span class="math inline">\((x, y, z)\)</span>ï¼Œå…¶é½æ¬¡åæ ‡ä¸º <span class="math inline">\((a x, a y, a z, a)\)</span>ï¼Œå…¶ä¸­ <span class="math inline">\(a\)</span> ä¸ºä¸€ä¸ªéé›¶å®æ•°ã€‚<font color=#ff4444>é½æ¬¡åæ ‡çš„å®è´¨å°±æ˜¯ç”¨ <span class="math inline">\(n + 1\)</span> ç»´å‘é‡æ¥è¡¨ç¤º <span class="math inline">\(n\)</span> ç»´å‘é‡ã€‚</font></p>
<p>ä½¿ç”¨é½æ¬¡åæ ‡å¯ä»¥å°†å¹³ç§»å’Œæ—‹è½¬å˜æ¢ç»Ÿä¸€æˆ <span class="math inline">\(4 \times 4\)</span> çš„çŸ©é˜µè¿ç®—ï¼Œä¾¿äºè®¡ç®—å’Œå¤„ç†ã€‚</p>
<h2 id="æ—‹è½¬çŸ©é˜µ">æ—‹è½¬çŸ©é˜µ</h2>
<p>æ—‹è½¬çŸ©é˜µ (Rotation Matrix) æè¿°ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„æ—‹è½¬å˜æ¢ã€‚å‡è®¾ç©ºé—´ä¸­æœ‰åæ ‡ç³» <span class="math inline">\(\{A\}\)</span> å’Œåæ ‡ç³» <span class="math inline">\(\{B\}\)</span>ï¼Œåˆ™ <span class="math inline">\(\{A\}\)</span> åˆ° <span class="math inline">\(\{B\}\)</span> çš„æ—‹è½¬å˜æ¢å¯ä»¥æè¿°ä¸º</p>
<p><span class="math display">\[
\begin{aligned}
_{B}^{A}R &amp; =
\begin{bmatrix}
^{A}\hat{X}_{B} &amp; ^{A}\hat{Y}_{B} &amp; ^{A}\hat{Z}_{B}
\end{bmatrix} \\
&amp; =
\begin{bmatrix}
\hat{X}_{B} \cdot \hat{X}_{A} &amp; \hat{Y}_{B} \cdot \hat{X}_{A} &amp; \hat{Z}_{B} \cdot \hat{X}_{A} \\
\hat{X}_{B} \cdot \hat{Y}_{A} &amp; \hat{Y}_{B} \cdot \hat{Y}_{A} &amp; \hat{Z}_{B} \cdot \hat{Y}_{A} \\
\hat{X}_{B} \cdot \hat{Z}_{A} &amp; \hat{Y}_{B} \cdot \hat{Z}_{A} &amp; \hat{Z}_{B} \cdot \hat{Z}_{A}
\end{bmatrix}
\end{aligned}
\]</span></p>
<p>å…¶ä¸­ï¼Œ<span class="math inline">\(^{A}\hat{X}_{B}\)</span>ã€<span class="math inline">\(^{A}\hat{Y}_{B}\)</span>ã€<span class="math inline">\(^{A}\hat{Z}_{B}\)</span> åˆ†åˆ«ä¸ºåæ ‡ç³» <span class="math inline">\(\{B\}\)</span> çš„ <span class="math inline">\(X\)</span> è½´ã€<span class="math inline">\(Y\)</span> è½´ã€<span class="math inline">\(Z\)</span> è½´çš„æ–¹å‘å‘é‡åœ¨åæ ‡ç³» <span class="math inline">\(\{A\}\)</span> åæ ‡è½´ä¸Šçš„æŠ•å½±ï¼Œå³åæ ‡ç³» <span class="math inline">\(\{B\}\)</span> ä¸»è½´æ–¹å‘çš„å•ä½çŸ¢é‡ã€‚</p>
<p>æ ¹æ®ä»¥ä¸Šå®šä¹‰ï¼Œæ—‹è½¬çŸ©é˜µå„åˆ—çš„æ¨¡å‡ä¸º 1ï¼Œå¹¶ä¸”è¿™äº›å•ä½çŸ¢é‡å‡ç›¸äº’æ­£äº¤ï¼Œä¸”æœ‰</p>
<p><span class="math display">\[
_{B}^{A}R = {_{A}^{B}R^T} = {_{A}^{B}R^{-1}}
\]</span></p>
<p>æ‰€ä»¥ <span class="math inline">\(_{B}^{A}R\)</span> çš„åˆ—æ˜¯ <span class="math inline">\(\{B\}\)</span> çš„å•ä½çŸ¢é‡åœ¨ <span class="math inline">\(\{A\}\)</span> ä¸­çš„æè¿°ï¼›$ _{B}^{A}R$ çš„è¡Œæ˜¯ <span class="math inline">\(\{A\}\)</span> çš„å•ä½çŸ¢é‡åœ¨ <span class="math inline">\(\{B\}\)</span> ä¸­çš„æè¿°ã€‚</p>
<h2 id="é½æ¬¡å˜æ¢çŸ©é˜µ">é½æ¬¡å˜æ¢çŸ©é˜µ</h2>
<p>ä¸‰ç»´ç©ºé—´ä¸­çš„é½æ¬¡å˜æ¢çŸ©é˜µè¡¨ç¤ºä¸º <span class="math inline">\(4 \times 4\)</span> é˜¶çŸ©é˜µå½¢å¼</p>
<p><span class="math display">\[
_{B}^{A}T =
\begin{bmatrix}
  &amp; _{B}^{A}R &amp;   &amp; ^{A}P_{B\ ORG} \\
0 &amp; 0         &amp; 0 &amp; 1
\end{bmatrix}
\]</span></p>
<p>å…¶ä¸­ï¼Œ<span class="math inline">\(_{B}^{A}R\)</span> ä¸º <span class="math inline">\(3 \times 3\)</span> é˜¶æ—‹è½¬çŸ©é˜µï¼Œ<span class="math inline">\(^{A}P_{BORG}\)</span> ä¸º <span class="math inline">\(3 \times 1\)</span> é˜¶å¹³ç§»çŸ¢é‡ã€‚</p>
<p>å¸¸è§çš„å‡ ä½•å˜æ¢éƒ½æ˜¯çº¿æ€§å˜æ¢ï¼ŒåŒ…æ‹¬å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰ï¼Œè€Œæœºå™¨äººä¸­æœ€å¸¸è§çš„æ˜¯å¹³ç§»å’Œæ—‹è½¬å˜æ¢ï¼Œè¿™é‡Œå°±ä»¥è¿™ä¸¤ç§å˜æ¢ä¸ºä¾‹åˆ†æå…¶åœ¨é½æ¬¡åæ ‡ç³»ä¸‹çš„å˜æ¢å½¢å¼ã€‚å˜æ¢éƒ½åœ¨ç¬›å¡å°”åæ ‡ç³»ä¸‹è¿›è¡Œï¼Œä¸‰ç»´çš„ç¬›å¡å°”åæ ‡ç³»æ»¡è¶³å³æ‰‹å®šåˆ™ã€‚</p>
<h3 id="å¹³ç§»å˜æ¢">å¹³ç§»å˜æ¢</h3>
<p>ç»™å®šç©ºé—´ä¸­ç‚¹ <span class="math inline">\(P\)</span>ï¼Œç¬›å¡å°”åæ ‡ç³»ä¸‹çš„åæ ‡ä¸º <span class="math inline">\((x, y, z)\)</span>ï¼Œå°†ç‚¹ <span class="math inline">\(P\)</span> åˆ†åˆ«æ²¿ <span class="math inline">\(X\)</span> è½´ã€<span class="math inline">\(Y\)</span> è½´ã€<span class="math inline">\(Z\)</span> è½´å¹³ç§» <span class="math inline">\(t_{x}\)</span>ã€<span class="math inline">\(t_{y}\)</span> å’Œ <span class="math inline">\(t_{z}\)</span> ä¸ªå•ä½ï¼Œå¾—åˆ°ç‚¹ <span class="math inline">\(P&#39;\)</span>ï¼Œå…¶åæ ‡ä¸º <span class="math inline">\((x&#39;, y&#39;, z&#39;)\)</span>ï¼Œåˆ™ç”¨é½æ¬¡åæ ‡å˜æ¢çŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
x&#39; \\
y&#39; \\
z&#39; \\
1
\end{bmatrix}
=
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; t_{x} \\
0 &amp; 1 &amp; 0 &amp; t_{y} \\
0 &amp; 0 &amp; 1 &amp; t_{z} \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
z \\
1
\end{bmatrix}
\]</span></p>
<h3 id="æ—‹è½¬å˜æ¢">æ—‹è½¬å˜æ¢</h3>
<p>ä¸‰ç»´ç©ºé—´å†…çš„æ—‹è½¬å˜æ¢å¯ä»¥åˆ†è§£ä¸ºç»• <span class="math inline">\(X\)</span> è½´ã€ç»• <span class="math inline">\(Y\)</span> è½´å’Œç»• <span class="math inline">\(Z\)</span> è½´çš„æ—‹è½¬ï¼Œæ—‹è½¬çš„æ–¹å‘åŒæ ·æ»¡è¶³å³æ‰‹å®šåˆ™ï¼šå¤§æ‹‡æŒ‡æ²¿æ—‹è½¬è½´çº¿çš„æ­£æ–¹å‘ï¼Œå››æŒ‡çš„æŒ‡å‘å³ä¸ºæ—‹è½¬çš„æ­£æ–¹å‘ã€‚</p>
<h4 id="ç»•-x-è½´çš„æ—‹è½¬">ç»• <span class="math inline">\(X\)</span> è½´çš„æ—‹è½¬</h4>
<p>ç‚¹ <span class="math inline">\(P (x, y, z)\)</span> ç»• <span class="math inline">\(X\)</span> è½´æ—‹è½¬ <span class="math inline">\(\alpha\)</span> å¾—åˆ°ç‚¹ <span class="math inline">\(P&#39; (x&#39;, y&#39;, z&#39;)\)</span>ã€‚ç”±äºç»• <span class="math inline">\(X\)</span> è½´æ—‹è½¬ï¼Œå› æ­¤ <span class="math inline">\(x&#39; = x\)</span>ï¼Œå³ç‚¹ <span class="math inline">\(P\)</span> åœ¨ <span class="math inline">\(YOZ\)</span> å¹³é¢ä¸Šè¿›è¡ŒäºŒç»´æ—‹è½¬ï¼Œåˆ™æœ‰</p>
<p><span class="math display">\[
\begin{aligned}
x&#39; &amp; = x                               \\
y&#39; &amp; = y \cos{\alpha} - z \sin{\alpha} \\
z&#39; &amp; = y \sin{\alpha} + z \cos{\alpha}
\end{aligned}
\]</span></p>
<p>ç”¨é½æ¬¡åæ ‡å˜æ¢å¯è¡¨ç¤ºä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
x&#39; \\
y&#39; \\
z&#39; \\
1
\end{bmatrix}
=
\begin{bmatrix}
1 &amp; 0            &amp; 0             &amp; 0 \\
0 &amp; \cos{\alpha} &amp; -\sin{\alpha} &amp; 0 \\
0 &amp; \sin{\alpha} &amp; \cos{\alpha}  &amp; 0 \\
0 &amp; 0            &amp; 0             &amp; 1
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
z \\
1
\end{bmatrix}
\]</span></p>
<h4 id="ç»•-y-è½´çš„æ—‹è½¬">ç»• <span class="math inline">\(Y\)</span> è½´çš„æ—‹è½¬</h4>
<p>ç‚¹ <span class="math inline">\(P (x, y, z)\)</span> ç»• <span class="math inline">\(Y\)</span> è½´æ—‹è½¬ <span class="math inline">\(\theta\)</span> å¾—åˆ°ç‚¹ <span class="math inline">\(P&#39; (x&#39;, y&#39;, z&#39;)\)</span>ã€‚ç”±äºç»• <span class="math inline">\(Y\)</span> è½´æ—‹è½¬ï¼Œå› æ­¤ <span class="math inline">\(y&#39; = y\)</span>ï¼Œå³ç‚¹ <span class="math inline">\(P\)</span> åœ¨ <span class="math inline">\(ZOX\)</span> å¹³é¢ï¼ˆæ³¨æ„æ­£æ–¹å‘ï¼‰ä¸Šè¿›è¡ŒäºŒç»´æ—‹è½¬ï¼Œåˆ™æœ‰</p>
<p><span class="math display">\[
\begin{aligned}
x&#39; &amp; = z \sin{\theta} + x \cos{\theta} \\
y&#39; &amp; = y&#39;                              \\
z&#39; &amp; = z \cos{\theta} - x \sin{\theta}
\end{aligned}
\]</span></p>
<p>ç”¨é½æ¬¡åæ ‡å˜æ¢å¯è¡¨ç¤ºä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
x&#39; \\
y&#39; \\
z&#39; \\
1
\end{bmatrix}
=
\begin{bmatrix}
\cos{\theta}  &amp; 0 &amp; \sin{\theta} &amp; 0 \\
0             &amp; 1 &amp; 0            &amp; 0 \\
-\sin{\theta} &amp; 0 &amp; \cos{\theta} &amp; 0 \\
0             &amp; 0 &amp; 0            &amp; 1
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
z \\
1
\end{bmatrix}
\]</span></p>
<h4 id="ç»•-z-è½´çš„æ—‹è½¬">ç»• <span class="math inline">\(Z\)</span> è½´çš„æ—‹è½¬</h4>
<p>ç‚¹ <span class="math inline">\(P (x, y, z)\)</span> ç»• <span class="math inline">\(Z\)</span> è½´æ—‹è½¬ <span class="math inline">\(\gamma\)</span> å¾—åˆ°ç‚¹ <span class="math inline">\(P&#39; (x&#39;, y&#39;, z&#39;)\)</span>ã€‚åŒç†ï¼Œç”±äºç»• <span class="math inline">\(Z\)</span> è½´æ—‹è½¬ï¼Œå› æ­¤ <span class="math inline">\(z&#39; = z\)</span>ï¼Œå³ç‚¹ <span class="math inline">\(P\)</span> åœ¨ <span class="math inline">\(XOY\)</span> å¹³é¢ä¸Šè¿›è¡ŒäºŒç»´æ—‹è½¬ï¼Œåˆ™æœ‰</p>
<p><span class="math display">\[
\begin{aligned}
x&#39; &amp; =\ x \cos{\gamma} - y \sin{\gamma} \\
y&#39; &amp; =\ x \sin{\gamma} + y \sin{\gamma} \\
z&#39; &amp; =\ z
\end{aligned}
\]</span></p>
<p>ç”¨é½æ¬¡åæ ‡å˜æ¢å¯è¡¨ç¤ºä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
x&#39; \\
y&#39; \\
z&#39; \\
1
\end{bmatrix}
=
\begin{bmatrix}
\cos{\gamma} &amp; -\sin{\gamma} &amp; 0 &amp; 0 \\
\sin{\gamma} &amp; \cos{\gamma}  &amp; 0 &amp; 0 \\
0            &amp; 0             &amp; 1 &amp; 0 \\
0            &amp; 0             &amp; 0 &amp; 1
\end{bmatrix}
\begin{bmatrix}
x \\
y \\
z \\
1
\end{bmatrix}
\]</span></p>
<hr />
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><p><a href="https://en.wikipedia.org/wiki/Denavitâ€“Hartenberg_parameters">Denavitâ€“Hartenberg parameters - Wikipedia</a></p></li>
<li><p><a href="https://blog.csdn.net/csxiaoshui/article/details/65446125">æ—‹è½¬å˜æ¢ï¼ˆä¸€ï¼‰æ—‹è½¬çŸ©é˜µ</a></p></li>
</ul>
]]></content>
      <categories>
        <category>æœºå™¨äºº</category>
      </categories>
      <tags>
        <tag>æœºå™¨äºº</tag>
        <tag>é½æ¬¡åæ ‡ç³»</tag>
      </tags>
  </entry>
  <entry>
    <title>äº”è‡ªç”±åº¦æœºæ¢°è‡‚çš„å»ºæ¨¡ (2) â€”â€” DH å»ºæ¨¡æ³•</title>
    <url>/2018/10/02/%E4%BA%94%E8%87%AA%E7%94%B1%E5%BA%A6%E6%9C%BA%E6%A2%B0%E8%87%82%E7%9A%84%E5%BB%BA%E6%A8%A1-2-%E2%80%94%E2%80%94-DH-%E5%BB%BA%E6%A8%A1%E6%B3%95/</url>
    <content><![CDATA[<h2 id="dh-å»ºæ¨¡æ³•">DH å»ºæ¨¡æ³•</h2>
<p>DH å»ºæ¨¡æ–¹æ³•æ˜¯ç”± Denavit å’Œ Hartenberg æå‡ºçš„ä¸€ç§å»ºæ¨¡æ–¹æ³•ï¼Œä¸»è¦ç”¨åœ¨æœºå™¨äººè¿åŠ¨å­¦ä¸Šã€‚æ­¤æ–¹æ³•åœ¨æœºå™¨äººçš„æ¯ä¸ªè¿æ†ä¸Šå»ºç«‹ä¸€ä¸ªåæ ‡ç³»ï¼Œé€šè¿‡é½æ¬¡åæ ‡å˜æ¢å®ç°ä¸¤ä¸ªè¿æ†ä¸Šçš„åæ ‡å˜æ¢ï¼Œå»ºç«‹å¤šè¿æ†ä¸²è”ç³»ç»Ÿä¸­é¦–æœ«åæ ‡ç³»çš„å˜æ¢å…³ç³»ã€‚</p>
<span id="more"></span>
<p>DH å»ºæ¨¡æ–¹æ³•çš„å‡ ä¸ªè¦ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å»ºç«‹è¿æ†åæ ‡ç³»</li>
<li>ç¡®å®šå››ä¸ªå‚æ•° <span class="math inline">\(\alpha\)</span>ã€<span class="math inline">\(a\)</span>ã€<span class="math inline">\(d\)</span>ã€<span class="math inline">\(\theta\)</span></li>
<li>åˆ— DH å‚æ•°è¡¨</li>
<li>ç”±å‚æ•°è¡¨å¾—åˆ°å˜æ¢çŸ©é˜µ</li>
</ul>
<p>DH å»ºæ¨¡æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªè¿æ†ä½¿ç”¨ 4 ä¸ªå‚æ•° <span class="math inline">\(\alpha\)</span>ã€<span class="math inline">\(a\)</span>ã€<span class="math inline">\(d\)</span> å’Œ <span class="math inline">\(\theta\)</span> æ¥æè¿°ï¼Œ2 ä¸ªæè¿°è¿æ†æœ¬èº«ï¼Œå¦å¤– 2 ä¸ªæè¿°ä¸ç›¸é‚»è¿æ†çš„ä½å§¿ï¼ˆè¿æ¥æˆ–å‡ ä½•å…³ç³»ï¼‰ã€‚å¯¹äºè½¬åŠ¨å…³èŠ‚ï¼Œå…¶ä¸­ <span class="math inline">\(\theta\)</span> ä¸ºå…³èŠ‚å˜é‡ï¼Œå…¶ä»–ä¸‰ä¸ªå‚æ•°å›ºå®šä¸å˜ï¼Œä¸ºè¿æ†å‚æ•°ï¼›å¯¹äºç§»åŠ¨å…³èŠ‚ï¼Œ<span class="math inline">\(d\)</span> ä¸ºå…³èŠ‚å˜é‡ï¼Œå…¶ä»–ä¸‰ä¸ªä¸ºå…³èŠ‚å‚æ•°ã€‚</p>
<p>æ ¹æ®è¿æ†åæ ‡ç³»å’Œå…³èŠ‚å¯¹åº”å…³ç³»çš„ä¸åŒï¼ŒDH å»ºæ¨¡æ³•å¯ä»¥åˆ†ä¸ºä¼ ç»Ÿ DH (Classic DH) å’Œæ”¹è¿› DH (Modified DH)ï¼ŒäºŒè€…çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p>
<table>
<thead>
<tr class="header">
<th>åŒºåˆ«</th>
<th>Classic DH</th>
<th>Modified DH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>è¿æ†å›ºå®šåæ ‡ç³»çš„ä½ç½®</td>
<td>åä¸€ä¸ªå…³èŠ‚åæ ‡ç³»</td>
<td>å‰ä¸€ä¸ªå…³èŠ‚åæ ‡ç³»</td>
</tr>
<tr class="even">
<td><span class="math inline">\(X\)</span> è½´çš„ç¡®å®šæ–¹å¼</td>
<td>å½“å‰åæ ‡ç³» <span class="math inline">\(Z\)</span> è½´å’Œå‰ä¸€ä¸ªåæ ‡ç³» <span class="math inline">\(Z\)</span> è½´çš„å‘é‡ç§¯</td>
<td>åä¸€ä¸ªåæ ‡ç³» <span class="math inline">\(Z\)</span> è½´ä¸å½“å‰åæ ‡ç³» <span class="math inline">\(Z\)</span> è½´çš„å‘é‡ç§¯</td>
</tr>
<tr class="odd">
<td>åæ ‡ç³»é—´çš„å‚æ•°å˜æ¢é¡ºåº</td>
<td><span class="math inline">\(\theta\)</span>ã€<span class="math inline">\(d\)</span>ã€<span class="math inline">\(a\)</span>ã€<span class="math inline">\(\alpha\)</span></td>
<td><span class="math inline">\(\alpha\)</span>ã€<span class="math inline">\(a\)</span>ã€<span class="math inline">\(\theta\)</span>ã€<span class="math inline">\(d\)</span></td>
</tr>
</tbody>
</table>
<h3 id="classic-dh">Classic DH</h3>
<p><img src="https://drive.google.com/uc?export=view&id=1GYql9eMiNaknHYI69XB3dMeQubryIiPe" alt="Classic DH" width="40%"></p>
<p>Classic DH çš„å…³èŠ‚å’Œåæ ‡ç³»å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼Œå…¶ä¸­å„ä¸ªå‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li><span class="math inline">\(\theta_{i}\)</span>ï¼š<span class="math inline">\(X_{i-1}\)</span> åˆ° <span class="math inline">\(X_{i}\)</span> ç»• <span class="math inline">\(Z_{i-1}\)</span> æ—‹è½¬çš„è§’åº¦</li>
<li><span class="math inline">\(d_{i}\)</span>ï¼š<span class="math inline">\(X_{i-1}\)</span> åˆ° <span class="math inline">\(X_{i}\)</span> æ²¿ <span class="math inline">\(Z_{i-1}\)</span> æ–¹å‘çš„è·ç¦»</li>
<li><span class="math inline">\(a_{i}\)</span>ï¼š<span class="math inline">\(Z_{i-1}\)</span> åˆ° <span class="math inline">\(Z_{i}\)</span> æ²¿ <span class="math inline">\(X_{i-1}\)</span> æ–¹å‘çš„è·ç¦»</li>
<li><span class="math inline">\(\alpha_{i}\)</span>ï¼š<span class="math inline">\(Z_{i-1}\)</span> åˆ° <span class="math inline">\(Z_{i}\)</span> ç»• <span class="math inline">\(X_{i-1}\)</span> æ—‹è½¬çš„è§’åº¦</li>
</ul>
<p>åæ ‡ç³» <span class="math inline">\(O_{i-1}\)</span> ä¸å…³èŠ‚ <span class="math inline">\(i\)</span> å¯¹é½ï¼Œå…¶ DH å‚æ•°çŸ©é˜µä¸º</p>
<p><span class="math display">\[
_{i}^{i-1}T =
\begin{bmatrix}
\cos{\theta_{i}} &amp; -\sin{\theta_{i}} \cos{\alpha_{i}} &amp; \sin{\theta_{i}}  \sin{\alpha_{i}} &amp; a_{i} \cos{\theta_{i}} \\
\sin{\theta_{i}} &amp; \cos{\theta_{i}} \cos{\alpha_{i}}  &amp; -\cos{\theta_{i}} \sin{\alpha_{i}} &amp; a_{i} \sin{\theta_{i}} \\
0                &amp; \sin{\alpha_{i}}                   &amp; \cos{\alpha_{i}}                   &amp; d_{i}                  \\
0                &amp; 0                                  &amp; 0                                  &amp; 1
\end{bmatrix}
\]</span></p>
<h3 id="modified-dh">Modified DH</h3>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/d/d8/DHParameter.png" alt="Modified DH" width="40%"></p>
<p>Modified DH çš„å…³èŠ‚å’Œåæ ‡ç³»å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼Œå…¶ä¸­å„ä¸ªå‚æ•°çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li><span class="math inline">\(\alpha_{i-1}\)</span>ï¼š<span class="math inline">\(Z_{i-1}\)</span> åˆ° <span class="math inline">\(Z_{i}\)</span> ç»• <span class="math inline">\(X_{i-1}\)</span> æ—‹è½¬çš„è§’åº¦</li>
<li><span class="math inline">\(a_{i-1}\)</span>ï¼š<span class="math inline">\(Z_{i-1}\)</span> åˆ° <span class="math inline">\(Z_{i}\)</span> æ²¿ <span class="math inline">\(X_{i-1}\)</span> æ–¹å‘çš„è·ç¦»</li>
<li><span class="math inline">\(\theta_{i}\)</span>ï¼š<span class="math inline">\(X_{i-1}\)</span> åˆ° <span class="math inline">\(X_{i}\)</span> ç»• <span class="math inline">\(Z_{i}\)</span> æ—‹è½¬çš„è§’åº¦</li>
<li><span class="math inline">\(d_{i}\)</span>ï¼š<span class="math inline">\(X_{i-1}\)</span> åˆ° <span class="math inline">\(X_{i}\)</span> æ²¿ <span class="math inline">\(Z_{i}\)</span> æ–¹å‘çš„è·ç¦»</li>
</ul>
<p>åæ ‡ç³» <span class="math inline">\(O_{i-1}\)</span> ä¸å…³èŠ‚ <span class="math inline">\(i-1\)</span> å¯¹é½ï¼Œå…¶ DH å‚æ•°çŸ©é˜µä¸º</p>
<p><span class="math display">\[
_{i}^{i-1}T =
\begin{bmatrix}
\cos{\theta_{i}}                    &amp; -\sin{\theta_{i}}                   &amp; 0                   &amp; a_{i-1}                   \\
\sin{\theta_{i}} \cos{\alpha_{i-1}} &amp; \cos{\theta_{i}} \cos{\alpha_{i-1}} &amp; -\sin{\alpha_{i-1}} &amp; -d_{i} \sin{\alpha_{i-1}} \\
\sin{\theta_{i}} \sin{\alpha_{i-1}} &amp; \cos{\theta_{i}} \sin{\alpha_{i-1}} &amp; \cos{\alpha_{i-1}}  &amp; d_{i} \cos{\alpha_{i-1}}  \\
0                                   &amp; 0                                   &amp; 0                   &amp; 1
\end{bmatrix}
\]</span></p>
<p>Modified DH å…‹æœäº† Classic DH åœ¨ç”¨äºæ ‘å‹ç»“æ„æœºå™¨äººæ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œæ¯”è¾ƒå¸¸ç”¨ï¼Œæ•…ä¹‹åä¸»è¦ä»‹ç»è¿™ç§æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œå»ºæ¨¡ã€‚</p>
<h2 id="æœºæ¢°è‡‚è¿æ†åæ ‡ç³»çš„å»ºç«‹">æœºæ¢°è‡‚è¿æ†åæ ‡ç³»çš„å»ºç«‹</h2>
<p>å»ºç«‹æœºæ¢°è‡‚è¿æ†åæ ‡ç³»çš„æ­¥éª¤ï¼š</p>
<ol type="1">
<li>ç¡®å®šå„ä¸ªå…³èŠ‚è½´å’Œè¿æ†ï¼Œåæ ‡ç³»çš„ <span class="math inline">\(Z\)</span> è½´æ²¿å…³èŠ‚è½´çº¿æ–¹å‘</li>
<li>æ‰¾å‡ºç›¸é‚»ä¸¤å…³èŠ‚è½´çº¿çš„äº¤ç‚¹æˆ–å…¬å‚çº¿ï¼Œç”¨äºç¡®å®šåæ ‡ç³» <span class="math inline">\(\{i\}\)</span> çš„åŸç‚¹ï¼šä»¥å…³èŠ‚è½´ <span class="math inline">\(i\)</span> å’Œ <span class="math inline">\(i+1\)</span> çš„äº¤ç‚¹æˆ–å…¬å‚çº¿ä¸å…³èŠ‚è½´ <span class="math inline">\(i\)</span> çš„äº¤ç‚¹ä¸ºåŸç‚¹</li>
<li>ç¡®å®š <span class="math inline">\(X\)</span> è½´ï¼šä¸¤è½´çº¿ç›¸äº¤æ—¶ï¼Œ<span class="math inline">\(\vec{X_{i}} = \pm \vec{Z_{i+1}} \times \vec{Z_{i}}\)</span>ï¼›ä¸¤è½´çº¿ä¸ç›¸äº¤æ—¶ï¼Œ<span class="math inline">\(X_{i}\)</span> è½´ä¸å…¬å‚çº¿é‡åˆï¼Œæ–¹å‘ä¸º <span class="math inline">\(i\)</span> åˆ° <span class="math inline">\(i+1\)</span></li>
<li>å³æ‰‹å®šåˆ™ç¡®å®š <span class="math inline">\(Y_{i}\)</span> è½´</li>
<li>ç¡®å®šåŸºåæ ‡ç³» <span class="math inline">\(\{0\}\)</span>ï¼šä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œ<span class="math inline">\(Z_0\)</span> é€šå¸¸ä¸å…³èŠ‚ 1 çš„è½´çº¿æ–¹å‘é‡åˆï¼Œä¸”å½“å…³èŠ‚å˜é‡ 1 ä¸º 0 æ—¶ï¼Œåæ ‡ç³» <span class="math inline">\(\{0\}\)</span> ä¸ <span class="math inline">\(\{1\}\)</span> é‡åˆ</li>
<li>ç¡®å®šæœ«ç«¯åæ ‡ç³» <span class="math inline">\(\{n\}\)</span>ï¼šå¯¹äºè½¬åŠ¨å…³èŠ‚ï¼Œ<span class="math inline">\(\theta_n = 0\)</span> æ—¶ï¼Œ<span class="math inline">\(X_n\)</span> ä¸ <span class="math inline">\(X_{n-1}\)</span> æ–¹å‘ç›¸åŒï¼Œé€‰å–åŸç‚¹ä½¿ <span class="math inline">\(d_n = 0\)</span>ï¼›å¯¹äºç§»åŠ¨å…³èŠ‚ï¼Œå– <span class="math inline">\(X_n\)</span> æ–¹å‘ä½¿ <span class="math inline">\(\theta_n = 0\)</span>ï¼Œå½“ <span class="math inline">\(d_n = 0\)</span> æ—¶ï¼Œå– <span class="math inline">\(X_{n-1}\)</span> ä¸ <span class="math inline">\(X_n\)</span> çš„äº¤ç‚¹ä¸ºåŸç‚¹</li>
</ol>
<p><img src="https://drive.google.com/uc?export=view&id=1wSbJ4LteBvaAXjykoVqwe91GlwGkcuYD" alt="æœºæ¢°è‡‚" width="40%"></p>
<p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„ 5 è‡ªç”±åº¦æœºæ¢°è‡‚çš„å®ç‰©å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ ¹æ®å¦‚ä¸Šæ‰€è¿°çš„æ­¥éª¤å»ºç«‹åæ ‡ç³»ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><a name="åæ ‡ç³»"></a></p>
<p><img src="https://drive.google.com/uc?export=view&id=1nGTlKyJhLxSZSBxhsYxiTPvYqL3axcPZ" alt="åæ ‡ç³» 1" width="50%"></p>
<h2 id="dh-å‚æ•°è¡¨">DH å‚æ•°è¡¨</h2>
<p>æ ¹æ®æœºæ¢°è‡‚å„ä¸ªè¿æ†é—´åæ ‡ç³»çš„å…³ç³»ï¼Œé‡‡ç”¨ Modified DH å½¢å¼ï¼Œå¾—åˆ°çš„å‚æ•°è¡¨å¦‚ä¸‹ã€‚</p>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(i\)</span></th>
<th><span class="math inline">\(\alpha_{i-1}\)</span></th>
<th><span class="math inline">\(a_{i-1}\)</span></th>
<th><span class="math inline">\(\theta_{i-1}\)</span></th>
<th><span class="math inline">\(d_{i}\)</span></th>
<th><span class="math inline">\(\theta\)</span> çš„èŒƒå›´</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><span class="math inline">\(0^{\circ}\)</span></td>
<td><span class="math inline">\(0\)</span></td>
<td><span class="math inline">\(\theta_{1}\)</span></td>
<td><span class="math inline">\(0\)</span></td>
<td><span class="math inline">\((-\frac{2 \pi}{3}, \frac{2 \pi}{3})\)</span></td>
</tr>
<tr class="even">
<td>2</td>
<td><span class="math inline">\(-90^{\circ}\)</span></td>
<td><span class="math inline">\(a_{1}\)</span></td>
<td><span class="math inline">\(\theta_{2}\)</span></td>
<td><span class="math inline">\(0\)</span></td>
<td><span class="math inline">\((-\frac{\pi}{2}, 0)\)</span></td>
</tr>
<tr class="odd">
<td>3</td>
<td><span class="math inline">\(0^{\circ}\)</span></td>
<td><span class="math inline">\(a_{2}\)</span></td>
<td><span class="math inline">\(\theta_{3}\)</span></td>
<td><span class="math inline">\(0\)</span></td>
<td><span class="math inline">\((-\frac{2 \pi}{3}, \frac{2 \pi}{3})\)</span></td>
</tr>
<tr class="even">
<td>4</td>
<td><span class="math inline">\(0^{\circ}\)</span></td>
<td><span class="math inline">\(a_{3}\)</span></td>
<td><span class="math inline">\(\theta_{4}\)</span></td>
<td><span class="math inline">\(0\)</span></td>
<td><span class="math inline">\((-\frac{7 \pi}{6}, \frac{\pi}{6})\)</span></td>
</tr>
<tr class="odd">
<td>5</td>
<td><span class="math inline">\(-90^{\circ}\)</span></td>
<td><span class="math inline">\(0\)</span></td>
<td><span class="math inline">\(\theta_{5}\)</span></td>
<td><span class="math inline">\(0\)</span></td>
<td><span class="math inline">\((-\frac{2 \pi}{3}, \frac{2 \pi}{3})\)</span></td>
</tr>
</tbody>
</table>
<p>å…¶ä¸­ï¼Œ<span class="math inline">\(a_{1} = 3\ mm\)</span>ï¼Œ<span class="math inline">\(a_{2} = 96\ mm\)</span>ï¼Œ<span class="math inline">\(a_{3} = 96\ mm\)</span>ï¼Œ<span class="math inline">\(\theta_{1}\)</span>ï½<span class="math inline">\(\theta_{5}\)</span> ä¸ºå…³èŠ‚ 1 ï½ 5 çš„æ—‹è½¬è§’åº¦ã€‚åˆå§‹æ—¶åˆ»ï¼Œ<span class="math inline">\(\theta_{1} = 0\)</span>ï¼Œ<span class="math inline">\(\theta_{2} = 0\)</span>ï¼Œ<span class="math inline">\(\theta_{3} = 0\)</span>ï¼Œ<span class="math inline">\(\theta_{4} = -\frac{pi}{2}\)</span>ï¼Œ<span class="math inline">\(\theta_{5} = 0\)</span>ã€‚</p>
<h2 id="é½æ¬¡å˜æ¢çŸ©é˜µ">é½æ¬¡å˜æ¢çŸ©é˜µ</h2>
<p>å°† DH å‚æ•°è¡¨ä»£å…¥ Modified DH çš„ DH å‚æ•°çŸ©é˜µï¼Œå¯ä»¥å¾—åˆ°å„ä¸ªåæ ‡ç³»é—´çš„é½æ¬¡å˜æ¢çŸ©é˜µ <span class="math inline">\(_{1}^{0}T\)</span>ã€<span class="math inline">\(_{2}^{1}T\)</span>ã€<span class="math inline">\(_{3}^{2}T\)</span>ã€<span class="math inline">\(_{4}^{3}T\)</span> å’Œ <span class="math inline">\(_{5}^{4}T\)</span>ï¼Œåˆ™å¯å¾—åŸºåæ ‡ç³»åˆ°æœ«ç«¯åæ ‡ç³»çš„é½æ¬¡å˜æ¢çŸ©é˜µ <a name="è¿åŠ¨å­¦æ–¹ç¨‹"></a></p>
<p><span class="math display">\[
_{5}^{0}T = {_{1}^{0}T} {_{2}^{1}T} {_{3}^{2}T} {_{4}^{3}T} {_{5}^{4}T} =
\begin{bmatrix}
n_{x} &amp; o_{x} &amp; a_{x} &amp; p_{x} \\
n_{y} &amp; o_{y} &amp; a_{y} &amp; p_{y} \\
n_{z} &amp; o_{z} &amp; a_{z} &amp; p_{z} \\
0   &amp; 0   &amp; 0   &amp; 1
\end{bmatrix}
\]</span></p>
<p>å…¶ä¸­ï¼Œ<span class="math inline">\(\begin{bmatrix} p_{x} &amp; p_{y} &amp; p_{z} \end{bmatrix}^T\)</span> ä¸ºæœºæ¢°è‡‚æœ«ç«¯åœ¨åŸºåæ ‡ç³»ä¸­çš„ä½ç½®ï¼Œ<span class="math inline">\(\begin{bmatrix} n_{x} &amp; n_{y} &amp; n_{z} \end{bmatrix}^T\)</span> ä¸ºæœºæ¢°è‡‚æœ«ç«¯åæ ‡ç³» <span class="math inline">\(X\)</span> è½´åœ¨åŸºåæ ‡ç³»ä¸­çš„æ–¹å‘çŸ¢é‡ï¼Œ<span class="math inline">\(\begin{bmatrix} o_{x} &amp; o_{y} &amp; o_{z} \end{bmatrix}^T\)</span> ä¸ºæœºæ¢°è‡‚æœ«ç«¯åæ ‡ç³» <span class="math inline">\(Y\)</span> è½´åœ¨åŸºåæ ‡ç³»ä¸­çš„æ–¹å‘çŸ¢é‡ï¼Œ<span class="math inline">\(\begin{bmatrix} a_{x} &amp; a_{y} &amp; a_{z} \end{bmatrix}^T\)</span> ä¸ºæœºæ¢°è‡‚æœ«ç«¯åæ ‡ç³» <span class="math inline">\(Z\)</span> è½´åœ¨åŸºåæ ‡ç³»ä¸­çš„æ–¹å‘çŸ¢é‡ã€‚</p>
<p>ä»£å…¥ DH å‚æ•°ï¼Œå¯å¾—</p>
<p><span class="math display">\[
\begin{aligned}
n_{x} = &amp; \ s_{1} s_{5} + c_{1} c_{2} c_{3} c_{4} c_{5} - c_{1} c_{2} c_{5} s_{3} s_{4} - c_{1} c_{3} c_{5} s_{2} s_{4} - c_{1} c_{4} c_{5} s_{2} s_{3} \\
n_{y} = &amp; \ c_{2} c_{3} c_{4} c_{5} s_{1} - c_{1} s_{5} - c_{2} c_{5} s_{1} s_{3} s_{4} - c_{3} c_{5} s_{1} s_{2} s_{4} - c_{4} c_{5} s_{1} s_{2} s_{3} \\
n_{z} = &amp; \ c_{5} s_{2} s_{3} s_{4} - c_{2} c_{4} c_{5} s_{3} - c_{3} c_{4} c_{5} s_{2} - c_{2} c_{3} c_{5} s_{4}                                       \\
o_{x} = &amp; \ c_{5} s_{1} - c_{1} c_{2} c_{3} c_{4} s_{5} + c_{1} c_{2} s_{3} s_{4} s_{5} + c_{1} c_{3} s_{2} s_{4} s_{5} + c_{1} c_{4} s_{2} s_{3} s_{5} \\
o_{y} = &amp; \ c_{2} s_{1} s_{3} s_{4} s_{5} - c_{2} c_{3} c_{4} s_{1} s_{5} - c_{1} c_{5} + c_{3} s_{1} s_{2} s_{4} s_{5} + c_{4} s_{1} s_{2} s_{3} s_{5} \\
o_{z} = &amp; \ c_{2} c_{3} s_{4} s_{5} + c_{2} c_{4} s_{3} s_{5} + c_{3} c_{4} s_{2} s_{5} - s_{2} s_{3} s_{4} s_{5}                                       \\
a_{x} = &amp; \ c_{1} s_{2} s_{3} s_{4} - c_{1} c_{2} c_{4} s_{3} - c_{1} c_{3} c_{4} s_{2} - c_{1} c_{2} c_{3} s_{4}                                       \\
a_{y} = &amp; \ s_{1} s_{2} s_{3} s_{4} - c_{2} c_{4} s_{1} s_{3} - c_{3} c_{4} s_{1} s_{2} - c_{2} c_{3} s_{1} s_{4}                                       \\
a_{z} = &amp; \ c_{2} s_{3} s_{4} + c_{3} s_{2} s_{4} + c_{4} s_{2} s_{3} - c_{2} c_{3} c_{4}                                                               \\
p_{x} = &amp; \ a_{1} c_{1} + a_{2} c_{1} c_{2} + a_{3} c_{1} c_{2} c_{3} - a_{3} c_{1} s_{2} s_{3}                                                         \\
p_{y} = &amp; \ a_{1} s_{1} + a_{2} c_{2} s_{1} + a_{3} c_{2} c_{3} s_{1} - a_{3} s_{1} s_{2} s_{3}                                                         \\
p_{z} = &amp; \ -a_{2} s_{2} - a_{3} c_{2} s_{3} - a_{3} c_{3} s_{2}
\end{aligned}
\]</span></p>
<p>å…¶ä¸­ï¼Œ<span class="math inline">\(s_{i} = \sin{\theta_{i}}\)</span>ï¼Œ<span class="math inline">\(c_{i} = \cos{\theta_{i}}\)</span>ã€‚</p>
<hr />
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><p><a href="https://blog.csdn.net/pengjc2001/article/details/70156333">Puma560 æœºå™¨äºº DH å˜æ¢ - pengjc2001 çš„åšå®¢</a></p></li>
<li><p><a href="https://blog.csdn.net/qq_27170195/article/details/79936518">MATLAB-Robot (2)ï¼šæ ‡å‡† DH å’Œæ”¹è¿› DH çš„åŒºåˆ« - é™ˆè®°å°é“ºçš„åšå®¢</a></p></li>
</ul>
]]></content>
      <categories>
        <category>æœºå™¨äºº</category>
      </categories>
      <tags>
        <tag>æœºå™¨äºº</tag>
        <tag>DH å»ºæ¨¡æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>äº”è‡ªç”±åº¦æœºæ¢°è‡‚çš„å»ºæ¨¡ (3) â€”â€” é€†è¿åŠ¨å­¦æ±‚è§£</title>
    <url>/2018/10/03/%E4%BA%94%E8%87%AA%E7%94%B1%E5%BA%A6%E6%9C%BA%E6%A2%B0%E8%87%82%E7%9A%84%E5%BB%BA%E6%A8%A1-3-%E2%80%94%E2%80%94-%E9%80%86%E8%BF%90%E5%8A%A8%E5%AD%A6%E6%B1%82%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="é€†è¿åŠ¨å­¦çš„è§£æ³•">é€†è¿åŠ¨å­¦çš„è§£æ³•</h2>
<ul>
<li>å°é—­è§£æ³•ï¼šè®¡ç®—é€Ÿåº¦å¿«ã€å¯ä»¥è·å¾—æ‰€æœ‰è§£ï¼Œä½†æ˜¯å—æœºæ¢°è‡‚ç»“æ„é™åˆ¶è¾ƒå¤§
<ul>
<li>ä»£æ•°æ³•</li>
<li>å‡ ä½•æ³•</li>
</ul></li>
<li>æ•°å€¼è§£æ³•ï¼šé€šç”¨ï¼Œä½†è®¡ç®—é€Ÿåº¦æ…¢
<ul>
<li>æ¶ˆå…ƒæ³•ï¼šç”±æœºå™¨äººçš„éçº¿æ€§è¿åŠ¨æ–¹ç¨‹å‡ºå‘æ„é€ ç›¸å…³çš„å¤šé¡¹å¼æ–¹ç¨‹ï¼Œé€šè¿‡è®¡ç®—è¯¥å¤šé¡¹å¼æ–¹ç¨‹æ±‚è§£</li>
<li>å»¶æ‹“æ³•ï¼šé€šè¿‡è·Ÿè¸ªè§£çš„è·¯å¾„ï¼Œä»ä¸€ä¸ªé€†è¿åŠ¨å­¦è§£å·²çŸ¥çš„åˆå§‹ä½å§¿å‡ºå‘è®¡ç®—ç›®æ ‡ä½å§¿çš„è§£</li>
<li>è¿­ä»£è®¡ç®—æ³•ï¼šä»ä¸€ä¸ªç»™å®šçš„åˆå§‹å€¼å‡ºå‘ã€‚è¿­ä»£è®¡ç®—é€†è¿åŠ¨å­¦çš„ç²¾ç¡®è§£</li>
</ul></li>
</ul>
<span id="more"></span>
<h2 id="è§£çš„å­˜åœ¨æ€§">è§£çš„å­˜åœ¨æ€§</h2>
<ul>
<li>è§£çš„å­˜åœ¨æ€§å®Œå…¨å–å†³äºæœºæ¢°è‡‚çš„å·¥ä½œç©ºé—´</li>
<li>å·¥ä½œç©ºé—´ï¼š
<ul>
<li>çµæ´»å·¥ä½œç©ºé—´ï¼šæœºæ¢°è‡‚æœ«ç«¯èƒ½å¤Ÿä»¥ä»»æ„ä½å§¿åˆ°è¾¾çš„ç©ºé—´ç‚¹é›†</li>
<li>å¯è¾¾å·¥ä½œç©ºé—´ï¼šæœºæ¢°è‡‚æœ«ç«¯è‡³å°‘èƒ½å¤Ÿä»¥ä¸€ç§ä½å§¿åˆ°è¾¾çš„ç©ºé—´ç‚¹é›†</li>
</ul></li>
<li>å¦‚æœæœ«ç«¯ä½å§¿åœ¨å¯è¾¾å·¥ä½œç©ºé—´ä¸­ï¼Œåˆ™é€†è¿åŠ¨å­¦çš„è§£æ˜¯å­˜åœ¨çš„ï¼Œå¦åˆ™ä¸å­˜åœ¨</li>
<li>è§£çš„ä¸ªæ•°å–å†³äºæœºæ¢°è‡‚çš„å…³èŠ‚æ•°é‡ï¼Œå®ƒä¹Ÿæ˜¯è¿æ†å‚æ•°å’Œå…³èŠ‚è¿åŠ¨èŒƒå›´çš„å‡½æ•°ã€‚é€šå¸¸ï¼Œè¿æ†çš„éé›¶å‚æ•°è¶Šå¤šï¼Œåˆ™åˆ°è¾¾æŸä¸€ä½å§¿çš„æ–¹å¼ä¹Ÿè¶Šå¤šï¼Œå³é€†è¿åŠ¨å­¦çš„è§£å°±è¶Šå¤š</li>
<li>ä½äº 6 è‡ªç”±åº¦çš„æœºæ¢°è‡‚åœ¨ä¸‰ç»´ç©ºé—´ä¸­ä¸èƒ½åˆ°è¾¾å…¨éƒ¨ä½å§¿</li>
<li>é€šå¸¸é€‰å–æœ€çŸ­è¡Œç¨‹è§£ä½œä¸ºå¤šè§£æƒ…å†µä¸‹çš„æœ€ä¼˜è§£ï¼šæ ¹æ® â€œå¤šç§»åŠ¨å°è¿æ†ï¼Œå°‘ç§»åŠ¨å¤§è¿æ†â€ çš„åŸåˆ™è®¾å®šåŠ æƒç³»æ•°</li>
</ul>
<h2 id="pieper-è§£æ³•">Pieper è§£æ³•</h2>
<p><strong>Pieper å‡†åˆ™</strong>ï¼šæœºæ¢°è‡‚ä¸‰ä¸ªç›¸é‚»å…³èŠ‚è½´äº¤äºä¸€ç‚¹æˆ–äº’ç›¸å¹³è¡Œã€‚</p>
<p>ç¬¦åˆ Pieper å‡†åˆ™åˆ™é€†è¿åŠ¨å­¦å¯è§£ã€‚ä»¥ä¹‹å‰å»ºå¥½è¿åŠ¨å­¦æ¨¡å‹çš„ 5 è‡ªç”±åº¦æœºæ¢°è‡‚ä¸ºä¾‹ï¼Œå…¶é€†è¿åŠ¨å­¦æ±‚è§£è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<h3 id="é€šè¿‡åˆ†ç¦»-theta_1-theta_2-theta_3-æ±‚è§£ç§»åŠ¨éƒ¨åˆ†å…³èŠ‚-12-å’Œ-3çš„è½¬åŠ¨åº¦">é€šè¿‡åˆ†ç¦» <span class="math inline">\(\theta_{1}\)</span> , <span class="math inline">\(\theta_{2}\)</span> , <span class="math inline">\(\theta_{3}\)</span> ï¼Œæ±‚è§£ç§»åŠ¨éƒ¨åˆ†ï¼ˆå…³èŠ‚ 1ã€2 å’Œ 3ï¼‰çš„è½¬åŠ¨â»†åº¦</h3>
<p>é¦–å…ˆï¼Œå›é¡¾ä¸€ä¸‹ä¹‹å‰ç¡®å®šå¥½çš„<a href="https://shoujiaxin.github.io/2018/10/02/5-è‡ªç”±åº¦æœºæ¢°è‡‚çš„å»ºæ¨¡-2-â€”â€”-DH-å»ºæ¨¡æ³•/#åæ ‡ç³»">æœºæ¢°è‡‚å„ä¸ªè¿æ†åæ ‡ç³»çš„å…³ç³»</a>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1nGTlKyJhLxSZSBxhsYxiTPvYqL3axcPZ" alt="åæ ‡ç³» 1" width="50%"></p>
<p>ç»™å®šåæ ‡ç³» <span class="math inline">\(\{4\}\)</span> çš„åŸç‚¹åœ¨åŸºåæ ‡ç³»ä¸­çš„ä½å§¿ <span class="math inline">\(^{0}P_{4\ ORG} = \begin{bmatrix} x &amp; y &amp; z &amp; 1 \end{bmatrix}^{T}\)</span>ï¼Œåˆ™æœ‰</p>
<p><span class="math display">\[
^{0}P_{4\ ORG} =
\begin{bmatrix}
x \\ y \\ z \\ 1
\end{bmatrix}
= {_{1}^{0}T} {_{2}^{1}T} {_{3}^{2}T} \cdot {^{3}P_{4\ ORG}}
\tag{1}
\]</span></p>
<p>å…¶ä¸­ï¼Œ<span class="math inline">\(^{3}P_{4\ ORG}\)</span> ä¸ºåæ ‡ç³» <span class="math inline">\(\{4\}\)</span> çš„åŸç‚¹åœ¨åæ ‡ç³» <span class="math inline">\(\{3\}\)</span> ä¸­çš„ä½å§¿ï¼Œå¯ç”¨ <span class="math inline">\(_{4}^{3}T\)</span> çš„ç¬¬ 4 åˆ—è¡¨ç¤ºï¼Œå³</p>
<p><span class="math display">\[
^{3}P_{4\ ORG} =
\begin{bmatrix}
a_{3}                   \\
-d_{4} \sin{\alpha_{3}} \\
d_{4} \cos{\alpha_{3}}  \\
1                       \\
\end{bmatrix}
\]</span></p>
<p>ä»¤ <span class="math inline">\({_{3}^{2}T} ^{3}P_{4\ ORG} = \begin{bmatrix} f_{1}(\theta_{3}) &amp; f_{2}(\theta_{3}) &amp; f_{3}(\theta_{3}) &amp; 1 \end{bmatrix}^{T}\)</span>ï¼Œåˆ™</p>
<p><span class="math display">\[
\begin{aligned}
f_{1}(\theta_{3}) &amp; = a_{2} + a_{3} c_{3} \\
f_{2}(\theta_{3}) &amp; = a_{3} s_{3}         \\
f_{3}(\theta_{3}) &amp; = 0
\end{aligned}
\tag{2}
\]</span></p>
<p>å†ä»¤</p>
<p><span class="math display">\[
{_{2}^{1}T}
\begin{bmatrix}
f_{1}(\theta_{3}) \\ f_{2}(\theta_{3}) \\ f_{3}(\theta_{3}) \\ 1
\end{bmatrix}
=
\begin{bmatrix}
g_{1}(\theta_{2}, \theta_{3}) \\ g_{2}(\theta_{2}, \theta_{3}) \\ g_{3}(\theta_{2}, \theta_{3}) \\ 1
\end{bmatrix}
\]</span></p>
<p>å°†å¼ <span class="math inline">\((1)\)</span> ä»£å…¥ï¼Œå¯å¾—</p>
<p><span class="math display">\[
\begin{bmatrix}
x \\ y \\ z \\ 1
\end{bmatrix}
= {_{1}^{0}T}
\begin{bmatrix}
g_{1}(\theta_{2}, \theta_{3}) \\ g_{2}(\theta_{2}, \theta_{3}) \\ g_{3}(\theta_{2}, \theta_{3}) \\ 1
\end{bmatrix}
=
\begin{bmatrix}
g_{1} c_{1} - g_{2} s_{1} \\ g_{1} s_{1} + g_{2} c_{1} \\ g_{3} \\ 1
\end{bmatrix}
\tag{3}
\]</span></p>
<p>å…¶ä¸­ï¼Œ</p>
<p><span class="math display">\[
\begin{aligned}
g_{1}(\theta_{2}, \theta_{3}) &amp; = c_{2} f_{1} - s_{2} f_{2} + a_{1}                                                                             \\
&amp; = a_{1} + a_{2} c_{2} + a_{3} (c_{2} c_{3} - s_{2} s_{3})                                                       \\
g_{2}(\theta_{2}, \theta_{3}) &amp; = s_{2} f_{1} \cos{\alpha_{1}} + c_{2} f_{2} \cos{\alpha_{1}} - f_{3} \sin{\alpha_{1}} - d_{2} \sin{\alpha_{1}} \\
&amp; = 0                                                                                                             \\
g_{3}(\theta_{2}, \theta_{3}) &amp; = s_{2} f_{1} \sin{\alpha_{1}} + c_{2} f_{2} \sin{\alpha_{1}} + f_{3} \cos{\alpha_{1}} + d_{2} \cos{\alpha_{1}} \\
&amp; = -a_{2} s_{2} - a_{3} (c_{2} s_{3} + c_{3} s_{2})
\end{aligned}
\tag{4}
\]</span></p>
<p>å†ä»¤ <span class="math inline">\(r(\theta_{1}, \theta_{2}) = x^{2} + y^{2} + z^{2} = g_{1}^{2} + g_{2}^{2} + g_{3}^{2} = 2 a_{1} (k_{1} c_{2} + k_{2} s_{2}) + k_{3}\)</span>ï¼Œå…¶ä¸­</p>
<p><span class="math display">\[
\begin{aligned}
k_{1} (\theta_{3}) &amp; = f_{1}                                                                     \\
&amp; = a_{2} + a_{3} c_{3}                                                       \\
k_{2} (\theta_{3}) &amp; = -f_{2}                                                                    \\
&amp; = -a_{3} s_{3}                                                              \\
k_{3} (\theta_{3}) &amp; = f_{1}^{2} + f_{2}^{2} + f_{3}^{2} + a_{1}^{2} + d_{2}^{2} + 2 d_{2} f_{3} \\
&amp; = a_{1}^{2} + a_{2}^{2} + a_{3}^{2} + 2 a_{2} a_{3} c_{3}
\end{aligned}
\tag{5}
\]</span></p>
<p>æ­¤å¤–ï¼Œç”± <span class="math inline">\((4)\)</span> å¯å¾— <span class="math inline">\(z = g_{3} = (k_{1} s_{2} - k_{2} c_{2}) \sin{\alpha_{1}} + k_{4}\)</span>ï¼Œå…¶ä¸­ï¼Œ<span class="math inline">\(k_{4} = f_{3} \cos{\alpha_{1}} + d_{2} \cos{\alpha_{1}} = 0\)</span>ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯å¾—æ–¹ç¨‹ç»„</p>
<p><span class="math display">\[
\begin{cases}
\begin{aligned}
r &amp; = 2 a_{1} (k_{1} c_{2} + k_{2} s_{2}) + k_{3}          \\
z &amp; = (k_{1} s_{2} - k_{2} c_{2}) \sin{\alpha_{1}} + k_{4}
\end{aligned}
\tag{6}
\end{cases}
\]</span></p>
<p><span class="math inline">\(a_{1}\)</span> å’Œ <span class="math inline">\(\sin{\alpha_{1}}\)</span> å‡ä¸ä¸ºé›¶ï¼Œæ¶ˆå» <span class="math inline">\(\theta_{2}\)</span> é¡¹å¯å¾—</p>
<p><span class="math display">\[
\frac{(r - k_{3})^{2}}{4 a_{1}^{2}} + \frac{(z - k_{4})^{2}}{\sin^{2} \alpha_{1}} = k_{1}^{2} + k_{2}^{2}
\tag{7}
\]</span></p>
<p>ä¸Šå¼åªå«æœ‰æœªçŸ¥æ•° <span class="math inline">\(\theta_{3}\)</span>ï¼Œå¯åˆ©ç”¨ä¸‡èƒ½å…¬å¼ <span class="math inline">\(u = \tan{\frac{\theta_{3}}{2}}\)</span> æ±‚è§£ã€‚</p>
<p>å°† <span class="math inline">\(k_{1}\)</span>ã€<span class="math inline">\(k_{2}\)</span> å’Œ <span class="math inline">\(k_{3}\)</span> ä»£å…¥å¼ <span class="math inline">\((7)\)</span>ï¼Œå¯å¾—</p>
<p><span class="math display">\[
\begin{aligned}
&amp; \frac{((a_{2} + a_{3} c_{3})^{2} + a_{1}^{2} - x^{2} - y^{2} - z^{2} + a_{3}^{2} s_{3}^{2})^{2}}{(4 a_{1}^{2})} + z^{2} \\
&amp; = (a_{2} + a_{3} c_{3})^{2} + a_{3}^{2} s_{3}^{2}
\end{aligned}
\tag{8}
\]</span></p>
<p>ä»£å…¥ä¸‡èƒ½å…¬å¼</p>
<p><span class="math display">\[
\begin{aligned}
\sin{\theta_{3}} &amp; = \frac{2 u}{1 + u^{2}}       \\
\cos{\theta_{3}} &amp; = \frac{1 - u^{2}}{1 + u^{2}}
\end{aligned}
\]</span></p>
<p>è§£å¾— <span class="math inline">\(\theta_{3} = 2 \tan^{-1}{u}\)</span>ï¼Œå…±æœ‰ 4 ä¸ªè§£ã€‚</p>
<p>å†ä»£å…¥ <span class="math inline">\(r = 2 a_{1} (k_{1} c_{2} + k_{2} s_{2}) + k_{3}\)</span> å¯è§£å¾— <span class="math inline">\(\theta_{2}\)</span>ï¼Œæœ‰ 2 ä¸ªè§£ï¼›æœ€åä»£å…¥ <span class="math inline">\(x = g_{1} c_{1} - g_{2} s_{1}\)</span> å¯è§£å¾— <span class="math inline">\(\theta_{1}\)</span>ï¼Œä¹Ÿæœ‰ 2 ä¸ªè§£ã€‚</p>
<p>ç»¼ä¸Šï¼Œå¯è§£å‡ºå…³èŠ‚ 1ã€2 å’Œ 3 çš„è§’åº¦ï¼Œå…±æœ‰ <span class="math inline">\(4 \times 2 \times 2 = 16\)</span> ç»„è§£ã€‚</p>
<h3 id="æ±‚è§£-theta_4-å’Œ-theta_5">æ±‚è§£ <span class="math inline">\(\theta_{4}\)</span> å’Œ <span class="math inline">\(\theta_{5}\)</span></h3>
<p>ç°åœ¨å·²çŸ¥å…³èŠ‚ 1ã€2ã€3 çš„è§’åº¦ <span class="math inline">\(\theta_{1}\)</span>ã€<span class="math inline">\(\theta_{2}\)</span> å’Œ <span class="math inline">\(\theta_{3}\)</span>ï¼Œä¸Šä¸€ç¯‡æ±‚å¾—äº†<a href="https://shoujiaxin.github.io/2018/10/02/5-è‡ªç”±åº¦æœºæ¢°è‡‚çš„å»ºæ¨¡-2-â€”â€”-DH-å»ºæ¨¡æ³•/#è¿åŠ¨å­¦æ–¹ç¨‹">æœºæ¢°è‡‚çš„æ­£è¿åŠ¨å­¦æ–¹ç¨‹</a></p>
<p><span class="math display">\[
_{5}^{0}T =
\begin{bmatrix}
n_x &amp; o_x &amp; a_x &amp; p_x \\
n_y &amp; o_y &amp; a_y &amp; p_y \\
n_z &amp; o_z &amp; a_z &amp; p_z \\
0   &amp; 0   &amp; 0   &amp; 1
\end{bmatrix}
\tag{9}
\]</span></p>
<p>å°†ä¸Šå¼ç­‰å·ä¸¤è¾¹åŒæ—¶å·¦ä¹˜ <span class="math inline">\(_{3}^{0}T^{-1}\)</span> å¯å¾—</p>
<p><span class="math display">\[
{_{3}^{0}T^{-1}} \cdot {_{5}^{0}T} = {_{4}^{3}T} {_{5}^{4}T} =
\begin{bmatrix}
c_{4} c_{5} &amp; -c_{4} s_{5} &amp; -s_{4} &amp; a3 \\
c_{5} s_{4} &amp; -s_{4} s_{5} &amp; c_{4}  &amp; 0  \\
-s_{5}    &amp; -c_{5}     &amp; 0    &amp; 0  \\
0       &amp; 0        &amp; 0    &amp; 1
\end{bmatrix}
\tag{10}
\]</span></p>
<p>ç­‰å¼å·¦å³ä¸¤è¾¹å…ƒç´  <span class="math inline">\((1, 3)\)</span> å’Œ <span class="math inline">\((2, 3)\)</span> å¯¹åº”ç›¸ç­‰ï¼Œå¯è§£å¾— <span class="math inline">\(\theta_{4} = \tan^{-1}{\frac{s_{4}}{c_{4}}}\)</span>ã€‚</p>
<p>åŒç†ï¼Œç”¨ <span class="math inline">\(_{4}^{0}T^{-1}\)</span> å·¦ä¹˜ç­‰å¼ <span class="math inline">\((9)\)</span> çš„ä¸¤è¾¹ï¼Œå¯å¾—</p>
<p><span class="math display">\[
{_{4}^{0}T^{-1}} \cdot {_{5}^{0}T} = {_{5}^{4}T} =
\begin{bmatrix}
c_{5}  &amp; -s_{5} &amp; 0 &amp; 0 \\
0    &amp; 0    &amp; 1 &amp; 0 \\
-s_{5} &amp; -c_{5} &amp; 0 &amp; 0 \\
0    &amp; 0    &amp; 0 &amp; 1
\end{bmatrix}
\tag{11}
\]</span></p>
<p>ç­‰å¼å·¦å³ä¸¤è¾¹å…ƒç´  <span class="math inline">\((1, 1)\)</span> å’Œ <span class="math inline">\((1, 2)\)</span> å¯¹åº”ç›¸ç­‰ï¼Œå¯è§£å¾— <span class="math inline">\(\theta_{5} = \tan^{-1}{\frac{s_{5}}{c_{5}}}\)</span>ã€‚</p>
<h3 id="ä¸–ç•Œåæ ‡ç³»ä»¥åŠæœ«ç«¯å¤¹å­åæ ‡ç³»çš„å˜æ¢">ä¸–ç•Œåæ ‡ç³»ä»¥åŠæœ«ç«¯å¤¹å­åæ ‡ç³»çš„å˜æ¢</h3>
<p>é€šè¿‡å‰é¢ä¸¤ä¸ªæ­¥éª¤ï¼Œå·²ç»å¯ä»¥é€šè¿‡ç»™å®šåæ ‡ç³» <span class="math inline">\(\{5\}\)</span> åœ¨æœºæ¢°è‡‚åŸºåæ ‡ç³» <span class="math inline">\(\{0\}\)</span> ä¸­çš„ä½å§¿æ¥è®¡ç®—å‡ºæœºæ¢°è‡‚å„ä¸ªå…³èŠ‚çš„è§’åº¦ã€‚</p>
<p>ä½†æ˜¯ï¼Œå†å›é¡¾æœºæ¢°è‡‚å„è¿æ†åæ ‡ç³»çš„å»ºç«‹è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œä¸ºäº†ç®€åŒ–é—®é¢˜ã€æ–¹ä¾¿è®¡ç®—ï¼Œæˆ‘ä»¬é€šå¸¸è®©æœºæ¢°è‡‚çš„åŸºåæ ‡ç³» <span class="math inline">\(\{0\}\)</span> å’Œåæ ‡ç³» <span class="math inline">\(\{1\}\)</span> é‡åˆï¼Œè€Œè®©æœºæ¢°è‡‚æœ«ç«¯åæ ‡ç³» <span class="math inline">\(\{5\}\)</span> çš„åŸç‚¹ä¸åæ ‡ç³» <span class="math inline">\(\{4\}\)</span> çš„åŸç‚¹é‡åˆã€‚è€Œå®é™…æƒ…å†µä¸‹ï¼Œæœºæ¢°è‡‚å¾€å¾€æ”¾ç½®åœ¨ä¸€ä¸ªå…·æœ‰ä¸€å®šé«˜åº¦çš„åº•åº§ä¸Šï¼Œä¸”æœ«ç«¯å¸¦æœ‰ä¸€ä¸ªå…·æœ‰ä¸€å®šé•¿åº¦çš„å·¥å…·æ¥å®Œæˆå¤¹æŒç­‰çš„åŠŸèƒ½ï¼Œå› æ­¤ï¼Œæœºæ¢°è‡‚åŸºåæ ‡ç³»ä¸ä¸–ç•Œåæ ‡ç³»ã€æœ«ç«¯æ‰§è¡Œå™¨åæ ‡ç³»ä¸æœºæ¢°è‡‚æœ«ç«¯åæ ‡ç³»ä¹‹å‰è¿˜å­˜åœ¨ç›¸åº”çš„å˜æ¢å…³ç³»ã€‚</p>
<p>æˆ‘ä»¬å°†æœºæ¢°è‡‚æ‰€åœ¨ç©ºé—´çš„ä¸–ç•Œåæ ‡ç³» <span class="math inline">\(\{W\}\)</span> æ”¾ç½®åœ¨æœºæ¢°è‡‚åº•åº§çš„åº•éƒ¨ï¼Œå°†æœ«ç«¯æ‰§è¡Œå™¨çš„åæ ‡ç³» <span class="math inline">\(\{T\}\)</span> æ”¾ç½®åœ¨æœºæ¢°è‡‚æœ«ç«¯å¤¹å­çš„æœ«ç«¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1vyK9BuaFA448DZWpkzJ_vTLzI8xr2G2_" alt="åæ ‡ç³» 2" width="50%"></p>
<p>åˆ™å¯ä»¥å¾—åˆ°è¿™ä¸¤ä¸ªåæ ‡ç³»çš„é½æ¬¡å˜æ¢çŸ©é˜µ</p>
<p><span class="math display">\[
_{0}^{W}T =
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0  \\
0 &amp; 1 &amp; 0 &amp; 0  \\
0 &amp; 0 &amp; 1 &amp; 72 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}
\ \ \ \ _{T}^{5}T =
\begin{bmatrix}
0 &amp; 0  &amp; 1 &amp; 0   \\
0 &amp; -1 &amp; 0 &amp; 0   \\
1 &amp; 0  &amp; 0 &amp; 120 \\
0 &amp; 0  &amp; 0 &amp; 1
\end{bmatrix}
\]</span></p>
<p>é€šå¸¸ï¼Œæœºæ¢°è‡‚é€šè¿‡å¤–éƒ¨ä¼ æ„Ÿå™¨å¯ä»¥è·å–ç›®æ ‡ç‰©ä½“åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½å§¿ <span class="math inline">\(_{G}^{W}T\)</span>ï¼Œåˆ™å¯ä»¥å¾—åˆ°å¦‚ä¸‹å…³ç³»</p>
<p><span class="math display">\[
_{G}^{W}T = {_{T}^{W}T} = {_{0}^{W}T} \cdot {_{5}^{0}T} \cdot {_{T}^{5}T}
\tag{12}
\]</span></p>
<p>é€šè¿‡åˆ†åˆ«å·¦ä¹˜ <span class="math inline">\(_{0}^{W}T^{-1}\)</span> å’Œå³ä¹˜ <span class="math inline">\(_{T}^{5}T^{-1}\)</span>ï¼Œå°±å¯ä»¥å¾—åˆ°æœºæ¢°è‡‚åæ ‡ç³» <span class="math inline">\(\{5\}\)</span> çš„åŸç‚¹åœ¨æœºæ¢°è‡‚åŸºåæ ‡ç³» <span class="math inline">\(\{0\}\)</span> ä¸­çš„ä½å§¿ <span class="math inline">\(_{5}^{0}T = {_{0}^{W}T^{-1}} \cdot {_{G}^{W}T} \cdot {_{T}^{5}T^{-1}}\)</span>ï¼Œå†ä»£å…¥å‰ä¸¤æ­¥å³å¯æ±‚è§£æœºæ¢°è‡‚çš„å„å…³èŠ‚çš„è§’åº¦ã€‚</p>
<hr />
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><p><a href="https://zh.coursera.org/learn/robotics1">æœºå™¨äººå­¦ä¸€ (Robotics 1)</a></p></li>
<li><p><a href="http://blog.sina.com.cn/s/blog_131fa47b20102whij.html">æœºå™¨äººå¯è’™ï¼ˆä¸ƒï¼‰â€”â€” PUMA560 è¿åŠ¨æ­£é€†è§£æ•™ä½ é‡æ–°åšäººï¼</a></p></li>
</ul>
]]></content>
      <categories>
        <category>æœºå™¨äºº</category>
      </categories>
      <tags>
        <tag>æœºå™¨äºº</tag>
        <tag>é€†è¿åŠ¨å­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>äº”è‡ªç”±åº¦æœºæ¢°è‡‚çš„å»ºæ¨¡ (4) â€”â€” å››å…ƒæ•°ä¸ç©ºé—´æ—‹è½¬</title>
    <url>/2019/04/22/%E4%BA%94%E8%87%AA%E7%94%B1%E5%BA%A6%E6%9C%BA%E6%A2%B0%E8%87%82%E7%9A%84%E5%BB%BA%E6%A8%A1-4-%E2%80%94%E2%80%94-%E5%9B%9B%E5%85%83%E6%95%B0%E4%B8%8E%E7%A9%BA%E9%97%B4%E6%97%8B%E8%BD%AC/</url>
    <content><![CDATA[<p>å››å…ƒæ•° (Quaternion) æ˜¯ç”±çˆ±å°”å…°æ•°å­¦å®¶å¨å»‰Â·å¢äº‘Â·å“ˆå¯†é¡¿åœ¨ 1843 å¹´æå‡ºçš„æ•°å­¦æ¦‚å¿µã€‚ä»æ˜ç¡®åœ°è§’åº¦è€Œè¨€ï¼Œå››å…ƒæ•°æ˜¯å¤æ•°çš„ä¸å¯äº¤æ¢å»¶ä¼¸ã€‚ç›¸å¯¹äºå¤æ•°ä¸ºäºŒç»´ç©ºé—´ï¼Œå¦‚æœæŠŠå››å…ƒæ•°çš„é›†åˆè€ƒè™‘æˆå¤šç»´å®æ•°ç©ºé—´ï¼Œå››å…ƒæ•°å°±ä»£è¡¨ç€ä¸€ä¸ªå››ç»´ç©ºé—´ã€‚å®ƒå¯ä»¥ç”¨äºæè¿°ç°å®ç©ºé—´çš„åæ ‡ã€‚å•ä½å››å…ƒæ•° (Unit Quaternion) å¯ä»¥ç”¨äºè¡¨ç¤ºä¸‰ç»´ç©ºé—´ä¸­çš„æ—‹è½¬ï¼Œå®ƒä¸å¸¸ç”¨çš„å¦å¤–ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼Œå³ä¸‰ç»´æ­£äº¤çŸ©é˜µå’Œæ¬§æ‹‰è§’æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯é¿å…äº†æ¬§æ‹‰è§’è¡¨ç¤ºæ³•ä¸­çš„ä¸‡å‘é”é—®é¢˜ã€‚</p>
<span id="more"></span>
<h2 id="å››å…ƒæ•°">å››å…ƒæ•°</h2>
<h3 id="å®šä¹‰">å®šä¹‰</h3>
<p>å¤æ•°æ˜¯ç”±å®æ•°åŠ ä¸Šè™šæ•°å•ä½ <span class="math inline">\(i\)</span> ç»„æˆï¼Œå…¶ä¸­ <span class="math inline">\(i^{2} = -1\)</span>ã€‚ç±»ä¼¼åœ°ï¼Œå››å…ƒæ•°æ˜¯ç”±å®æ•°åŠ ä¸Šä¸‰ä¸ªå…ƒç´  <span class="math inline">\(i\)</span>ã€<span class="math inline">\(j\)</span>ã€<span class="math inline">\(k\)</span> ç»„æˆï¼Œä¸”è¿™ä¸‰ä¸ªå…ƒç´ æ»¡è¶³</p>
<p><span class="math display">\[
i^{2} = j^{2} = k^{2} = ijk = -1
\]</span></p>
<p>æ¯ä¸ªå››å…ƒæ•°éƒ½æ˜¯ <span class="math inline">\(1\)</span>ã€<span class="math inline">\(i\)</span>ã€<span class="math inline">\(j\)</span>ã€<span class="math inline">\(k\)</span> çš„çº¿æ€§ç»„åˆï¼Œå³å››å…ƒæ•°ä¸€èˆ¬å¯ä»¥è¡¨ç¤ºä¸º</p>
<p><span class="math display">\[
h = a + bi + cj + dk
\]</span></p>
<p>ä¸ºäº†ä¾¿äºè¯´æ˜å’Œè®¡ç®—ï¼Œè¿™é‡Œä¹Ÿå°†å››å…ƒæ•° <span class="math inline">\(h\)</span> è¡¨ç¤ºä¸º <span class="math inline">\(h = (a, b, c, d)\)</span>ã€‚</p>
<h3 id="æ€§è´¨">æ€§è´¨</h3>
<ul>
<li><p><strong>ä¹˜æ³•ä¸å¯äº¤æ¢</strong></p>
<p><span class="math display">\[
\begin{aligned}
&amp; ij = k, ji = -k \\
&amp; jk = i, kj = -i \\
&amp; ki = j, ik = -j
\end{aligned}
\]</span></p></li>
<li><p><strong>å…±è½­</strong>ï¼šå››å…ƒæ•° <span class="math inline">\(h = a + bi + cj + dk\)</span> çš„å…±è½­å®šä¹‰ä¸º</p>
<p><span class="math display">\[
h^{*} = a - bi - cj - dk
\]</span></p>
<p>ä¸”ä¸€èˆ¬æƒ…å†µä¸‹</p>
<p><span class="math display">\[
(hk)^{*} = k^{*} h^{*} = h^{*} k^{*}
\]</span></p></li>
<li><p><strong>æ¨¡ï¼ˆç»å¯¹å€¼ï¼‰</strong></p>
<p><span class="math display">\[
|h| = \sqrt{h \cdot h} =\sqrt{h \cdot h^{*}} = \sqrt{a^{2} + b^{2} + c^{2} + d^{2}}
\]</span></p></li>
<li><p><strong>ä¹˜é€†</strong> <span class="math display">\[
h^{-1} = \frac{h^{*}}{|h|^{2}}
\]</span></p></li>
</ul>
<h3 id="å››å…ƒæ•°è¿ç®—">å››å…ƒæ•°è¿ç®—</h3>
<p>å®šä¹‰ä¸¤ä¸ªå››å…ƒæ•°</p>
<p><span class="math display">\[
\begin{aligned}
q &amp; = a + \vec{u} = a + bi + cj + dk \\
p &amp; = t + \vec{v} = t + xj + yj + zk
\end{aligned}
\]</span></p>
<ul>
<li><p><strong>åŠ æ³•</strong></p>
<p><span class="math display">\[
p + q = a + t + \vec{u} + \vec{v} = (a + t) + (b + x)j + (c + y)j + (d + z)k
\]</span></p>
<p>åŠ æ³•éµå¾ªå®æ•°å’Œå¤æ•°çš„æ‰€æœ‰äº¤æ¢å¾‹å’Œç»“åˆå¾‹ã€‚</p></li>
<li><p><strong>ä¹˜æ³•ï¼ˆæ ¼æ‹‰æ–¯æ›¼ç§¯ï¼‰</strong></p>
<p><span class="math display">\[
\begin{aligned}
pq &amp; = at - \vec{u} \cdot \vec{v} + a \vec{v} + t \vec{u} + \vec{u} \times \vec{v}             \\
&amp; = (at - bx - cy - dz) + (bt + ax + dy -cz)i + (ct + ay + bz - dx)j + (dt + za + cx - by)k
\end{aligned}
\]</span></p></li>
<li><p><strong>ç‚¹ç§¯ï¼ˆæ¬§å‡ é‡Œå¾—å†…ç§¯ï¼‰</strong>ï¼šå››å…ƒæ•°çš„ç‚¹ç§¯ç­‰åŒäºä¸€ä¸ªå››ç»´çŸ¢é‡çš„ç‚¹ç§¯ï¼Œæ˜¯ä¸€ä¸ªæ ‡é‡ <span class="math display">\[
p \cdot q = at + \vec{u} \cdot \vec{v} = at + bx + cy + dz
\]</span> å¯ä»¥ç”¨æ ¼æ‹‰æ–¯æ›¼ç§¯è¡¨ç¤ºä¸º <span class="math display">\[
p \cdot q = \frac{pq + qp}{2}
\]</span></p></li>
</ul>
<h2 id="å•ä½å››å…ƒæ•°ä¸ç©ºé—´æ—‹è½¬">å•ä½å››å…ƒæ•°ä¸ç©ºé—´æ—‹è½¬</h2>
<p>å•ä½å››å…ƒæ•° (Unit Quaternion) å¯ä»¥ç”¨äºè¡¨ç¤ºä¸‰ç»´ç©ºé—´ä¸­çš„æ—‹è½¬ï¼Œå®ƒä¸å¸¸ç”¨çš„å¦å¤–ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼Œå³ä¸‰ç»´æ­£äº¤çŸ©é˜µå’Œæ¬§æ‹‰è§’æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯é¿å…äº†æ¬§æ‹‰è§’è¡¨ç¤ºæ³•ä¸­çš„ä¸‡å‘é”é—®é¢˜ã€‚ç”¨å››å…ƒæ•°æ¥è¡¨ç¤ºæ—‹è½¬è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼šä¸€æ˜¯å¦‚ä½•ç”¨å››å…ƒæ•°è¡¨ç¤ºä¸‰ç»´ç©ºé—´é‡Œçš„ç‚¹ï¼›äºŒæ˜¯å¦‚ä½•ç”¨å››å…ƒæ•°è¡¨ç¤ºä¸‰ç»´ç©ºé—´çš„æ—‹è½¬ã€‚</p>
<h3 id="ç‚¹çš„è¡¨ç¤º">ç‚¹çš„è¡¨ç¤º</h3>
<p>å¯¹äºä¸‰ç»´ç©ºé—´ä¸­çš„ä¸€ç‚¹ <span class="math inline">\(p\)</span> çš„ç¬›å¡å°”åæ ‡ä¸º <span class="math inline">\((x, y, z)\)</span>ï¼Œå…¶å¯ç”¨çº¯å››å…ƒæ•°ï¼ˆå³å®éƒ¨ä¸º <span class="math inline">\(0\)</span> çš„å››å…ƒæ•°ï¼‰è¡¨ç¤ºä¸º</p>
<p><span class="math display">\[
p = xj + yj + zk
\]</span></p>
<h3 id="æ—‹è½¬çš„è¡¨ç¤º">æ—‹è½¬çš„è¡¨ç¤º</h3>
<p>è®¾ <span class="math inline">\(q\)</span> ä¸ºä¸€ä¸ªå•ä½å››å…ƒæ•°ï¼Œ<span class="math inline">\(p\)</span> æ˜¯ä¸€ä¸ªçº¯å››å…ƒæ•°ï¼ˆå³ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼‰ï¼Œå®šä¹‰çº¯å››å…ƒæ•°</p>
<p><span class="math display">\[
R_{q}(p) = q p q^{-1}
\]</span></p>
<p>è¡¨ç¤ºç©ºé—´ä¸­çš„ç‚¹ <span class="math inline">\(p\)</span> ç»è¿‡æ—‹è½¬ <span class="math inline">\(q\)</span> åå¾—åˆ°çš„ç©ºé—´ä¸­çš„å¦ä¸€ä¸ªç‚¹ã€‚</p>
<h3 id="æ—‹è½¬çš„å¤åˆ">æ—‹è½¬çš„å¤åˆ</h3>
<p>æ ¹æ®å››å…ƒæ•°è¡¨ç¤ºç©ºé—´æ—‹è½¬çš„å®šä¹‰ï¼Œæœ‰</p>
<p><span class="math display">\[
R_{q_{1} q_{2}} (p) = (q_{1} q_{2}) p (q_{1} q_{2})^{-1} = q_{1} q_{2} p q_{2}^{-1} q_{1}^{-1} = R_{q_{1}} \left[ R_{q_{2}} (p) \right]
\]</span></p>
<p>å› æ­¤ï¼Œå¯¹äºä¸¤ä¸ªæ—‹è½¬çš„å¤åˆï¼Œåªéœ€è¦å°†å¯¹åº”çš„å•ä½å››å…ƒæ•°ç›¸ä¹˜ã€‚</p>
<h2 id="æ—‹è½¬çŸ©é˜µä¸å•ä½å››å…ƒæ•°">æ—‹è½¬çŸ©é˜µä¸å•ä½å››å…ƒæ•°</h2>
<h3 id="æ—‹è½¬çŸ©é˜µæ¬§æ‹‰è§’å’Œ-rpy-è§’">æ—‹è½¬çŸ©é˜µã€æ¬§æ‹‰è§’å’Œ RPY è§’</h3>
<h4 id="æ—‹è½¬çŸ©é˜µ">æ—‹è½¬çŸ©é˜µ</h4>
<p>ç©ºé—´ä¸­ä¸€ç‚¹ç»• <span class="math inline">\(x\)</span>ã€<span class="math inline">\(y\)</span>ã€<span class="math inline">\(z\)</span> è½´æ—‹è½¬çš„æ—‹è½¬çŸ©é˜µåˆ†åˆ«ä¸º</p>
<p><span class="math display">\[
\begin{aligned}
&amp; R_{x}(\theta_{1}) =
\begin{bmatrix}
1 &amp; 0                &amp; 0                 \\
0 &amp; \cos{\theta_{1}} &amp; -\sin{\theta_{1}} \\
0 &amp; \sin{\theta_{1}} &amp; \cos{\theta_{1}}
\end{bmatrix}   \\
&amp; R_{y}(\theta_{2}) =
\begin{bmatrix}
\cos{\theta_{2}}  &amp; 0 &amp; \sin{\theta_{2}} \\
0                 &amp; 1 &amp; 0                \\
-\sin{\theta_{2}} &amp; 0 &amp; \cos{\theta_{2}}
\end{bmatrix}   \\
&amp; R_{z}(\theta_{3}) =
\begin{bmatrix}
\cos{\theta_{3}} &amp; -\sin{\theta_{3}} &amp; 0 \\
\sin{\theta_{3}} &amp; \cos{\theta_{3}}  &amp; 0 \\
0                &amp; 0                 &amp; 1
\end{bmatrix}
\end{aligned}
\]</span></p>
<p>å…¶ä¸­ï¼Œæœ‰ä¸‰ä¸ªç‹¬ç«‹å˜é‡ <span class="math inline">\(\theta_{1}\)</span>ã€<span class="math inline">\(\theta_{2}\)</span> å’Œ <span class="math inline">\(\theta_{3}\)</span>ï¼Œé€šå¸¸æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼Œå³æ¬§æ‹‰è§’å’Œ RPY è§’ã€‚</p>
<h4 id="æ¬§æ‹‰è§’">æ¬§æ‹‰è§’</h4>
<p>ä¸‹å›¾æ‰€ç¤ºä¸ºå¸¸ç”¨çš„ ZXZ é¡ºè§„æ¬§æ‹‰è§’çš„å®šä¹‰</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/a/a1/Eulerangles.svg" alt="ZXZ é¡ºè§„æ¬§æ‹‰è§’" width="35%" style="background-color:white;padding:20px;"></p>
<p>è®¾ <span class="math inline">\(xyz\)</span> è½´ä¸ºå‚è€ƒåæ ‡ç³»çš„åæ ‡è½´ï¼Œ<span class="math inline">\(xy\)</span> å¹³é¢ä¸ <span class="math inline">\(XY\)</span> å¹³é¢çš„äº¤çº¿ <span class="math inline">\(N\)</span> ç§°ä¸ºäº¤ç‚¹çº¿ã€‚åˆ™ ZXZ é¡ºè§„çš„æ¬§æ‹‰è§’å¯ä»¥é™æ€åœ°å®šä¹‰ä¸ºï¼š</p>
<ul>
<li><span class="math inline">\(\alpha\)</span>ï¼š<span class="math inline">\(x\)</span> è½´ä¸ <span class="math inline">\(N\)</span> çš„å¤¹è§’</li>
<li><span class="math inline">\(\beta\)</span>ï¼š<span class="math inline">\(z\)</span> è½´ä¸ <span class="math inline">\(Z\)</span> è½´çš„å¤¹è§’</li>
<li><span class="math inline">\(\gamma\)</span>ï¼š<span class="math inline">\(N\)</span> ä¸ <span class="math inline">\(X\)</span> è½´çš„å¤¹è§’</li>
</ul>
<p>å…¶æ—‹è½¬çŸ©é˜µä¸º</p>
<p><span class="math display">\[
\begin{aligned}
R &amp; = R_{z}(\alpha) R_{x}(\beta) R_{z}(\gamma) \\
&amp; =
\begin{bmatrix}
\cos{\alpha} &amp; -\sin{\alpha} &amp; 0 \\
\sin{\alpha} &amp; \cos{\alpha}  &amp; 0 \\
0            &amp; 0             &amp; 1
\end{bmatrix}
\begin{bmatrix}
1 &amp; 0           &amp; 0            \\
0 &amp; \cos{\beta} &amp; -\sin{\beta} \\
0 &amp; \sin{\beta} &amp; \cos{\beta}
\end{bmatrix}
\begin{bmatrix}
\cos{\gamma} &amp; -\sin{\gamma} &amp; 0 \\
\sin{\gamma} &amp; \cos{\gamma}  &amp; 0 \\
0            &amp; 0             &amp; 1
\end{bmatrix}
\end{aligned}
\]</span></p>
<p>ZXZ é¡ºè§„æ¬§æ‹‰è§’çš„åŠ¨æ€æ¼”ç¤ºå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/8/85/Euler2a.gif" alt="ZXZ é¡ºè§„æ¬§æ‹‰è§’åŠ¨æ€" width="40%"></p>
<h4 id="rpy-è§’">RPY è§’</h4>
<p>RPY è§’å³ç»• <span class="math inline">\(X\)</span> è½´æ‘‡æ‘† (Roll) <span class="math inline">\(\gamma\)</span>ã€ç»• <span class="math inline">\(Y\)</span> è½´ä¿¯ä»° (Pitch) <span class="math inline">\(\beta\)</span>ã€ç»• <span class="math inline">\(Z\)</span> è½´åè½¬ (Yaw) <span class="math inline">\(\alpha\)</span>ï¼Œè¿™ä¸‰ä¸ªå˜é‡äº’ç›¸ç‹¬ç«‹ã€‚RPY è§’è¡¨ç¤ºæ³•ä¸ ZYX é¡ºè§„çš„æ¬§æ‹‰è§’è¡¨ç¤ºæ–¹å¼ç­‰ä»·ï¼Œå…¶æ—‹è½¬çŸ©é˜µä¸º</p>
<p><span class="math display">\[
\begin{aligned}
R &amp; = R_{z}(\alpha) R_{y}(\beta) R_{x}(\gamma) \\
&amp; =
\begin{bmatrix}
\cos{\alpha} &amp; -\sin{\alpha} &amp; 0 \\
\sin{\alpha} &amp; \cos{\alpha}  &amp; 0 \\
0            &amp; 0             &amp; 1
\end{bmatrix}
\begin{bmatrix}
\cos{\beta}  &amp; 0 &amp; \sin{\beta} \\
0            &amp; 1 &amp; 0           \\
-\sin{\beta} &amp; 0 &amp; \cos{\beta}
\end{bmatrix}
\begin{bmatrix}
1 &amp; 0            &amp; 0             \\
0 &amp; \cos{\gamma} &amp; -\sin{\gamma} \\
0 &amp; \sin{\gamma} &amp; \cos{\gamma}
\end{bmatrix}
\end{aligned}
\]</span></p>
<h3 id="æ—‹è½¬çŸ©é˜µè½¬æ¢ä¸ºå››å…ƒæ•°">æ—‹è½¬çŸ©é˜µè½¬æ¢ä¸ºå››å…ƒæ•°</h3>
<p>å·²çŸ¥æ—‹è½¬çŸ©é˜µ</p>
<p><span class="math display">\[
R =
\begin{bmatrix}
r_{11} &amp; r_{12} &amp; r_{13} \\
r_{21} &amp; r_{12} &amp; r_{13} \\
r_{31} &amp; r_{12} &amp; r_{13}
\end{bmatrix}
\]</span></p>
<p>å…¶å¯¹åº”çš„å››å…ƒæ•° <span class="math inline">\(q = w + xi + yj + zk\)</span> æˆ– <span class="math inline">\(q = (w, x, y, z)\)</span>ï¼Œå…¶ä¸­</p>
<p><span class="math display">\[
\begin{aligned}
w &amp; = \frac{1}{2} \sqrt{1 + r_{11} + r_{22} + r_{33}} \\
x &amp; = \frac{r_{32} - r_{23}}{4 w}                     \\
y &amp; = \frac{r_{13} - r_{31}}{4 w}                     \\
z &amp; = \frac{r_{21} - r_{12}}{4 w}
\end{aligned}
\]</span></p>
<p>æ•…å¯å¾—ç©ºé—´ä¸­ä¸€ç‚¹ç»• <span class="math inline">\(x\)</span>ã€<span class="math inline">\(y\)</span>ã€<span class="math inline">\(z\)</span> è½´æ—‹è½¬çš„å››å…ƒæ•°è¡¨ç¤ºä¸º</p>
<p><span class="math display">\[
\begin{aligned}
q_x(\theta_{1}) &amp; = (\cos{\frac{\theta_{1}}{2}}, \sin{\frac{\theta_{1}}{2}}, 0, 0) \\
q_y(\theta_{2}) &amp; = (\cos{\frac{\theta_{2}}{2}}, 0, \sin{\frac{\theta_{2}}{2}}, 0) \\
q_z(\theta_{3}) &amp; = (\cos{\frac{\theta_{3}}{2}}, 0, 0, \sin{\frac{\theta_{3}}{2}})
\end{aligned}
\]</span></p>
<h3 id="å››å…ƒæ•°è½¬æ¢ä¸ºæ—‹è½¬çŸ©é˜µ">å››å…ƒæ•°è½¬æ¢ä¸ºæ—‹è½¬çŸ©é˜µ</h3>
<p>å¯¹äºå››å…ƒæ•° <span class="math inline">\(q = (w, x, y, z)\)</span>ï¼Œå¯ä»¥å¾—åˆ°å¯¹åº”çš„æ—‹è½¬çŸ©é˜µ</p>
<p><span class="math display">\[
R =
\begin{bmatrix}
r_{11} &amp; r_{12} &amp; r_{13} \\
r_{21} &amp; r_{12} &amp; r_{13} \\
r_{31} &amp; r_{12} &amp; r_{13}
\end{bmatrix}
\]</span></p>
<p>å…¶ä¸­ï¼Œ</p>
<p><span class="math display">\[
\begin{aligned}
r_{11} &amp; = w^{2} + x^{2} - y^{2} -z^{2}  \\
r_{12} &amp; = 2xy - 2wz             \\
r_{13} &amp; = 2xz + 2wy             \\
r_{21} &amp; = 2xy + 2wz             \\
r_{22} &amp; = w^{2} - x^{2} + y^{2} - z^{2} \\
r_{23} &amp; = 2yz - 2wx             \\
r_{31} &amp; = 2xz - 2wy             \\
r_{32} &amp; = 2yz + 2wx             \\
r_{33} &amp; = w^{2} - x^{2} - y^{2} + z^{2}
\end{aligned}
\]</span></p>
<h3 id="rpy-è§’è½¬æ¢ä¸ºå››å…ƒæ•°">RPY è§’è½¬æ¢ä¸ºå››å…ƒæ•°</h3>
<p>è‹¥æ—‹è½¬ç”± RPY è§’ï¼ˆæˆ– ZYX é¡ºè§„çš„æ¬§æ‹‰è§’ï¼‰è¡¨ç¤ºï¼Œå³ç»•å‚è€ƒåæ ‡ç³»çš„ <span class="math inline">\(Z\)</span>ã€<span class="math inline">\(Y\)</span> å’Œ <span class="math inline">\(X\)</span> è½´ä¾æ¬¡æ—‹è½¬ <span class="math inline">\(\gamma\)</span>ã€<span class="math inline">\(\beta\)</span> å’Œ <span class="math inline">\(\alpha\)</span> è§’ï¼Œåˆ™æ­¤æ—‹è½¬çš„å››å…ƒæ•°è¡¨ç¤ºä¸º <span class="math inline">\(q = (w, x, y, z)\)</span>ï¼Œå…¶ä¸­</p>
<p><span class="math display">\[
\begin{aligned}
w &amp; = \cos{\frac{\alpha}{2}} \cos{\frac{\beta}{2}} \cos{\frac{\gamma}{2}} + \sin{\frac{\alpha}{2}} \sin{\frac{\beta}{2}} \sin{\frac{\gamma}{2}} \\
x &amp; = \sin{\frac{\alpha}{2}} \cos{\frac{\beta}{2}} \cos{\frac{\gamma}{2}} - \cos{\frac{\alpha}{2}} \sin{\frac{\beta}{2}} \sin{\frac{\gamma}{2}} \\
y &amp; = \cos{\frac{\alpha}{2}} \sin{\frac{\beta}{2}} \cos{\frac{\gamma}{2}} + \sin{\frac{\alpha}{2}} \cos{\frac{\beta}{2}} \sin{\frac{\gamma}{2}} \\
z &amp; = \cos{\frac{\alpha}{2}} \cos{\frac{\beta}{2}} \sin{\frac{\gamma}{2}} + \sin{\frac{\alpha}{2}} \sin{\frac{\beta}{2}} \cos{\frac{\gamma}{2}} \\
\end{aligned}
\]</span></p>
<h3 id="å››å…ƒæ•°è½¬æ¢ä¸º-rpy-è§’">å››å…ƒæ•°è½¬æ¢ä¸º RPY è§’</h3>
<p>å¯¹äºå››å…ƒæ•° <span class="math inline">\(q = (w, x, y, z)\)</span>ï¼Œå¯ä»¥å¾—åˆ°å¯¹åº”çš„ RPY è§’</p>
<p><span class="math display">\[
\begin{aligned}
\theta_{R} &amp; = \arctan{\left[ \frac{2(yz+wx)}{w^{2} - x^{2} - y^{2} + z^{2}} \right]}   \\
\theta_{P} &amp; = \arcsin{[-2(xz - wy)]}                                           \\
\theta_{Y} &amp; = \arctan{\left[ \frac{2(xy + wz)}{w^{2} + x^{2} - y^{2} - z^{2}} \right]}
\end{aligned}
\]</span></p>
<hr />
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://www.cnblogs.com/21207-iHome/p/6894128.html">å››å…ƒæ•°ä¸æ¬§æ‹‰è§’ï¼ˆRPY è§’ï¼‰çš„ç›¸äº’è½¬æ¢</a></li>
</ul>
]]></content>
      <categories>
        <category>æœºå™¨äºº</category>
      </categories>
      <tags>
        <tag>æœºå™¨äºº</tag>
        <tag>å››å…ƒæ•°</tag>
      </tags>
  </entry>
  <entry>
    <title>å°† Windows ä¸Šçš„æ‰“å°æœºå…±äº«ä¸º AirPrint</title>
    <url>/2018/12/02/%E5%B0%86-Windows-%E4%B8%8A%E7%9A%84%E6%89%93%E5%8D%B0%E6%9C%BA%E5%85%B1%E4%BA%AB%E4%B8%BA-AirPrint/</url>
    <content><![CDATA[<p>å®éªŒå®¤çš„æ‰“å°æœºè¿åœ¨ç¾¤æ™–çš„ NAS ä¸Šï¼Œè¦ä½¿ç”¨æ‰“å°æœºé¦–å…ˆéœ€è¦å®‰è£…ç¾¤æ™–åŠ©æ‰‹ã€‚ç„¶è€Œ macOS ç‰ˆçš„ç¾¤æ™–åŠ©æ‰‹è²Œä¼¼å¹¶ä¸æ”¯æŒæ‰“å°â€¦â€¦ç»è¿‡ä¸€æ®µæ—¶é—´æ‰“å°éœ€è¦å…ˆæŠŠæ–‡ä»¶æ‹·è´åˆ° Windows ä¸Šçš„æŠ˜ç£¨ä¹‹åï¼Œå¿½ç„¶æƒ³åˆ°å¦‚æœèƒ½æŠŠ Windows ä¸Šçš„æ‰“å°æœºå…±äº«æˆ AirPrintï¼Œå°±ä¸éœ€è¦é¢å¤–å®‰è£…é©±åŠ¨äº†ï¼Œè€Œä¸” iPhone å’Œ iPad ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<span id="more"></span>
<h2 id="ç³»ç»Ÿç¯å¢ƒ">ç³»ç»Ÿç¯å¢ƒ</h2>
<p>æœ¬æ–‡æè¿°çš„æ–¹æ³•åœ¨ä»¥ä¸‹ç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿä¸Šæµ‹è¯•é€šè¿‡ï¼Œå…¶ä»–ç‰ˆæœ¬ä¸ä¿è¯ä¸€å®šå¯è¡Œï¼š</p>
<ul>
<li><p>Windows 10 å®¶åº­ç‰ˆ 1803</p></li>
<li><p>macOS Mojave 10.14.1</p></li>
<li><p>iOS 12.1</p></li>
</ul>
<h2 id="é…ç½®-windows">é…ç½® Windows</h2>
<ol type="1">
<li><p>å¼€å¯æ‰“å°æœºçš„å…±äº«</p>
<ul>
<li><p>æ‰“å¼€<code>æ§åˆ¶é¢æ¿ - ç¡¬ä»¶å’Œå£°éŸ³ - è®¾å¤‡å’Œæ‰“å°æœº</code></p></li>
<li><p>å³é”®éœ€è¦å…±äº«çš„æ‰“å°æœºï¼Œæ‰“å¼€<code>æ‰“å°æœºå±æ€§</code>ï¼Œé€‰æ‹©å…±äº«é¡µé¢ï¼Œå‹¾é€‰<code>å…±äº«è¿™å°æ‰“å°æœº</code></p></li>
</ul></li>
<li><p>å®‰è£… <a href="https://support.apple.com/kb/DL999?viewlocale=zh_CN&amp;locale=zh_CN">Bonjour Print Services (Windows)</a></p></li>
<li><p>å®‰è£… <a href="https://drive.google.com/open?id=1_aB1lyZgJ9ERC-kXmEjsnYeuWL0Tylvo">AirPrint Installer</a></p>
<ul>
<li><p>ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ <code>AirPrint Installer.exe</code></p></li>
<li><p>ç‚¹å‡» <code>Install AirPrint Service</code></p></li>
<li><p>è®¾ç½® <code>Service Startup</code> ä¸º <code>Auto</code>ï¼Œç‚¹å‡» <code>Start</code> å³å¯</p>
<p><img src="https://drive.google.com/uc?export=view&id=1OIO9lxMVYtlMJugafFGn7zaMXjrIZbsh" alt="AirPrint Installer" width="50%"></p>
<p><em>è¿™é‡Œçš„ <code>AirPrint Auth</code> å¯ä»¥è®¾ç½®è®¤è¯æ–¹å¼ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨ Windows çš„è´¦æˆ·å’Œå¯†ç è®¤è¯ã€‚æˆ‘å°è¯•è¿‡ä¿®æ”¹ä¸ºå…¶ä»–çš„æ–¹å¼ã€å…è®¸ç©ºç™½å¯†ç æˆ–è€…è¿è¡Œè®¿å®¢è´¦æˆ·ï¼Œä¼¼ä¹å¹¶æ²¡æœ‰æ•ˆæœï¼Œæ‰€ä»¥å°±ç”¨é»˜è®¤è®¾ç½®å¥½äº†ã€‚</em></p></li>
</ul></li>
<li><p>é…ç½®é˜²ç«å¢™</p>
<blockquote>
<p>Bonjour è”ç½‘åè®®é€šè¿‡ UDP ç«¯å£ 5353 æ”¶å‘ç½‘ç»œæ•°æ®åŒ…ã€‚Bonjour å®‰è£…å™¨ä¼šåœ¨å—æ”¯æŒçš„ç³»ç»Ÿä¸Šå®‰è£…æ—¶ç›¸åº”é…ç½® Windows é˜²ç«å¢™ï¼Œä½†æ˜¯å¦‚æœæ‚¨å¯ç”¨äº†å•ç‹¬çš„ â€œä¸ªäººé˜²ç«å¢™â€ï¼Œåˆ™éœ€è¦ç¡®ä¿ UDP ç«¯å£ 5353 å·²æ‰“å¼€ï¼Œä»¥ä¾¿ Bonjour èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
</blockquote>
<p>æ­£å¸¸æƒ…å†µä¸‹ä¸éœ€è¦è¿™ä¸ªæ­¥éª¤ï¼Œå¦‚æœå…¨éƒ¨é…ç½®å¥½ä»¥åä»ç„¶æœç´¢ä¸åˆ° AirPrint æ‰“å°æœºï¼Œå¯ä»¥å°è¯•æ£€æŸ¥ä¸€ä¸‹ Windows çš„é˜²ç«å¢™è®¾ç½®ã€‚</p></li>
</ol>
<h2 id="é…ç½®-macos-ios">é…ç½® macOS &amp; iOS</h2>
<p>macOS çš„é…ç½®æ¯”è¾ƒç®€å•ã€‚æ‰“å¼€ <code>System Preferences - Printers &amp; Scanners</code>ï¼Œç‚¹å‡»å·¦ä¾§æ‰“å°æœºåˆ—è¡¨å·¦ä¸‹è§’çš„ <code>+</code>ï¼Œä¼šè‡ªåŠ¨æœç´¢å±€åŸŸç½‘å†…çš„æ‰“å°æœºã€‚æ­¤æ—¶åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç±»å‹ä¸º <code>Bonjour</code>ï¼Œåä¸º <code>&lt;æ‰“å°æœºå&gt; @ &lt;Windows ç”µè„‘å&gt;</code> çš„æ‰“å°æœºã€‚é€‰æ‹©è¿™ä¸ªæ‰“å°æœºï¼Œä¼šè‡ªåŠ¨è¯†åˆ«åè®®ä¸º <code>AirPrint</code>ï¼Œç‚¹å‡» <code>Add</code> æ·»åŠ ï¼Œä¹‹åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p>
<p>iOS åŸºæœ¬ä¸éœ€è¦è®¾ç½®ï¼Œåœ¨æ‰“å°é¡µé¢ç‚¹å‡» <code>Select Printer</code>ï¼Œä¼šè‡ªåŠ¨æœç´¢å¹¶é…ç½®æ‰“å°æœºï¼Œè¾“å…¥è´¦å·å’Œå¯†ç éªŒè¯å°±å¯ä»¥æ‰“å°äº†ã€‚</p>
]]></content>
      <categories>
        <category>Mac çš„ä½¿ç”¨æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>macOS</tag>
        <tag>AirPrint</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼ºåˆ¶ macOS å¼€å¯ 2K æ˜¾ç¤ºå™¨çš„ HiDPI</title>
    <url>/2019/03/02/%E5%BC%BA%E5%88%B6-macOS-%E5%BC%80%E5%90%AF-2K-%E6%98%BE%E7%A4%BA%E5%99%A8%E7%9A%84-HiDPI/</url>
    <content><![CDATA[<p>æ¯æ¬¡å¹²èµ·æ´»å„¿æ¥éƒ½æ„Ÿè§‰ 15 è‹±å¯¸å±å¹•çš„ MacBook Pro è¿˜æ˜¯å¤ªå°ï¼Œæ‰€ä»¥å‰æ®µæ—¶é—´ä¹°äº†å° 26.9 è‹±å¯¸ QHD (2560 Ã— 1440) çš„ä¸‰æ˜Ÿã€‚é€‰è¿™å°æ˜¾ç¤ºå™¨æ˜¯å› ä¸ºå®ƒæœ‰ Type-C å£ï¼Œä¸€æ ¹çº¿å°±å¯ä»¥è§£å†³è§†é¢‘ã€éŸ³é¢‘ã€å……ç”µä»¥åŠæ•°æ®ä¼ è¾“ï¼Œéå¸¸æ–¹ä¾¿ï¼Œå®é™…ç”¨èµ·æ¥ä¹Ÿæ˜¯ç›¸å½“ä¸é”™ã€‚ä½†æ˜¯çœ‹ä¹ æƒ¯äº† MacBook Pro çš„ Retina å±ï¼Œæ€»è§‰å¾— macOS åœ¨ 2K åˆ†è¾¨ç‡ä¸‹ç‚¹å¯¹ç‚¹æ˜¾ç¤ºæ—¶é¢—ç²’æ„Ÿä¸¥é‡ï¼Œè¾¹ç¼˜é”¯é½¿æ˜æ˜¾è€Œä¸”å­—ä¹Ÿå¾ˆç³Šã€‚æ‰€ä»¥æŠ˜è…¾äº†ä¸€ä¸‹ï¼Œå¼ºåˆ¶ macOS å¼€å¯ 1080P çš„ HiDPIï¼Œè™½ç„¶æ˜¾ç¤ºçš„å†…å®¹å°‘äº†ä¸€ç‚¹ï¼Œä½†æ˜¯æ„Ÿè§‚èˆ’æœäº†å¾ˆå¤šã€‚</p>
<span id="more"></span>
<h2 id="æ˜¾ç¤ºå™¨å‚æ•°">æ˜¾ç¤ºå™¨å‚æ•°</h2>
<ul>
<li>å‹å·ï¼šSAMSUNG S27H850QFC</li>
<li>é¢æ¿ç±»å‹ï¼šIPS</li>
<li>é¢æ¿å°ºå¯¸ï¼š26.9 è‹±å¯¸</li>
<li>å±å¹•æ¯”ä¾‹ï¼š16:9</li>
<li>æœ€ä½³åˆ†è¾¨ç‡ï¼š2560 Ã— 1440</li>
</ul>
<h2 id="å¼€å¯-hidpi-çš„æ­¥éª¤">å¼€å¯ HiDPI çš„æ­¥éª¤</h2>
<h3 id="å¯ç”¨-hidpi-æ¨¡å¼">å¯ç”¨ HiDPI æ¨¡å¼</h3>
<p>ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo defaults write /Library/Preferences/com.apple.windowserver.plist DisplayResolutionEnabled -bool true</span><br></pre></td></tr></table></figure>
<h3 id="è·å–æ˜¾ç¤ºå™¨çš„-displayvendorid-å’Œ-displayproductid">è·å–æ˜¾ç¤ºå™¨çš„ DisplayVendorId å’Œ DisplayProductID</h3>
<p>ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ioreg -lw0 | grep IODisplayPrefsKey</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œæˆ‘çš„ Mac è¾“å‡º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;IODisplayPrefsKey&quot; = &quot;IOService:/AppleACPIPlatformExpert/PCI0@0/AppleACPIPCI/IGPU@2/AppleIntelFramebuffer@0/display0/AppleBacklightDisplay-610-a019&quot;</span><br><span class="line">&quot;IODisplayPrefsKey&quot; = &quot;IOService:/AppleACPIPlatformExpert/PCI0@0/AppleACPIPCI/IGPU@2/AppleIntelFramebuffer@2/display0/AppleDisplay-4c2d-e0f&quot;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œç¬¬äºŒè¡Œå³ä¸ºå¤–æ¥æ˜¾ç¤ºå™¨çš„ä¿¡æ¯ï¼Œ<code>4c2d</code> ä¸ºæ˜¾ç¤ºå™¨çš„ <code>DisplayVendorId</code>ï¼Œ<code>e0f</code> ä¸ºæ˜¾ç¤ºå™¨çš„ <code>DisplayProductID</code>ã€‚</p>
<h3 id="ç¼–å†™é…ç½®æ–‡ä»¶">ç¼–å†™é…ç½®æ–‡ä»¶</h3>
<p>å¯ä»¥ä½¿ç”¨<a href="https://comsysto.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/">è¿™ä¸ªå·¥å…·</a>ç¼–å†™æ˜¾ç¤ºå™¨çš„é…ç½®æ–‡ä»¶ã€‚2K æ˜¾ç¤ºå™¨å¼€å¯ HiDPI ä¸€èˆ¬ä½¿ç”¨ 1080P å°±å¯ä»¥äº†ï¼Œ720P æ˜¾ç¤ºä¼šéå¸¸å¤§ï¼Œå¯æ˜¾ç¤ºå†…å®¹ä¹Ÿå¾ˆå°‘ã€‚</p>
<p>æˆ‘çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>DisplayProductName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">string</span>&gt;</span>SAMSUNG S27H850QFC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>DisplayProductID<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">integer</span>&gt;</span>3599<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>DisplayVendorID<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">integer</span>&gt;</span>19501<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>scale-resolutions<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAPAAAACHAA<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAMgAAABwgA<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAKAAAABaAA<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>target-default-ppmm<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">real</span>&gt;</span>10.0699301<span class="tag">&lt;/<span class="name">real</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>edid-patches<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>offset<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">integer</span>&gt;</span>72<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>data<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAAEAAAAAAAAAAAAAAAAAAA<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¿å­˜æ–‡ä»¶ï¼Œå‘½åä¸º <code>DisplayProductID-&lt;DisplayProductID&gt;</code>ï¼Œå³ <code>DisplayProductID-e0f</code>ã€‚</p>
<h3 id="ä¸´æ—¶å…³é—­-sip">ä¸´æ—¶å…³é—­ SIP</h3>
<p>ç”±äºéœ€è¦æŠŠä¸Šé¢ç¼–å†™å¥½çš„æ˜¾ç¤ºå™¨é…ç½®æ–‡ä»¶æ”¾åˆ°ç³»ç»Ÿç›®å½•ä¸‹ï¼Œéœ€è¦å…ˆä¸´æ—¶å…³é—­ä¸€ä¸‹ SIP (System Integrity Protection)ã€‚</p>
<ul>
<li><p>é‡å¯ï¼ŒæŒ‰ä½ <code>âŒ˜ + R</code> è¿›å…¥æ¢å¤æ¨¡å¼</p></li>
<li><p>åœ¨<code>å®ç”¨å·¥å…·</code>ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">csrutil disable</span><br></pre></td></tr></table></figure></li>
<li><p>é‡å¯å³å¯å…³é—­ SIP</p></li>
</ul>
<h3 id="å°†é…ç½®æ–‡ä»¶æ‹·è´åˆ°ç³»ç»Ÿæ–‡ä»¶å¤¹">å°†é…ç½®æ–‡ä»¶æ‹·è´åˆ°ç³»ç»Ÿæ–‡ä»¶å¤¹</h3>
<ul>
<li><p>æ‰“å¼€ç›®å½• <code>/System/Library/Displays/Contents/Resources/Overrides/DisplayVendorID-&lt;DisplayVendorId&gt;</code>ï¼Œ å³ <code>/System/Library/Displays/Contents/Resources/Overrides/DisplayVendorID-4c2d</code></p></li>
<li><p>å°†ä¹‹å‰ç¼–è¾‘å¥½çš„é…ç½®æ–‡ä»¶ <code>DisplayProductID-e0f</code> å¤åˆ¶åˆ°è¯¥è·¯å¾„ä¸­</p></li>
<li><p>é‡å¯ Mac</p></li>
<li><p>æ‰“å¼€ Displays Preferencesï¼Œèƒ½çœ‹åˆ°å¦‚ä¸‹é…ç½®å³è¯´æ˜ HiDPI å¼€å¯æˆåŠŸ</p>
<p><img src="https://drive.google.com/uc?export=view&id=1Fc3ipNDBvgUj4ScT3bfo4apexM5SozKN" alt="Displays Preferences" width="50%"></p></li>
</ul>
<h3 id="å¼€å¯-sip">å¼€å¯ SIP</h3>
<p>é…ç½®ä¿®æ”¹æˆåŠŸä»¥åï¼Œä¸ºäº†ç³»ç»Ÿå®‰å…¨ï¼Œæœ€å¥½è¿˜æ˜¯å¼€å¯ SIPã€‚è¿›å…¥æ¢å¤æ¨¡å¼ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">csrutil enable</span><br></pre></td></tr></table></figure>
<p>é‡å¯å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>Mac çš„ä½¿ç”¨æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>macOS</tag>
        <tag>HiDPI</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¬ç –ç¬”è®° (1) â€”â€” ECS æ¶æ„</title>
    <url>/2021/06/12/%E6%90%AC%E7%A0%96%E7%AC%94%E8%AE%B0-1-%E2%80%94%E2%80%94-ECS-%E6%9E%B6%E6%9E%84/</url>
    <content><![CDATA[<p>æ‰“å·¥äººæ¬ç –å…¥é—¨ç¬¬ä¸€è¯¾ â€”â€” ECS æ¶æ„ã€‚</p>
<span id="more"></span>
<p>ECS (<a href="https://en.wikipedia.org/wiki/Entity_component_system">Entity-Component-System</a>) å³å®ä½“-ç»„ä»¶-ç³»ç»Ÿï¼Œæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼ï¼Œéµå¾ªç»„åˆä¼˜äºç»§æ‰¿ (<a href="https://en.wikipedia.org/wiki/Composition_over_inheritance">Composition Over Inheritance</a>) åŸåˆ™ï¼Œä¸»è¦ç”¨äºæ¸¸æˆå¼€å‘ã€‚åœ¨ ECS æ¶æ„ä¸­ï¼Œåœºæ™¯å†…çš„æ¯ä¸ªå¯¹è±¡ï¼ˆå¦‚æ•Œäººã€å­å¼¹ã€è½¦è¾†ç­‰ï¼‰éƒ½æ˜¯ä¸€ä¸ªå®ä½“ (Entity)ï¼Œæ¯ä¸ªå®ä½“éƒ½ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŒ…å«æ•°æ®ï¼ˆçŠ¶æ€ï¼‰çš„ç»„ä»¶ (Component) ç»„æˆï¼Œæ¶æ„å…è®¸çµæ´»åœ°å®šä¹‰ã€æ·»åŠ å’Œåˆ é™¤å®ä½“ï¼Œé¿å…äº†éš¾ä»¥ç†è§£ã€ç»´æŠ¤å’Œæ‰©å±•çš„ç»§æ‰¿å±‚æ¬¡é€ æˆçš„æ¨¡ç³Šæ€§é—®é¢˜ã€‚</p>
<h2 id="ç»„åˆä¼˜äºç»§æ‰¿">ç»„åˆä¼˜äºç»§æ‰¿</h2>
<p>è¦äº†è§£ ECS æ¶æ„çš„æ¦‚å¿µä»¥åŠä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ç§æ¨¡å¼ï¼Œé¦–å…ˆè¦ä»ç»„åˆä¼˜äºç»§æ‰¿åŸåˆ™è®²èµ·ã€‚</p>
<p>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ (OOP) ä¸­çš„ç»„åˆä¼˜äºç»§æ‰¿æ˜¯æŒ‡ç±»åº”è¯¥å€¾å‘äºé€šè¿‡ç»„åˆï¼Œå³åŒ…å«å®ç°æ‰€éœ€åŠŸèƒ½çš„å…¶ä»–ç±»çš„å®ä¾‹ï¼Œè€Œéä»åŸºç±»ç»§æ‰¿æ¥å®ç°å¤šæ€è¡Œä¸ºå’Œä»£ç å¤ç”¨ã€‚</p>
<p>å®šä¹‰è¡¨ç¤ºç³»ç»Ÿæ‰€å…·æœ‰è¡Œä¸ºçš„æ¥å£ (Interface) æ˜¯å®ç°ç»„åˆä¼˜äºç»§æ‰¿çš„åŸºç¡€ï¼Œæ¥å£å®ç°å¤šæ€è¡Œä¸ºï¼Œè€Œå®ç°æŒ‡å®šæ¥å£çš„ç±»æ ¹æ®éœ€è¦è¢«æ·»åŠ åˆ°ä¸šåŠ¡é¢†åŸŸç±» (Business Domain Classes) ä¸­ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸šåŠ¡é¢†åŸŸç±»éƒ½æ˜¯åŸºç±»ï¼Œæ— éœ€ä»»ä½•ç»§æ‰¿ï¼Œç³»ç»Ÿè¡Œä¸ºçš„æ›¿ä»£å®ç°é€šè¿‡å¦ä¸€ä¸ªå®ç°æ‰€éœ€è¡Œä¸ºçš„æ¥å£æ¥å®Œæˆã€‚åŒ…å«å¯¹æ¥å£å¼•ç”¨çš„ç±»å¯ä»¥å°†å¯¹è¯¥æ¥å£å®ç°çš„é€‰æ‹©æ¨è¿Ÿåˆ°è¿è¡Œæ—¶ã€‚</p>
<p>ä»¥ C++ ä¸ºä¾‹ï¼Œåˆ†åˆ«é‡‡ç”¨ç»§æ‰¿å’Œç»„åˆçš„æ–¹å¼å®ç°ä¸€ä¸ªç®€å•çš„ç³»ç»Ÿï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹å‡ºä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿å¸¦æ¥çš„å¥½å¤„ã€‚</p>
<h3 id="ç»§æ‰¿">ç»§æ‰¿</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Object</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">collide</span><span class="params">(Object objects[])</span> </span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Visible</span> : <span class="keyword">public</span> Object &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// draw</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Movable</span> : <span class="keyword">public</span> Object &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">update</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// update</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå®šä¹‰äº†ç³»ç»Ÿçš„ä¸¤ä¸ªæ¥å£ï¼Œæ­¤æ—¶ï¼Œå¯å®šä¹‰å®ç°å¯¹åº”æ¥å£çš„ä¸šåŠ¡é¢†åŸŸç±»ï¼Œå¦‚ï¼š</p>
<ul>
<li>ç±» <code>Player</code>ï¼šæ˜¯ <code>Visible</code> ä¸” <code>Movable</code>ï¼Œå³å¯è§ä¸”å¯ç§»åŠ¨</li>
<li>ç±» <code>Building</code>ï¼šæ˜¯ <code>Visible</code> ä½†ä¸æ˜¯ <code>Movable</code>ï¼Œå³å¯è§ä½†ä¸å¯ç§»åŠ¨</li>
</ul>
<p>C++ è™½ç„¶æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œä½†ååˆ†å¤æ‚ï¼Œä¸”ä½¿ç”¨å¤šé‡ç»§æ‰¿æ˜¯ä¸€ä¸ªå…·æœ‰å¾ˆå¤§é£é™©çš„è¡Œä¸ºï¼Œå¯èƒ½å¯¼è‡´é’»çŸ³é—®é¢˜ (<a href="https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem">Diamond Problem</a>)ã€‚</p>
<p>è‹¥è¦é¿å…ä½¿ç”¨å¤šé‡ç»§æ‰¿ï¼Œåˆ™éœ€è¦é¢å¤–å®šä¹‰å¦‚ <code>VisibleAndMovable</code>ã€<code>VisibleButNotMovable</code> ç­‰è¿™æ ·çš„ç»„åˆæ¥å£ã€‚ä½†æ˜¯ï¼Œå½“æ¥å£å¾ˆå¤šæ—¶ï¼Œæ­¤ç±»ç»„åˆå°†ä¼šå¯¼è‡´å¤§é‡é‡å¤çš„ä»£ç ï¼Œéš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
<h3 id="ç»„åˆ">ç»„åˆ</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VisibilityDelegate</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Visible</span> : <span class="keyword">public</span> VisibilityDelegate &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// draw</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NotVisible</span> : <span class="keyword">public</span> VisibilityDelegate &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UpdateDelegate</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">update</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Movable</span> : <span class="keyword">public</span> UpdateDelegate &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">update</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// update</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NotMovable</span> : <span class="keyword">public</span> UpdateDelegate &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">update</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ä»¥ä¸Šå®šä¹‰çš„å‡ ä¸ªæ¥å£çš„ç»„åˆï¼ŒåŒæ ·å¯ä»¥å®ç°ä¹‹å‰çš„ç³»ç»Ÿï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Object</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Object</span>(VisibilityDelegate* v, UpdateDelegate* u) : <span class="built_in">v_</span>(v), <span class="built_in">u_</span>(u) &#123;&#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123; v_-&gt;<span class="built_in">draw</span>(); &#125;</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123; u_-&gt;<span class="built_in">update</span>(); &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">  VisibilityDelegate* v_;</span><br><span class="line">  UpdateDelegate* u_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Player</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Player</span>() : <span class="built_in">Object</span>(<span class="keyword">new</span> <span class="built_in">Visible</span>(), <span class="keyword">new</span> <span class="built_in">Movable</span>()) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Building</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Building</span>() : <span class="built_in">Object</span>(<span class="keyword">new</span> <span class="built_in">Visible</span>(), <span class="keyword">new</span> <span class="built_in">NotMovable</span>()) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹</h3>
<ul>
<li><p>èµ‹äºˆè®¾è®¡æ›´é«˜çš„çµæ´»æ€§</p></li>
<li><p>é€šè¿‡ç»„ä»¶ç»„åˆç±»æ¯”å¯»æ‰¾ç±»çš„å…±æ€§å¹¶å»ºç«‹ç»§æ‰¿å…³ç³»æ›´è‡ªç„¶ã€ç®€å•</p></li>
<li><p>ç»„åˆä¸€ä¸ªå¯¹è±¡çš„èƒ½åŠ›æ¯”æ‰©å±•ä¸€ä¸ªå¯¹è±¡æœ¬èº«æ›´å¥½</p>
<blockquote>
<p>It is better to compose what an object can do (HAS-A) than extend what it is (IS-A)</p>
</blockquote></li>
<li><p>å¯ä»¥é€‚åº”æœªæ¥éœ€æ±‚çš„å˜åŒ–ï¼Œé¿å…ç»§æ‰¿æ¨¡å‹åœ¨éœ€æ±‚å˜åŒ–æ—¶éœ€è¦å¯¹ä¸šåŠ¡é¢†åŸŸç±»è¿›è¡Œå½»åº•é‡ç»„</p></li>
<li><p>ç»„åˆå…³ç³»æ›´åŠ çµæ´»ï¼Œå¯åœ¨è¿è¡Œæ—¶æ”¹å˜ï¼›ç»§æ‰¿å…³ç³»æ˜¯é™æ€çš„ï¼Œè®¸å¤šè¯­è¨€éœ€è¦é‡æ–°ç¼–è¯‘</p></li>
</ul>
<h3 id="ç¼ºç‚¹">ç¼ºç‚¹</h3>
<ul>
<li>ç»§æ‰¿æ¨¡å‹ä¸­ï¼Œæ´¾ç”Ÿç±»åªéœ€è¦å®ç°ï¼ˆè¦†ç›–ï¼‰äºåŸºç±»æ–¹æ³•å…·æœ‰ä¸åŒè¡Œä¸ºçš„æ–¹æ³•ï¼›è€Œ ECS æ¶æ„ä¸­ï¼Œç”±å•ä¸ªç»„ä»¶æä¾›çš„æ–¹æ³•å¯èƒ½å¿…é¡»åœ¨æ´¾ç”Ÿç±»å‹ä¸­å®ç°ï¼Œå³ä½¿åªæ˜¯è½¬å‘æ–¹æ³•</li>
</ul>
<h2 id="ecs-çš„åŸºæœ¬æ¦‚å¿µ">ECS çš„åŸºæœ¬æ¦‚å¿µ</h2>
<p>2007 å¹´ï¼Œåˆ¶ä½œ Operation Flashpoint: Dragon Rising çš„å›¢é˜Ÿå°è¯•äº† ECS æ¶æ„ã€‚æ­¤åï¼ŒAdam Martin å†™äº†ä¸€ç¯‡å…³äº ECS è®¾è®¡çš„<a href="https://www.notion.so/ECS-535a35842c404c888ff7c812e6030de4#1f69ee65f2d84e44ab0fab6256ad6660">è¯¦ç»†è¯´æ˜</a>ï¼ŒåŒ…æ‹¬æ ¸å¿ƒæœ¯è¯­å’Œæ¦‚å¿µå®šä¹‰ï¼Œç‰¹åˆ«æå‡ºäº†ç³»ç»Ÿä½œä¸ºä¸€ç­‰å…ƒç´ ã€å®ä½“ä½œä¸º IDã€ç»„ä»¶ä½œä¸ºåŸå§‹æ•°æ®ã€ä»£ç å­˜å‚¨åœ¨ç³»ç»Ÿè€Œéç»„ä»¶æˆ–å®ä½“ä¸­ç­‰è§‚ç‚¹ã€‚</p>
<p>2015 å¹´ï¼Œè‹¹æœå…¬å¸æ¨å‡ºäº†ç”¨äº iOSã€macOS å’Œ tvOS çš„æ¸¸æˆå¼€å‘æ¡†æ¶ GameplayKitï¼Œå…¶ä¸­åŒ…å«äº† ECS æ¶æ„çš„å®ç°ã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1PFwRZ_Gvc3SgI9cB6q1a-8SfBBpCmpZ3" alt="ECS æ¶æ„" style="background-color:white;padding:20px;"></p>
<p>ECS æ¶æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»å®ä½“ã€ç»„ä»¶å’Œç³»ç»Ÿçš„æ¦‚å¿µã€‚</p>
<h3 id="å®ä½“-entity">å®ä½“ (Entity)</h3>
<p>å®ä½“æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œç”¨æ¥è¡¨ç¤ºé€šç”¨çš„å¯¹è±¡ï¼Œæ˜¯ä¸€ç³»åˆ—è¡¨ç¤ºè¯¥å®ä½“æ‰€å…·æœ‰èƒ½åŠ›çš„ç»„ä»¶çš„é›†åˆã€‚åœ¨ä»£ç å®ç°ä¸­ï¼Œå®ä½“é€šå¸¸ä½¿ç”¨ä¸€ä¸ªæ•´å‹ ID æ¥è¡¨ç¤ºï¼Œè¯¥å®ä½“æ‰€å…·æœ‰çš„æ‰€æœ‰ç»„ä»¶éƒ½ä¼šè¢«è¿™ä¸ª ID æ ‡è®°ï¼Œä¸”åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åŠ¨æ€åœ°ä¸ºå®ä½“æ·»åŠ æˆ–åˆ é™¤ç»„ä»¶ã€‚</p>
<p>æ ·ä¾‹ï¼š</p>
<ul>
<li><code>Player(Sprite, Position, Velocity, Health)</code></li>
<li><code>Tree(Sprite, Position)</code></li>
</ul>
<h3 id="ç»„ä»¶-component">ç»„ä»¶ (Component)</h3>
<p>ç»„ä»¶æ˜¯å¯¹è±¡æŸä¸€ä¸ªç‰¹æ€§çš„åŸå§‹æ•°æ®ï¼ˆçŠ¶æ€ï¼‰ï¼Œæ‹¥æœ‰æŸä¸ªç»„ä»¶å³è¡¨ç¤ºå®ä½“å…·æœ‰è¿™ä¸ªç‰¹æ€§æˆ–èƒ½åŠ›ã€‚åœ¨ä»£ç ä¸­é€šå¸¸ä½¿ç”¨ç»“æ„ä½“ã€ç±»æˆ–å…³è”æ•°ç»„å®ç°ã€‚</p>
<p>æ ·ä¾‹ï¼š</p>
<ul>
<li><code>Position(x, y)</code></li>
<li><code>Velocity(x, y)</code></li>
<li><code>Health(value)</code></li>
</ul>
<h3 id="ç³»ç»Ÿ-system">ç³»ç»Ÿ (System)</h3>
<p>ç³»ç»Ÿæ˜¯ä¸€ä¸ªè¿ç»­è¿è¡Œçš„ã€å¯¹æ‹¥æœ‰ä¸è¯¥ç³»ç»Ÿç›¸åŒç»„ä»¶çš„æ¯ä¸ªå®ä½“æ‰§è¡Œå…¨å±€æ“ä½œçš„å·¥å…·ï¼Œé€šå¸¸åªæœ‰è¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰ï¼Œä¸åŒ…å«çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ã€‚</p>
<p>æ ·ä¾‹ï¼š</p>
<ul>
<li><code>MoveSystem(Position, Velocity)</code></li>
<li><code>RenderSystem(Sprite, Position)</code></li>
</ul>
<h2 id="å®æˆ˜-entityx">å®æˆ˜ â€”â€” <a href="https://github.com/alecthomas/entityx">EntityX</a></h2>
<h3 id="åˆ›å»ºç»„ä»¶">åˆ›å»ºç»„ä»¶</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Position</span> &#123;</span><br><span class="line">  <span class="built_in">Position</span>(<span class="type">double</span> x = <span class="number">0</span>, <span class="type">double</span> y = <span class="number">0</span>) : <span class="built_in">x</span>(x), <span class="built_in">y</span>(y) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="type">double</span> x;</span><br><span class="line">  <span class="type">double</span> y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="ç»™å®ä½“æ·»åŠ ç»„ä»¶">ç»™å®ä½“æ·»åŠ ç»„ä»¶</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">entity.<span class="built_in">assign</span>&lt;Position&gt;(<span class="number">1.0</span>, <span class="number">2.0</span>);</span><br></pre></td></tr></table></figure>
<h3 id="è·å–æ‹¥æœ‰ç‰¹å®šç»„ä»¶çš„å®ä½“">è·å–æ‹¥æœ‰ç‰¹å®šç»„ä»¶çš„å®ä½“</h3>
<p>å‡½æ•°å¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">entities.<span class="built_in">each</span>&lt;Position, Direction&gt;([](Entity entity, Position &amp;position,</span><br><span class="line">                                      Direction &amp;direction) &#123;</span><br><span class="line">  <span class="comment">// Do things with entity, position and direction.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿­ä»£å™¨æ–¹å¼ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ComponentHandle&lt;Position&gt; position;</span><br><span class="line">ComponentHandle&lt;Direction&gt; direction;</span><br><span class="line"><span class="keyword">for</span> (Entity entity : entities.<span class="built_in">entities_with_components</span>(position, direction)) &#123;</span><br><span class="line">  <span class="comment">// Do things with entity, position and direction.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è·å–å®ä½“çš„æŸä¸ªç»„ä»¶">è·å–å®ä½“çš„æŸä¸ªç»„ä»¶</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">ComponentHandle&lt;Position&gt; position = entity.<span class="built_in">component</span>&lt;Position&gt;();</span><br><span class="line"><span class="keyword">if</span> (position) &#123;</span><br><span class="line">  <span class="comment">// Do stuff with position</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>ECS</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¬ç –ç¬”è®° (2) â€”â€” OpenGL æŠ•å½±çŸ©é˜µ</title>
    <url>/2021/08/31/%E6%90%AC%E7%A0%96%E7%AC%94%E8%AE%B0-2-%E2%80%94%E2%80%94-OpenGL-%E6%8A%95%E5%BD%B1%E7%9F%A9%E9%98%B5/</url>
    <content><![CDATA[<p>æœ¬æ–‡ç¿»è¯‘è‡ª <a href="http://www.songho.ca/opengl/gl_projectionmatrix_mathml.html">OpenGL Projection Matrix</a>ï¼Œä»…ç”¨äºä¸ªäººå­¦ä¹ è®°å½•ã€‚</p>
<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2>
<p>è®¡ç®—æœºæ˜¾ç¤ºå™¨æ˜¯ä¸€ä¸ª 2D è¡¨é¢ã€‚ç”± OpenGL æ¸²æŸ“çš„ 3D åœºæ™¯å¿…é¡»è¢«æŠ•å½±ä¸ºè®¡ç®—æœºå±å¹•ä¸Šçš„ 2D å›¾åƒã€‚<code>GL_PROJECTION</code> çŸ©é˜µè¢«ç”¨äºè¿™ä¸ªæŠ•å½±å˜æ¢ã€‚é¦–å…ˆï¼Œå®ƒå°†æ‰€æœ‰é¡¶ç‚¹æ•°æ®ä»<strong>è§†è§‰åæ ‡</strong> (Eye Coordinates) è½¬æ¢åˆ°<strong>è£å‰ªåæ ‡</strong> (Clip Coordinates)ã€‚ç„¶åï¼Œå°†è¿™äº›è£å‰ªåæ ‡åˆ†åˆ«é™¤ä»¥è£å‰ªåæ ‡çš„ <span class="math inline">\(w\)</span> åˆ†é‡ï¼Œè½¬æ¢ä¸º<strong>æ ‡å‡†åŒ–è®¾å¤‡åæ ‡</strong> (Normalized Device Coordinate, NDC)ã€‚</p>
<span id="more"></span>
<p>å› æ­¤ï¼Œ<code>GL_PROJECTION</code> çŸ©é˜µåŒ…å«äº†è£å‰ªï¼ˆå¹³æˆªå¤´ä½“å‰”é™¤ (Frustum Culling)ï¼‰å’Œæ ‡å‡†åŒ–è®¾å¤‡åæ ‡å˜æ¢ã€‚ä¸‹é¢æè¿°å¦‚ä½•ç”¨å·¦ (<em>left</em>)ã€å³ (<em>right</em>)ã€åº• (<em>bottom</em>)ã€é¡¶ (<em>top</em>)ã€è¿‘ (<em>near</em>) å’Œè¿œ (<em>far</em>) çš„è¾¹ç•Œå€¼è¿™ 6 ä¸ªå‚æ•°æ¥å»ºç«‹æŠ•å½±çŸ©é˜µã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1_UiJHz4S65rL0eyI_5wJON9ApzkTJ0BA" alt="è¢«è£å‰ªçš„ä¸‰è§’å½¢" width="40%" style="background-color:white;padding:12px;"></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè£å‰ªå‘ç”Ÿåœ¨è£å‰ªåæ ‡ä¸­ï¼Œä¸”åœ¨é™¤ä»¥ <span class="math inline">\({w}_{c}\)</span> ä¹‹å‰ã€‚è£å‰ªåæ ‡ <span class="math inline">\({x}_{c}\)</span>ã€<span class="math inline">\({y}_{c}\)</span> å’Œ <span class="math inline">\({z}_{c}\)</span> ä¸ <span class="math inline">\({w}_{c}\)</span> è¿›è¡Œæ¯”è¾ƒï¼šå¦‚æœä»»ä½•è£å‰ªåæ ‡å°äº <span class="math inline">\(-{w}_{c}\)</span> æˆ–å¤§äº <span class="math inline">\({w}_{c}\)</span>ï¼Œåˆ™è¯¥é¡¶ç‚¹è¢«ä¸¢å¼ƒã€‚</p>
<p><span class="math display">\[
-{w}_{c} &lt; {x}_{c},\ {y}_{c},\ {z}_{c} &lt; {w}_{c}
\]</span></p>
<p>ä¹‹åï¼ŒOpenGL å°†é‡å»ºè¢«è£å‰ªçš„å¤šè¾¹å½¢çš„è¾¹ç¼˜ã€‚</p>
<h2 id="é€è§†æŠ•å½±-perspective-projection">é€è§†æŠ•å½± (Perspective Projection)</h2>
<p>åœ¨é€è§†æŠ•å½±ä¸­ï¼Œå¹³æˆªå¤´ä½“ï¼ˆè§†è§‰åæ ‡ï¼‰ä¸­çš„ä¸€ä¸ª 3D ç‚¹è¢«æ˜ å°„åˆ°æ ‡å‡†åŒ–è®¾å¤‡åæ ‡ã€‚<span class="math inline">\(x\)</span>ã€<span class="math inline">\(y\)</span>ã€<span class="math inline">\(z\)</span> åæ ‡çš„å–å€¼èŒƒå›´åˆ†åˆ«ä» <span class="math inline">\(\left[l,\ r\right]\)</span>ã€<span class="math inline">\(\left[b,\ t\right]\)</span>ã€<span class="math inline">\(\left[-n,\ -f\right]\)</span> è¢«æ˜ å°„åˆ° <span class="math inline">\(\left[-1,\ 1\right]\)</span></p>
<p><img src="https://drive.google.com/uc?export=view&id=1KIjj4u-bw4MSnwFwCe1u5KP0-WK4fHnI" alt="é€è§†å¹³æˆªå¤´ä½“å’Œæ ‡å‡†åŒ–è®¾å¤‡åæ ‡" width="70%" style="background-color:white;padding:16px;"></p>
<p>è§†è§‰åæ ‡æ˜¯åœ¨å³æ‰‹åæ ‡ç³»ä¸­å®šä¹‰çš„ï¼Œä½†æ˜¯æ ‡å‡†åŒ–è®¾å¤‡åæ ‡ä½¿ç”¨çš„æ˜¯å·¦æ‰‹åæ ‡ç³»ã€‚å› æ­¤ï¼ŒåŸç‚¹çš„ç›¸æœºåœ¨è§†è§‰ç©ºé—´ä¸­æ˜¯çœ‹å‘ <span class="math inline">\(Z\)</span> è½´è´Ÿæ–¹å‘ (<span class="math inline">\(-Z\)</span>) çš„ï¼Œè€Œåœ¨æ ‡å‡†åŒ–è®¾å¤‡åæ ‡ä¸­æ˜¯çœ‹å‘ <span class="math inline">\(Z\)</span> è½´æ­£æ–¹å‘ (<span class="math inline">\(+Z\)</span>) çš„ã€‚</p>
<p><code>glFrustum()</code> åªæ¥å— <code>near</code> å’Œ <code>far</code> è·ç¦»çš„æ­£å€¼ï¼Œå› ä¸ºéœ€è¦åœ¨æ„å»º <code>GL_PROJECTION</code> çŸ©é˜µæ—¶å–å…¶ç›¸åæ•°ã€‚</p>
<p>åœ¨ OpenGL ä¸­ï¼Œä¸€ä¸ªè§†è§‰ç©ºé—´ä¸­çš„ 3D ç‚¹è¢«æŠ•å½±åˆ°è¿‘å¹³é¢ï¼ˆæŠ•å½±å¹³é¢ï¼‰ã€‚ä¸‹å›¾å±•ç¤ºäº†è§†è§‰ç©ºé—´ä¸­çš„ä¸€ç‚¹ <span class="math inline">\(\left({x}_{e},\ {y}_{e},\ {z}_{e}\right)\)</span> æ˜¯å¦‚ä½•è¢«æŠ•å½±åˆ°è¿‘å¹³é¢ä¸Šç‚¹ <span class="math inline">\(\left({x}_{p},\ {y}_{p},\ {z}_{p}\right)\)</span> çš„ã€‚</p>
<figure style="display:flex">
<img src="https://drive.google.com/uc?export=view&id=11n9pWfOj5gW0sbvUb8IitrNgH1RI0WP8" alt="å¹³æˆªå¤´ä½“çš„ä¿¯è§†å›¾" width="40%" style="background-color:white;padding:16px;"> <img src="https://drive.google.com/uc?export=view&id=1c8xtyzS4S-DqC82suLX4Uc_JJ9qAoJID" alt="å¹³æˆªå¤´ä½“çš„ä¾§è§†å›¾" width="40%" style="background-color:white;padding:16px;">
</figure>
<p>å¦‚ä¸Šå·¦å›¾æ‰€ç¤ºä¸ºå¹³æˆªå¤´ä½“çš„ä¿¯è§†å›¾ï¼Œé€šè¿‡è®¡ç®—ç›¸ä¼¼ä¸‰è§’å½¢çš„æ¯”ä¾‹ï¼Œè§†è§‰ç©ºé—´çš„ <span class="math inline">\(x\)</span> åæ ‡ <span class="math inline">\({x}_{e}\)</span> è¢«æ˜ å°„åˆ° <span class="math inline">\({x}_{p}\)</span>ï¼š</p>
<p><span class="math display">\[
\frac{x_p}{x_e} = \frac{-n}{z_e} \Rightarrow x_p = \frac{n \cdot x_e}{-z_e}
\]</span></p>
<p>å¦‚ä¸Šå³å›¾æ‰€ç¤ºä¸ºå¹³æˆªå¤´ä½“çš„æµ‹è¯•å›¾ï¼ŒåŒæ ·å¯ä»¥è®¡ç®— <span class="math inline">\(y\)</span> åæ ‡çš„æ˜ å°„ï¼š</p>
<p><span class="math display">\[
\frac{y_p}{y_e} = \frac{-n}{z_e} \Rightarrow y_p = \frac{n \cdot y_e}{-z_e}
\]</span></p>
<p>æ³¨æ„ <span class="math inline">\({x}_{p}\)</span> å’Œ <span class="math inline">\({y}_{p}\)</span> éƒ½ä¾èµ–äº <span class="math inline">\({z}_{e}\)</span>ï¼Œå®ƒä»¬éƒ½ä¸ <span class="math inline">\(-{z}_{e}\)</span> æˆåæ¯”å…³ç³»ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬éƒ½è¢« <span class="math inline">\(-{z}_{e}\)</span> æ‰€é™¤ã€‚è¿™æ˜¯æ„å»º <code>GL_PROJECTION</code> çŸ©é˜µçš„ç¬¬ä¸€æ¡çº¿ç´¢ã€‚å°†è§†è§‰åæ ‡é€šè¿‡ä¹˜ä»¥ <code>GL_PROJECTION</code> çŸ©é˜µè¿›è¡Œè½¬æ¢åï¼Œå¾—åˆ°çš„è£å‰ªåæ ‡ä»ç„¶æ˜¯ä¸€ä¸ª<a href="http://www.songho.ca/math/homogeneous/homogeneous.html">é½æ¬¡åæ ‡</a>ã€‚é€šè¿‡é™¤ä»¥è£å‰ªåæ ‡çš„ <span class="math inline">\(w\)</span> åˆ†é‡ï¼Œå®ƒæœ€ç»ˆè¢«è½¬æ¢ä¸ºæ ‡å‡†åŒ–è®¾å¤‡åæ ‡ï¼ˆæ›´å¤šç»†èŠ‚è§ <a href="http://www.songho.ca/opengl/gl_transform.html">OpenGL å˜æ¢</a>ï¼‰ã€‚</p>
<p><span class="math display">\[
\begin{bmatrix}
{x}_{clip} \\
{y}_{clip} \\
{z}_{clip} \\
{w}_{clip}
\end{bmatrix}
= {M}_{projection} \cdot
\begin{bmatrix}
{x}_{eye} \\
{y}_{eye} \\
{z}_{eye} \\
{w}_{eye}
\end{bmatrix}
,\
\begin{bmatrix}
{x}_{ndc} \\
{y}_{ndc} \\
{z}_{ndc}
\end{bmatrix}
=
\begin{bmatrix}
\dfrac{x_{clip}}{w_{clip}} \\
\dfrac{y_{clip}}{w_{clip}} \\
\dfrac{z_{clip}}{w_{clip}}
\end{bmatrix}
\]</span></p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè£å‰ªåæ ‡çš„ <span class="math inline">\(w\)</span> åˆ†é‡è®¾ä¸º <span class="math inline">\(-{z}_{e}\)</span>ï¼Œåˆ™ <code>GL_PROJECTION</code> çŸ©é˜µçš„ç¬¬å››è¡Œå˜ä¸º <span class="math inline">\(\begin{bmatrix}0 &amp; 0 &amp; -1 &amp; 0\end{bmatrix}\)</span>ï¼š</p>
<p><span class="math display">\[
\begin{bmatrix}
{x}_{c} \\
{y}_{c} \\
{z}_{c} \\
{w}_{c}
\end{bmatrix}
=
\begin{bmatrix}
       &amp;        &amp;        &amp;        \\
\vdots &amp; \vdots &amp; \vdots &amp; \vdots \\
       &amp;        &amp;        &amp;        \\
0      &amp; 0      &amp; -1     &amp; 0
\end{bmatrix}
\begin{bmatrix}
{x}_{e} \\
{y}_{e} \\
{z}_{e} \\
{w}_{e}
\end{bmatrix}
,\
\therefore {w}_{c} = -{z}_{e}
\]</span></p>
<p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬ä»¥çº¿æ€§å…³ç³»æŠŠ <span class="math inline">\({x}_{p}\)</span> å’Œ <span class="math inline">\({y}_{p}\)</span> æ˜ å°„åˆ°æ ‡å‡†åŒ–è®¾å¤‡åæ ‡çš„ <span class="math inline">\({x}_{n}\)</span> å’Œ <span class="math inline">\({y}_{n}\)</span>ï¼š<span class="math inline">\(\left[l,\ r\right] \Rightarrow \left[-1,\ 1\right]\)</span> ä»¥åŠ <span class="math inline">\(\left[b,\ t\right] \Rightarrow \left[-1,\ 1\right]\)</span>ã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1L1UsMaESrfxh9L_I61kimgDWBHeKyqHn" alt="x_p æ˜ å°„åˆ° x_n" width="30%" style="background-color:white;padding:12px;"></p>
<p><span class="math display">\[
\begin{aligned}
{x}_{n}            &amp; = \dfrac{1 - (-1)}{r - l} \cdot {x}_{p} + \beta \text{ï¼ˆä»£å…¥}{x}_{p} = r,\ {x}_{n} = 1\text{ï¼‰} \\
\Rightarrow \beta  &amp; = -\dfrac{r + l}{r - l}                                                                        \\
\therefore {x}_{n} &amp; = \dfrac{2 x_p}{r - l} - \dfrac{r + l}{r - l}
\end{aligned}
\]</span></p>
<p><img src="https://drive.google.com/uc?export=view&id=1w2vrBOJsk2dZj7s_92gWB-86jjS2jgwd" alt="y_p æ˜ å°„åˆ° y_n" width="30%" style="background-color:white;padding:12px;"></p>
<p><span class="math display">\[
\begin{aligned}
{y}_{n}            &amp; = \dfrac{1 - (-1)}{t - b} \cdot {y}_{p} + \beta \text{ï¼ˆä»£å…¥}{y}_{p} = t,\ {y}_{n} = 1\text{ï¼‰} \\
\Rightarrow \beta  &amp; = -\dfrac{t + b}{t - b}                                                                        \\
\therefore {y}_{n} &amp; = \dfrac{2 y_p}{t - b} - \dfrac{t + b}{t - b}
\end{aligned}
\]</span></p>
<p>ç„¶åï¼Œæˆ‘ä»¬å°† <span class="math inline">\({x}_{p} = \dfrac{n x_e}{-z_e}\)</span> å’Œ <span class="math inline">\({y}_{p} = \dfrac{n y_e}{-z_e}\)</span> ä»£å…¥ä¸Šå¼ï¼š</p>
<p><span class="math display">\[
\begin{aligned}
{x}_{n} &amp; = \dfrac{\frac{2 n}{r - l} \cdot x_e + \frac{r + l}{r - l} \cdot z_e}{-z_e} = \dfrac{x_c}{-z_e} \\
{y}_{n} &amp; = \dfrac{\frac{2 n}{t - b} \cdot y_e + \frac{t + b}{t - b} \cdot z_e}{-z_e} = \dfrac{y_c}{-z_e}
\end{aligned}
\]</span></p>
<p>æ³¨æ„æˆ‘ä»¬è®©ä¸Šå¼ä¸­çš„æ¯é¡¹éƒ½é™¤ä»¥ <span class="math inline">\(- {z}_{e}\)</span> ä»¥è¿›è¡Œé€è§†é™¤æ³• (<span class="math inline">\(\frac{x_c}{w_c},\ \frac{y_c}{w_c}\)</span>)ã€‚å¹¶ä¸”æˆ‘ä»¬ä¹‹å‰ä»¤ <span class="math inline">\({w}_{c} = -{z}_{e}\)</span>ï¼Œåˆ™ä¸Šå¼ä¸­çš„åˆ†å­åˆ†åˆ«å˜ä¸ºè£å‰ªåæ ‡ <span class="math inline">\({x}_{c}\)</span> å’Œ <span class="math inline">\({y}_{c}\)</span>ã€‚</p>
<p>ç”±è¿™äº›æ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° <code>GL_PROJECTION</code> çŸ©é˜µçš„ç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œï¼š</p>
<p><span class="math display">\[
\begin{bmatrix}
{x}_{c} \\
{y}_{c} \\
{z}_{c} \\
{w}_{c}
\end{bmatrix}
=
\begin{bmatrix}
\frac{2 n}{r - l} &amp; 0                 &amp; \frac{r + l}{r - l} &amp; 0      \\
0                 &amp; \frac{2 n}{t - b} &amp; \frac{t + b}{t - b} &amp; 0      \\
\vdots            &amp; \vdots            &amp; \vdots              &amp; \vdots \\
0                 &amp; 0                 &amp; -1                  &amp; 0
\end{bmatrix}
\begin{bmatrix}
{x}_{e} \\
{y}_{e} \\
{z}_{e} \\
{w}_{e}
\end{bmatrix}
\]</span></p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬åªå‰© <code>GL_PROJECTION</code> çŸ©é˜µçš„ç¬¬ä¸‰è¡Œéœ€è¦æ±‚è§£ã€‚è®¡ç®— <span class="math inline">\({z}_{n}\)</span> å’Œå…¶ä»–çš„ç•¥æœ‰åŒºåˆ«ï¼Œå› ä¸ºè§†è§‰ç©ºé—´çš„ <span class="math inline">\({z}_{e}\)</span> æ€»æ˜¯æŠ•å½±åˆ°è¿‘å¹³é¢ä¸Šçš„ <span class="math inline">\(-n\)</span>ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å”¯ä¸€çš„ <span class="math inline">\(z\)</span> å€¼æ¥è¿›è¡Œè£å‰ªå’Œæ·±åº¦æµ‹è¯•ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤ŸåæŠ•å½±ï¼ˆé€†å˜æ¢ï¼‰å®ƒã€‚ç”±äºæˆ‘ä»¬çŸ¥é“ <span class="math inline">\(z\)</span> ä¸ä¾èµ–äº <span class="math inline">\(x\)</span> å’Œ <span class="math inline">\(y\)</span> çš„å€¼ï¼Œæˆ‘ä»¬å€Ÿç”¨ <span class="math inline">\(w\)</span> åˆ†é‡æ¥å¯»æ‰¾ <span class="math inline">\({z}_{n}\)</span> å’Œ <span class="math inline">\({z}_{e}\)</span> çš„å…³ç³»ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä»¤ <code>GL_PROJECTION</code> çŸ©é˜µçš„ç¬¬ä¸‰è¡Œå½¢å¦‚ <span class="math inline">\(\begin{bmatrix}0 &amp; 0 &amp; A &amp; B\end{bmatrix}\)</span>ï¼Œåˆ™æœ‰</p>
<p><span class="math display">\[
{z}_{n} = \dfrac{z_c}{w_c} = \dfrac{A z_e + B w_e}{-z_e}
\]</span></p>
<p>åœ¨è§†è§‰ç©ºé—´ä¸­ï¼Œ<span class="math inline">\({w}_{e} = 1\)</span>ï¼Œå› æ­¤ï¼Œæ–¹ç¨‹å˜ä¸º</p>
<p><span class="math display">\[
{z}_{n} = \dfrac{A z_e + B}{-z_e}
\]</span></p>
<p>ä¸ºäº†è®¡ç®—ç³»æ•° <span class="math inline">\(A\)</span> å’Œ <span class="math inline">\(B\)</span>ï¼Œæˆ‘ä»¬å°† <span class="math inline">\({z}_{e} = -n,\ {z}_{n} = -1\)</span> å’Œ <span class="math inline">\({z}_{e} = -f,\ {z}_{n} = 1\)</span> ä»£å…¥ä¸Šå¼</p>
<p><span class="math display">\[
\begin{cases}
\dfrac{-A n + B}{n} &amp; = -1 \\
\dfrac{-A f + B}{f} &amp; = 1
\end{cases}
\Rightarrow
\begin{cases}
A &amp; = -\dfrac{f + n}{f - n} \\
B &amp; = -\dfrac{2 f n}{f - n}
\end{cases}
\]</span></p>
<p>æˆ‘ä»¬å¾—åˆ°äº† <span class="math inline">\(A\)</span> å’Œ <span class="math inline">\(B\)</span>ï¼Œå› æ­¤ <span class="math inline">\({z}_{e}\)</span> å’Œ <span class="math inline">\({z}_{n}\)</span> çš„å…³ç³»å˜ä¸º</p>
<p><span class="math display">\[
{z}_{n} = \dfrac{-\frac{f + n}{f - n} z_e - \frac{2 f n}{f - n}}{-z_e}
\]</span></p>
<p>æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°äº† <code>GL_PROJECTION</code> çŸ©é˜µæ‰€æœ‰çš„å…ƒç´ ï¼Œå®Œæ•´çš„æŠ•å½±çŸ©é˜µä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
\frac{2 n}{r - l} &amp; 0                 &amp; \frac{r + l}{r - l}  &amp; 0                    \\
0                 &amp; \frac{2 n}{t - b} &amp; \frac{t + b}{t - b}  &amp; 0                    \\
0                 &amp; 0                 &amp; -\frac{f + n}{f - n} &amp; \frac{-2 f n}{f - n} \\
0                 &amp; 0                 &amp; -1                   &amp; 0
\end{bmatrix}
\]</span></p>
<p>è¿™ä¸ªæŠ•å½±çŸ©é˜µæ˜¯é’ˆå¯¹ä¸€èˆ¬å¹³æˆªå¤´ä½“çš„ï¼Œå¦‚æœè§†è§‰ä½“ç§¯ (Viewing Volume) æ˜¯å¯¹ç§°çš„ï¼Œå³ <span class="math inline">\(r = -l,\ t = -b\)</span>ï¼Œåˆ™çŸ©é˜µå¯ä»¥ç®€åŒ–ä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
\frac{n}{r} &amp; 0           &amp; 0                    &amp; 0                    \\
0           &amp; \frac{n}{t} &amp; 0                    &amp; 0                    \\
0           &amp; 0           &amp; -\frac{f + n}{f - n} &amp; \frac{-2 f n}{f - n} \\
0           &amp; 0           &amp; -1                   &amp; 0
\end{bmatrix}
\]</span></p>
<p>åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè¯·åœ¨æ­¤çœ‹çœ‹ <span class="math inline">\({z}_{e}\)</span> å’Œ <span class="math inline">\({z}_{n}\)</span> ä¹‹é—´çš„å…³ç³»ã€‚æ³¨æ„å®ƒæ˜¯ä¸€ä¸ªæœ‰ç†å‡½æ•°ï¼Œå¹¶ä¸”æ˜¯ <span class="math inline">\({z}_{e}\)</span> å’Œ <span class="math inline">\({z}_{n}\)</span> ä¹‹é—´çš„éçº¿æ€§å…³ç³»ã€‚è¿™æ„å‘³ç€åœ¨è¿‘å¹³é¢ (near) æœ‰éå¸¸é«˜çš„äº¬ç²¾åº¦ï¼Œä½†åœ¨è¿œå¹³é¢ (far) ç²¾åº¦éå¸¸ä½ã€‚å¦‚æœèŒƒå›´ <span class="math inline">\(\left[-n,\ -f\right]\)</span> å˜å¤§ï¼Œå°±ä¼šå¼•èµ·æ·±åº¦çš„ç²¾åº¦é—®é¢˜ (Z-fighting)ï¼šè¿œå¹³é¢é™„è¿‘ <span class="math inline">\({z}_{e}\)</span> å¾®å°çš„å˜åŒ–ä¸ä¼šå½±å“ <span class="math inline">\({z}_{n}\)</span> çš„å€¼ã€‚<span class="math inline">\(n\)</span> å’Œ <span class="math inline">\(f\)</span> ä¹‹é—´çš„è·ç¦»åº”è¯¥å°½å¯èƒ½åœ°çŸ­ï¼Œä»¥å‡å°‘æ·±åº¦ç¼“å†²çš„ç²¾åº¦é—®é¢˜ã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1wtXuqT8BVYMk_vaTx74Dx42noBWTCWiR" alt="æ·±åº¦ç²¾åº¦çš„æ¯”è¾ƒ" width="70%" style="background-color:white;padding:16px;"></p>
<h2 id="æ­£å°„æŠ•å½±-orthographic-projection">æ­£å°„æŠ•å½± (Orthographic Projection)</h2>
<p>æ„å»ºæ­£å°„æŠ•å½±çš„ <code>GL_PROJECTION</code> çŸ©é˜µæ¯”é€è§†æŠ•å½±ç®€å•å¾—å¤šã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1LLnnuvRKXy5q1Zmr08Khv-HFx7DoMMiL" alt="æ­£å°„ä½“ç§¯å’Œæ ‡å‡†åŒ–è®¾å¤‡åæ ‡" width="70%" style="background-color:white;padding:16px;"></p>
<p>è§†è§‰ç©ºé—´çš„æ‰€æœ‰ <span class="math inline">\({x}_{e}\)</span>ã€<span class="math inline">\({y}_{e}\)</span> å’Œ <span class="math inline">\({z}_{e}\)</span> åˆ†é‡éƒ½è¢«çº¿æ€§åœ°æ˜ å°„åˆ°æ ‡å‡†åŒ–è®¾å¤‡åæ ‡ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¸€ä¸ªé•¿æ–¹ä½“ç¼©æ”¾åˆ°ä¸€ä¸ªç«‹æ–¹ä½“ï¼Œç„¶åå°†å…¶ç§»åŠ¨åˆ°åŸç‚¹ã€‚è®©æˆ‘ä»¬ç”¨çº¿æ€§å…³ç³»æ‰¾å‡º <code>GL_PROJECTION</code> çŸ©é˜µçš„å…ƒç´ ã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1KwbloCag8JB_GHW7fdVaFVrfonOnQjbc" alt="x_e æ˜ å°„åˆ° x_n" width="30%" style="background-color:white;padding:12px;"></p>
<p><span class="math display">\[
\begin{aligned}
{x}_{n}            &amp; = \dfrac{1 - (-1)}{r - l} \cdot {x}_{e} + \beta \text{ï¼ˆä»£å…¥}{x}_{e} = r,\ {x}_{n} = 1\text{ï¼‰} \\
\Rightarrow \beta  &amp; = -\dfrac{r + l}{r - l}                                                                        \\
\therefore {x}_{n} &amp; = \dfrac{2 x_e}{r - l} - \dfrac{r + l}{r - l}
\end{aligned}
\]</span></p>
<p><img src="https://drive.google.com/uc?export=view&id=1Vuy7b78xdAslKXgiSzsf6ArIRaUruu8l" alt="y_e æ˜ å°„åˆ° y_n" width="30%" style="background-color:white;padding:12px;"></p>
<p><span class="math display">\[
\begin{aligned}
{y}_{n}            &amp; = \dfrac{1 - (-1)}{t - b} \cdot {y}_{e} + \beta \text{ï¼ˆä»£å…¥}{y}_{e} = t,\ {y}_{n} = 1\text{ï¼‰} \\
\Rightarrow \beta  &amp; = -\dfrac{t + b}{t - b}                                                                        \\
\therefore {y}_{n} &amp; = \dfrac{2 y_e}{t - b} - \dfrac{t + b}{t - b}
\end{aligned}
\]</span></p>
<p><img src="https://drive.google.com/uc?export=view&id=1OW2_wK_UowK-PDs3SI0rg-ymi2_jZwmT" alt="z_e æ˜ å°„åˆ° z_n" width="30%" style="background-color:white;padding:12px;"></p>
<p><span class="math display">\[
\begin{aligned}
{z}_{n}            &amp; = \dfrac{1 - (-1)}{-f - (-n)} \cdot {z}_{e} + \beta \text{ï¼ˆä»£å…¥}{z}_{e} = -f,\ {z}_{n} = 1\text{ï¼‰} \\
\Rightarrow \beta  &amp; = -\dfrac{f + n}{f - n}                                                                             \\
\therefore {z}_{n} &amp; = \dfrac{-2 z_e}{f - n} - \dfrac{f + n}{f - n}
\end{aligned}
\]</span></p>
<p>ç”±äº <span class="math inline">\(w\)</span> åˆ†é‡å¯¹äºæ­£å°„æŠ•å½±æ˜¯ä¸å¿…è¦çš„ï¼Œæ•… <code>GL_PROJECTION</code> çŸ©é˜µçš„ç¬¬å››è¡Œä¸º <span class="math inline">\(\begin{bmatrix}0 &amp; 0 &amp; 0 &amp; 1\end{bmatrix}\)</span>ã€‚å› æ­¤ï¼Œå®Œæ•´çš„æ­£å°„æŠ•å½± <code>GL_PROJECTION</code> çŸ©é˜µä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
\frac{2}{r - l} &amp; 0               &amp; 0                &amp; -\frac{r + l}{r - l} \\
0               &amp; \frac{2}{t - b} &amp; 0                &amp; -\frac{t + b}{t - b} \\
0               &amp; 0               &amp; \frac{-2}{f - n} &amp; -\frac{f + n}{f - n} \\
0               &amp; 0               &amp; 0                &amp; 1
\end{bmatrix}
\]</span></p>
<p>å¦‚æœè§†è§‰ä½“ç§¯æ˜¯å¯¹ç§°çš„ï¼Œå³ <span class="math inline">\(r = -l,\ t = -b\)</span>ï¼Œåˆ™å®ƒå¯ä»¥è¢«è¿›ä¸€æ­¥ç®€åŒ–ä¸º</p>
<p><span class="math display">\[
\begin{bmatrix}
\frac{1}{r} &amp; 0           &amp; 0                &amp; 0                    \\
0           &amp; \frac{1}{t} &amp; 0                &amp; 0                    \\
0           &amp; 0           &amp; \frac{-2}{f - n} &amp; -\frac{f + n}{f - n} \\
0           &amp; 0           &amp; 0                &amp; 1
\end{bmatrix}
\]</span></p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>OpenGL</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»Ÿç¬”è®° (1) â€”â€” è¿›ç¨‹å’Œçº¿ç¨‹</title>
    <url>/2020/03/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-1-%E2%80%94%E2%80%94-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/</url>
    <content><![CDATA[<h2 id="è¿›ç¨‹-process">è¿›ç¨‹ (Process)</h2>
<h3 id="å®šä¹‰">å®šä¹‰</h3>
<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡<strong>åŠ¨æ€</strong>æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<span id="more"></span>
<h3 id="ç»„æˆ">ç»„æˆ</h3>
<p>ä¸€ä¸ªè¿›ç¨‹åŒ…æ‹¬äº†æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºçš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ï¼š</p>
<ul>
<li>ç¨‹åºçš„ä»£ç </li>
<li>ç¨‹åºå¤„ç†çš„æ•°æ®</li>
<li>ç¨‹åºè®¡æ•°å™¨ä¸­çš„å€¼ï¼ŒæŒ‡ç¤ºä¸‹ä¸€æ¡å°†è¿è¡Œçš„æŒ‡ä»¤</li>
<li>ä¸€ç»„é€šç”¨çš„å¯„å­˜å™¨çš„å½“å‰å€¼ã€å †å’Œæ ˆç­‰</li>
<li>ä¸€ç»„ç³»ç»Ÿèµ„æºï¼Œå¦‚æ‰“å¼€çš„æ–‡ä»¶ç­‰</li>
</ul>
<h3 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h3>
<ul>
<li>åŠ¨æ€æ€§ï¼šå¯åŠ¨æ€åœ°åˆ›å»ºã€åˆ‡æ¢ã€ç»“æŸè¿›ç¨‹</li>
<li>å¹¶å‘è¡Œï¼šè¿›ç¨‹å¯ä»¥è¢«ç‹¬ç«‹è°ƒåº¦å¹¶å ç”¨å¤„ç†è¿è¡Œ<em>ï¼ˆå¹¶å‘ï¼šæŸä¸ªæ—¶é—´æ®µï¼›å¹¶è¡Œï¼šæŸä¸ªæ—¶åˆ»ï¼‰</em></li>
<li>ç‹¬ç«‹æ€§ï¼šä¸åŒè¿›ç¨‹çš„å·¥ä½œï¼ˆæ­£ç¡®æ€§ï¼‰ä¸ç›¸äº’å½±å“</li>
<li>åˆ¶çº¦æ€§ï¼šå› è®¿é—®å…±äº«æ•°æ®/èµ„æºæˆ–è¿›ç¨‹é—´åŒæ­¥è€Œäº§ç”Ÿåˆ¶çº¦</li>
</ul>
<h3 id="è¿›ç¨‹å’Œç¨‹åº">è¿›ç¨‹å’Œç¨‹åº</h3>
<h4 id="è”ç³»">è”ç³»</h4>
<ul>
<li>ç¨‹åºæ˜¯äº§ç”Ÿè¿›ç¨‹çš„åŸºç¡€</li>
<li>ç¨‹åºçš„æ¯æ¬¡è¿è¡Œæ„æˆä¸åŒçš„è¿›ç¨‹</li>
<li>è¿›ç¨‹æ˜¯ç¨‹åºåŠŸèƒ½çš„ä½“ç°</li>
<li>é€šè¿‡å¤šæ¬¡æ‰§è¡Œï¼Œä¸€ä¸ªç¨‹åºå¯å¯¹åº”å¤šä¸ªè¿›ç¨‹ï¼›é€šè¿‡è°ƒç”¨å…³ç³»ï¼Œä¸€ä¸ªè¿›ç¨‹å¯åŒ…æ‹¬å¤šä¸ªç¨‹åº</li>
</ul>
<h4 id="åŒºåˆ«">åŒºåˆ«</h4>
<ul>
<li>è¿›ç¨‹æ˜¯ç¨‹åºçš„æ‰§è¡Œï¼ˆåŠ¨æ€çš„ï¼‰ï¼›ç¨‹åºæ˜¯æœ‰åºä»£ç çš„é›†åˆï¼ˆé™æ€çš„ï¼‰</li>
<li>è¿›ç¨‹æœ‰æ ¸å¿ƒæ€/ç”¨æˆ·æ€</li>
<li>è¿›ç¨‹æ˜¯ä¸€ä¸ªçŠ¶æ€å˜åŒ–çš„è¿‡ç¨‹ï¼ˆæš‚æ—¶çš„ï¼‰ï¼›ç¨‹åºå¯ä»¥é•¿ä¹…ä¿å­˜ï¼ˆæ°¸ä¹…çš„ï¼‰</li>
<li>è¿›ç¨‹ä¸ç¨‹åºçš„ç»„æˆä¸åŒï¼šè¿›ç¨‹çš„ç»„æˆåŒ…æ‹¬ç¨‹åºã€æ•°æ®å’Œè¿›ç¨‹æ§åˆ¶å—ï¼ˆå³è¿›ç¨‹çŠ¶æ€ä¿¡æ¯ï¼‰</li>
</ul>
<h3 id="è¿›ç¨‹çš„ç”Ÿå‘½æœŸç®¡ç†">è¿›ç¨‹çš„ç”Ÿå‘½æœŸç®¡ç†</h3>
<h4 id="åˆ›å»º">åˆ›å»º</h4>
<p>å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„ 3 ä¸ªäº‹ä»¶ï¼š</p>
<ul>
<li>ç³»ç»Ÿåˆå§‹åŒ–</li>
<li>ç”¨æˆ·è¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹</li>
<li>æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ‰§è¡Œäº†åˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨</li>
</ul>
<h4 id="è¿è¡Œ">è¿è¡Œ</h4>
<p>å†…æ ¸é€‰æ‹©ä¸€ä¸ªå°±ç»ªçš„è¿›ç¨‹ï¼Œè®©å®ƒå ç”¨å¤„ç†åŠå¹¶æ‰§è¡Œã€‚</p>
<h4 id="ç­‰å¾…é˜»å¡">ç­‰å¾…ï¼ˆé˜»å¡ï¼‰</h4>
<p>ä»¥ä¸‹æƒ…å†µè¿›ç¨‹ç­‰å¾…ï¼š</p>
<ul>
<li>è¯·æ±‚å¹¶ç­‰å¾…ç³»ç»ŸæœåŠ¡ï¼Œæ— æ³•é©¬ä¸Šå®Œæˆ</li>
<li>å¯åŠ¨æŸç§æ“ä½œï¼Œæ— æ³•é©¬ä¸Šå®Œæˆ</li>
<li>éœ€è¦çš„æ•°æ®æ²¡æœ‰åˆ°è¾¾</li>
</ul>
<p>è¿›ç¨‹åªèƒ½è‡ªå·±é˜»å¡è‡ªå·±ã€‚</p>
<h4 id="å”¤é†’">å”¤é†’</h4>
<p>å”¤é†’è¿›ç¨‹çš„åŸå› ï¼š</p>
<ul>
<li>è¢«é˜»å¡è¿›ç¨‹éœ€è¦çš„èµ„æºå¯è¢«æ»¡è¶³</li>
<li>è¢«é˜»å¡è¿›ç¨‹ç­‰å¾…çš„äº‹ä»¶åˆ°è¾¾</li>
<li>å°†è¯¥è¿›ç¨‹çš„ PCB æ’å…¥å°±ç»ªé˜Ÿåˆ—</li>
</ul>
<p>è¿›ç¨‹åªèƒ½è¢«åˆ«çš„è¿›ç¨‹æˆ– OS å”¤é†’ã€‚</p>
<h4 id="ç»“æŸ">ç»“æŸ</h4>
<p>ä»¥ä¸‹æƒ…å†µè¿›ç¨‹ç»“æŸï¼š</p>
<ul>
<li>æ­£å¸¸é€€å‡ºï¼ˆè‡ªæ„¿ï¼‰</li>
<li>é”™è¯¯é€€å‡ºï¼ˆè‡ªæ„¿ï¼‰</li>
<li>è‡´å‘½é”™è¯¯ï¼ˆå¼ºåˆ¶ï¼‰</li>
<li>è¢«å…¶ä»–è¿›ç¨‹æ‰€æ€ï¼ˆå¼ºåˆ¶ï¼‰</li>
</ul>
<h3 id="è¿›ç¨‹çŠ¶æ€å˜åŒ–æ¨¡å‹">è¿›ç¨‹çŠ¶æ€å˜åŒ–æ¨¡å‹</h3>
<p><img src="https://drive.google.com/uc?export=view&id=1kGiADhNe_OnLs3ZHWyv3fEHcjwVdNq4B" alt="è¿›ç¨‹çŠ¶æ€è½¬æ¢" width="60%"></p>
<h4 id="ä¸‰ç§åŸºæœ¬çŠ¶æ€">ä¸‰ç§åŸºæœ¬çŠ¶æ€</h4>
<ul>
<li>è¿è¡Œ (Running)ï¼šå½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å¤„ç†æœºä¸Šè¿è¡Œæ—¶</li>
<li>å°±ç»ª (Ready)ï¼šä¸€ä¸ªè¿›ç¨‹è·å¾—äº†é™¤å¤„ç†æœºä¹‹å¤–çš„ä¸€åˆ‡æ‰€éœ€èµ„æºï¼Œä¸€æ—¦å¾—åˆ°å¤„ç†æœºå³å¯è¿è¡Œ</li>
<li>ç­‰å¾…/é˜»å¡ (Blocked)ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸€äº‹ä»¶è€Œæš‚åœè¿è¡Œï¼Œå¦‚ç­‰å¾…æŸèµ„æºã€è¾“å…¥/è¾“å‡ºå®Œæˆ</li>
</ul>
<h4 id="å…¶ä»–çŠ¶æ€">å…¶ä»–çŠ¶æ€</h4>
<ul>
<li>åˆ›å»º (New)ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºï¼Œè¿˜æ²¡è¢«è½¬åˆ°å°±ç»ªçŠ¶æ€ä¹‹å‰çš„çŠ¶æ€</li>
<li>ç»“æŸ (Exit)ï¼šä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ¶ˆå¤±æ—¶çš„çŠ¶æ€ï¼Œç”±äºè¿›ç¨‹ç»“æŸæˆ–å…¶ä»–åŸå› æ‰€è‡´</li>
<li>æŒ‚èµ· (Suspend)ï¼šæŠŠä¸€ä¸ªè¿›ç¨‹ä»å†…å­˜è½¬åˆ°å¤–å­˜ã€‚æŒ‚èµ·çŠ¶æ€æ—¶ï¼Œè¿›ç¨‹æ²¡æœ‰å ç”¨å†…å­˜ç©ºé—´ï¼Œå¤„åœ¨æŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹æ˜ åƒåœ¨ç£ç›˜ä¸Š</li>
</ul>
<h4 id="è¿›ç¨‹æŒ‚èµ·">è¿›ç¨‹æŒ‚èµ·</h4>
<ul>
<li>é˜»å¡æŒ‚èµ· (Blocked suspend)ï¼šè¿›ç¨‹åœ¨å¤–å­˜å¹¶ç­‰å¾…æŸäº‹ä»¶çš„å‡ºç°</li>
<li>å°±ç»ªæŒ‚èµ· (Ready suspend)ï¼šè¿›ç¨‹åœ¨å¤–å­˜ï¼Œä½†åªè¦è¿›å…¥å†…å­˜ï¼Œå³å¯è¿è¡Œ</li>
<li>ä¸æŒ‚èµ·ç›¸å…³çš„çŠ¶æ€è½¬æ¢
<ul>
<li>é˜»å¡ =&gt; é˜»å¡æŒ‚èµ·ï¼šæ²¡æœ‰è¿›ç¨‹å¤„äºå°±ç»ªçŠ¶æ€æˆ–å°±ç»ªè¿›ç¨‹è¦æ±‚æ›´å¤šå†…å­˜èµ„æºæ—¶ï¼Œè¿›è¡Œæ­¤ç§è½¬æ¢ï¼Œä»¥æäº¤æ–°è¿›ç¨‹æˆ–è¿è¡Œå°±ç»ªè¿›ç¨‹</li>
<li>å°±ç»ª =&gt; å°±ç»ªæŒ‚èµ·ï¼šå½“æœ‰é«˜ä¼˜å…ˆçº§é˜»å¡è¿›ç¨‹å’Œä½ä¼˜å…ˆçº§å°±ç»ªè¿›ç¨‹æ—¶ï¼ŒOS é€‰æ‹©æŒ‚èµ·ä½ä¼˜å…ˆçº§å°±ç»ªè¿›ç¨‹</li>
<li>è¿è¡Œ =&gt; å°±ç»ªæŒ‚èµ·ï¼šå¯¹æŠ¢å…ˆå¼åˆ†æ—¶ç³»ç»Ÿï¼Œå½“æœ‰é«˜ä¼˜å…ˆçº§é˜»å¡æŒ‚èµ·è¿›ç¨‹å› äº‹ä»¶å‡ºç°è€Œè¿›å…¥å°±ç»ªæŒ‚èµ·ï¼ŒOS å¯èƒ½æŠŠè¿è¡Œè¿›ç¨‹è½¬åˆ°å°±ç»ªæŒ‚èµ·çŠ¶æ€</li>
<li>å°±ç»ªæŒ‚èµ· =&gt; å°±ç»ªï¼šæ²¡æœ‰å°±ç»ªè¿›ç¨‹æˆ–æŒ‚èµ·å°±ç»ªè¿›ç¨‹ä¼˜å…ˆçº§é«˜äºå°±ç»ªè¿›ç¨‹æ—¶ï¼Œè¿›è¡Œæ­¤ç§è½¬æ¢</li>
<li>é˜»å¡æŒ‚èµ· =&gt; é˜»å¡ï¼šå½“ä¸€ä¸ªè¿›ç¨‹é‡Šæ”¾è¶³å¤Ÿå†…å­˜æ—¶ï¼ŒOS ä¼šæŠŠä¸€ä¸ªé«˜ä¼˜å…ˆçº§é˜»å¡æŒ‚èµ·è¿›ç¨‹è½¬æ¢ä¸ºé˜»å¡è¿›ç¨‹</li>
</ul></li>
<li>åœ¨å¤–å­˜æ—¶çš„çŠ¶æ€è½¬æ¢
<ul>
<li>é˜»å¡æŒ‚èµ· =&gt; å°±ç»ªæŒ‚èµ·ï¼šå½“æœ‰é˜»å¡æŒ‚èµ·è¿›ç¨‹å› ç›¸å…³äº‹ä»¶å‡ºç°æ—¶ï¼ŒOS ä¼šæŠŠé˜»å¡æŒ‚èµ·è¿›ç¨‹è½¬æ¢ä¸ºå°±ç»ªæŒ‚èµ·è¿›ç¨‹</li>
</ul></li>
<li>çŠ¶æ€é˜Ÿåˆ—
<ul>
<li>ç”± OS ç»´æŠ¤ä¸€ç»„é˜Ÿåˆ—ï¼Œè¡¨ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰è¿›ç¨‹çš„å½“å‰çŠ¶æ€</li>
<li>ä¸åŒçš„çŠ¶æ€åˆ†åˆ«ç”¨ä¸åŒçš„é˜Ÿåˆ—æ¥è¡¨ç¤ºï¼ˆå°±ç»ªé˜Ÿåˆ—ã€å„ç±»é˜»å¡é˜Ÿåˆ—ç­‰ï¼‰</li>
<li>æ¯ä¸ªè¿›ç¨‹çš„ PCB éƒ½æ ¹æ®å®ƒçš„çŠ¶æ€åŠ å…¥åˆ°ç›¸åº”çš„é˜Ÿåˆ—ä¸­ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒçš„ PCB ä»ä¸€ä¸ªçŠ¶æ€é˜Ÿåˆ—ä¸­è„±ç¦»å‡ºæ¥ï¼ŒåŠ å…¥åˆ°å¦ä¸€ä¸ªé˜Ÿåˆ—</li>
</ul></li>
</ul>
<h2 id="çº¿ç¨‹-thread">çº¿ç¨‹ (Thread)</h2>
<h3 id="å®šä¹‰-1">å®šä¹‰</h3>
<p>è¿›ç¨‹å½“ä¸­çš„ä¸€æ¡æ‰§è¡Œæµç¨‹ï¼Œå³</p>
<p><span class="math display">\[
\text{çº¿ç¨‹} = \text{è¿›ç¨‹} - \text{å…±äº«èµ„æº}
\]</span></p>
<ul>
<li>å±äºåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„æ‰€æ‹¥æœ‰çš„èµ„æºï¼ˆä»£ç ã€æ•°æ®ã€æ‰“å¼€çš„æ–‡ä»¶ç­‰ï¼‰</li>
<li>çº¿ç¨‹æœ‰ç‹¬ç«‹çš„çº¿ç¨‹æ§åˆ¶å— (TCB)ï¼ŒåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ (PC)ã€å †æ ˆ (SP)ã€Stateã€å¯„å­˜å™¨ (Registers) ç­‰</li>
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶å­˜åœ¨å¤šä¸ªçº¿ç¨‹</li>
<li>å„ä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘åœ°æ‰§è¡Œ</li>
<li>å„ä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«åœ°å€ç©ºé—´å’Œæ–‡ä»¶ç­‰èµ„æº</li>
</ul></li>
<li>ç¼ºç‚¹ï¼šä¸€ä¸ªçº¿ç¨‹å´©æºƒï¼Œä¼šå¯¼è‡´å…¶æ‰€å±è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å´©æºƒ</li>
</ul>
<h3 id="çº¿ç¨‹çš„å®ç°">çº¿ç¨‹çš„å®ç°</h3>
<ul>
<li><strong>ç”¨æˆ·çº¿ç¨‹</strong>ï¼šåœ¨ç”¨æˆ·ç©ºé—´å®ç°çš„çº¿ç¨‹æœºåˆ¶ï¼ˆOS çœ‹ä¸åˆ°ï¼Œç”±ç”¨æˆ·çº¿ç¨‹åº“ç®¡ç†ï¼‰
<ul>
<li>ä¸ä¾èµ– OS çš„å†…æ ¸ï¼Œç”±ä¸€ç»„ç”¨æˆ·çº§çš„çº¿ç¨‹åº“å‡½æ•°å®Œæˆçº¿ç¨‹çš„ç®¡ç†ï¼ŒåŒ…æ‹¬åˆ›å»ºã€ç»ˆæ­¢ã€åŒæ­¥å’Œè°ƒåº¦ç­‰</li>
<li>å¯ç”¨äºä¸æ”¯æŒçº¿ç¨‹æŠ€æœ¯çš„å¤šè¿›ç¨‹ OS</li>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦è‡ªå·±ç§æœ‰çš„ TCB åˆ—è¡¨ï¼Œç”¨äºè·Ÿè¸ªè®°å½•å…¶å„ä¸ªçº¿ç¨‹çš„çŠ¶æ€ï¼ˆPCã€æ ˆæŒ‡é’ˆã€å¯„å­˜å™¨ç­‰ï¼‰ï¼ŒTCB ç”±çº¿ç¨‹åº“å‡½æ•°æ¥ç»´æŠ¤</li>
<li>ç”¨æˆ·çº¿ç¨‹çš„åˆ‡æ¢ä¹Ÿæ˜¯ç”±çº¿ç¨‹åº“å‡½æ•°æ¥å®Œæˆï¼Œæ— éœ€ç”¨æˆ·æ€/æ ¸å¿ƒæ€åˆ‡æ¢ï¼Œé€Ÿåº¦å¿«</li>
<li>å…è®¸æ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰è‡ªå®šä¹‰çš„çº¿ç¨‹è°ƒåº¦ç®—æ³•</li>
<li>ç¼ºç‚¹ï¼šå¦‚æœä¸€ä¸ªçº¿ç¨‹å‘èµ·ç³»ç»Ÿè°ƒç”¨è€Œé˜»å¡ï¼Œåˆ™æ•´ä¸ªè¿›ç¨‹åœ¨ç­‰å¾…ï¼›ä¸€ä¸ªçº¿ç¨‹å¼€å§‹è¿è¡Œåï¼Œé™¤éä¸»åŠ¨äº¤å‡º CPU ä½¿ç”¨æƒï¼Œå¦åˆ™å…¶æ‰€åœ¨è¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹æ— æ³•è¿è¡Œï¼›åœ¨å¤šçº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹åˆ†åˆ°çš„æ—¶é—´ç‰‡è¾ƒå°‘ï¼Œæ‰§è¡Œè¾ƒæ…¢</li>
</ul></li>
<li><strong>å†…æ ¸çº¿ç¨‹</strong>ï¼šåœ¨ OS å†…æ ¸ä¸­å®ç°çš„çº¿ç¨‹æœºåˆ¶ï¼Œç”± OS å†…æ ¸æ¥å®Œæˆçº¿ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢å’Œç®¡ç†
<ul>
<li>åœ¨æ”¯æŒå†…æ ¸çº¿ç¨‹çš„ OS ä¸­ï¼Œç”±å†…æ ¸ç»´æŠ¤è¿›ç¨‹å’Œçº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆPCB å’Œ TCBï¼‰</li>
<li>çº¿ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢å’Œåˆ‡æ¢éƒ½æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨/å†…æ ¸å‡½æ•°ï¼ˆç”¨æˆ·æ€ =&gt; å†…æ ¸æ€ï¼‰çš„æ–¹å¼è¿›è¡Œï¼Œç”±å†…æ ¸å®Œæˆï¼Œç³»ç»Ÿå¼€é”€å¤§</li>
<li>åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªå†…æ ¸çº¿ç¨‹å‘èµ·ç³»ç»Ÿè°ƒç”¨è€Œè¢«é˜»å¡ï¼Œå¹¶ä¸ä¼šå½±å“å…¶ä»–å†…æ ¸çº¿ç¨‹çš„è¿è¡Œ</li>
<li>æ—¶é—´ç‰‡åˆ†é…ç»™çº¿ç¨‹ï¼Œå¤šçº¿ç¨‹çš„è¿›ç¨‹è·å¾—æ›´å¤š CPU æ—¶é—´</li>
</ul></li>
<li><strong>è½»é‡çº§è¿›ç¨‹</strong>ï¼šåœ¨å†…æ ¸ä¸­å®ç°ï¼Œæ”¯æŒç”¨æˆ·çº¿ç¨‹
<ul>
<li>å†…æ ¸æ”¯æŒçš„ç”¨æˆ·çº¿ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè½»é‡çº§è¿›ç¨‹ï¼Œæ¯ä¸ªè½»é‡çº§è¿›ç¨‹ç”±ä¸€ä¸ªå•ç‹¬çš„å†…æ ¸çº¿ç¨‹æ¥æ”¯æŒ</li>
</ul></li>
</ul>
<h2 id="è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¯”è¾ƒ">è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¯”è¾ƒ</h2>
<ul>
<li>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…å•ä½ï¼›çº¿ç¨‹æ˜¯ CPU è°ƒåº¦å•ä½</li>
<li>è¿›ç¨‹æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„èµ„æºå¹³å°ï¼Œè€Œçº¿ç¨‹åªç‹¬äº«å¿…ä¸å¯å°‘çš„èµ„æºï¼Œå¦‚å¯„å­˜å™¨å’Œå †æ ˆ</li>
<li>çº¿ç¨‹åŒæ ·å…·æœ‰å°±ç»ªã€é˜»å¡å’Œæ‰§è¡Œä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼ŒåŒæ ·å…·æœ‰çŠ¶æ€ä¹‹é—´çš„è½¬æ¢å…³ç³»</li>
<li>çº¿ç¨‹èƒ½å‡å°‘å¹¶å‘æ‰§è¡Œçš„æ—¶é—´å’Œç©ºé—´å¼€é”€ï¼šçº¿ç¨‹çš„åˆ›å»ºã€ç»ˆæ­¢æ—¶é—´æ¯”è¿›ç¨‹çŸ­ï¼›åŒä¸€è¿›ç¨‹å†…çº¿ç¨‹åˆ‡æ¢æ—¶é—´æ¯”è¿›ç¨‹çŸ­ï¼ˆæ— éœ€åˆ‡æ¢é¡µè¡¨ï¼‰ï¼›åŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹å¯ç›´æ¥è¿›è¡Œä¸é€šè¿‡å†…æ ¸çš„é€šä¿¡</li>
</ul>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„å’Œç®—æ³•ç¬”è®° (1) â€”â€” äºŒå‰æ ‘çš„éå†</title>
    <url>/2020/03/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0-1-%E2%80%94%E2%80%94-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/</url>
    <content><![CDATA[<p>æ ‘çš„éå†ï¼šæŒ‰ç…§æŸç§æ¬¡åºè®¿é—®æ ‘ä¸­å„èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¢«è®¿é—®æ°å¥½ä¸€æ¬¡</p>
<p>éå†æ–¹æ³•ï¼š</p>
<ul>
<li>æ·±åº¦ä¼˜å…ˆï¼šå…ˆè®¿é—®å­èŠ‚ç‚¹ï¼Œå†è®¿é—®çˆ¶èŠ‚ç‚¹ã€‚æŒ‰ç…§æ ¹èŠ‚ç‚¹ç›¸å¯¹äºå·¦å³å­èŠ‚ç‚¹çš„è®¿é—®é¡ºåºï¼Œåˆ†ä¸ºå‰åº (Pre-order)ã€ä¸­åº (In-order) å’Œååº (Post-order)</li>
<li>å¹¿åº¦ä¼˜å…ˆï¼šå±‚æ¬¡éå†</li>
</ul>
<span id="more"></span>
<p>äºŒå‰æ ‘èŠ‚ç‚¹çš„å®šä¹‰å¦‚ä¸‹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">  T data_;</span><br><span class="line">  std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; left_;</span><br><span class="line">  std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; right_;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">TreeNode</span>(T x) : <span class="built_in">data_</span>(x), <span class="built_in">left_</span>(<span class="literal">nullptr</span>), <span class="built_in">right_</span>(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="å‰åºéå†">å‰åºéå†</h2>
<p>éå†é¡ºåºï¼šæ ¹ =&gt; å·¦ =&gt; å³</p>
<h3 id="é€’å½’å®ç°">é€’å½’å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pre_order_traversal</span><span class="params">(std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; node, VST&amp; visit)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!node) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">visit</span>(node);</span><br><span class="line">  <span class="built_in">pre_order_traversal</span>(node-&gt;left_, visit);</span><br><span class="line">  <span class="built_in">pre_order_traversal</span>(node-&gt;right_, visit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿­ä»£å®ç°">è¿­ä»£å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pre_order_traversal</span><span class="params">(std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; root, VST&amp; visit)</span> </span>&#123;</span><br><span class="line">  std::stack&lt;<span class="keyword">decltype</span>(root)&gt; stk;</span><br><span class="line">  <span class="keyword">auto</span> node = root;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (node || !stk.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    <span class="keyword">while</span> (node) &#123;</span><br><span class="line">      <span class="built_in">visit</span>(node);</span><br><span class="line"></span><br><span class="line">      stk.<span class="built_in">push</span>(node);</span><br><span class="line">      node = node-&gt;left_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!stk.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">      node = stk.<span class="built_in">top</span>();</span><br><span class="line">      stk.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">      node = node-&gt;right_;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸­åºéå†">ä¸­åºéå†</h2>
<p>éå†é¡ºåºï¼šå·¦ =&gt; æ ¹ =&gt; å³</p>
<h3 id="é€’å½’å®ç°-1">é€’å½’å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">in_order_traversal</span><span class="params">(std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; node, VST&amp; visit)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!node) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">in_order_traversal</span>(node-&gt;left_, visit);</span><br><span class="line">  <span class="built_in">visit</span>(node);</span><br><span class="line">  <span class="built_in">in_order_traversal</span>(node-&gt;right_, visit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿­ä»£å®ç°-1">è¿­ä»£å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">in_order_traversal</span><span class="params">(std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; root, VST&amp; visit)</span> </span>&#123;</span><br><span class="line">  std::stack&lt;<span class="keyword">decltype</span>(root)&gt; stk;</span><br><span class="line">  <span class="keyword">auto</span> node = root;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (node || !stk.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    <span class="keyword">while</span> (node) &#123;</span><br><span class="line">      stk.<span class="built_in">push</span>(node);</span><br><span class="line">      node = node-&gt;left_;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!stk.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">      node = stk.<span class="built_in">top</span>();</span><br><span class="line">      stk.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">      <span class="built_in">visit</span>(node);</span><br><span class="line"></span><br><span class="line">      node = node-&gt;right_;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ååºéå†">ååºéå†</h2>
<p>éå†é¡ºåºï¼šå·¦ =&gt; å³ =&gt; æ ¹</p>
<h3 id="é€’å½’å®ç°-2">é€’å½’å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">post_order_traversal</span><span class="params">(std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; node, VST&amp; visit)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!node) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">post_order_traversal</span>(node-&gt;left_, visit);</span><br><span class="line">  <span class="built_in">post_order_traversal</span>(node-&gt;right_, visit);</span><br><span class="line">  <span class="built_in">visit</span>(node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿­ä»£å®ç°-2">è¿­ä»£å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">post_order_traversal</span><span class="params">(std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; root, VST&amp; visit)</span> </span>&#123;</span><br><span class="line">  std::stack&lt;std::pair&lt;<span class="keyword">decltype</span>(root), <span class="type">bool</span>&gt;&gt; stk;</span><br><span class="line">  stk.<span class="built_in">push</span>(std::<span class="built_in">make_pair</span>(root, <span class="literal">false</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    <span class="keyword">auto</span> node = stk.<span class="built_in">top</span>().first;</span><br><span class="line">    <span class="keyword">auto</span> visited = stk.<span class="built_in">top</span>().second;</span><br><span class="line">    stk.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!node) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (visited) &#123;</span><br><span class="line">      <span class="built_in">visit</span>(node);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      stk.<span class="built_in">push</span>(std::<span class="built_in">make_pair</span>(node, <span class="literal">true</span>));</span><br><span class="line">      stk.<span class="built_in">push</span>(std::<span class="built_in">make_pair</span>(node-&gt;right_, <span class="literal">false</span>));</span><br><span class="line">      stk.<span class="built_in">push</span>(std::<span class="built_in">make_pair</span>(node-&gt;left_, <span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å±‚æ¬¡éå†">å±‚æ¬¡éå†</h2>
<p>éå†é¡ºåºï¼šè‡ªä¸Šè€Œä¸‹ã€å…ˆå·¦åå³</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> VST&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">level_traversal</span><span class="params">(std::shared_ptr&lt;TreeNode&lt;T&gt;&gt; root, VST&amp; visit)</span> </span>&#123;</span><br><span class="line">  std::queue&lt;<span class="keyword">decltype</span>(root)&gt; que;</span><br><span class="line">  <span class="keyword">if</span> (root) &#123;</span><br><span class="line">    que.<span class="built_in">push</span>(root);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (!que.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    <span class="keyword">auto</span> node = que.<span class="built_in">front</span>();</span><br><span class="line">    que.<span class="built_in">pop</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">visit</span>(node);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (node-&gt;left_) &#123;</span><br><span class="line">      que.<span class="built_in">push</span>(node-&gt;left_);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node-&gt;right_) &#123;</span><br><span class="line">      que.<span class="built_in">push</span>(node-&gt;right_);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®ç»“æ„å’Œç®—æ³•ç¬”è®° (2) â€”â€” æ’åºç®—æ³•</title>
    <url>/2020/03/10/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0-2-%E2%80%94%E2%80%94-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>å¸¸ç”¨æ’åºç®—æ³•çš„æ€»ç»“å’Œ C++ å®ç°ã€‚</p>
<span id="more"></span>
<h2 id="å†’æ³¡æ’åº-bubble-sort">å†’æ³¡æ’åº (Bubble Sort)</h2>
<h3 id="åŸç†">åŸç†</h3>
<p>åœ¨ä¸€æ¬¡<strong>å†’æ³¡</strong>è¿‡ç¨‹ä¸­ï¼Œæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼šå¦‚æœé€†åºï¼ˆå·¦è¾¹å…ƒç´ å¤§äºå³è¾¹å…ƒç´ ï¼‰ï¼Œåˆ™äºŒè€…äº¤æ¢ã€‚ä¸€æ¬¡å†’æ³¡åï¼Œåºåˆ—ä¸­æœ€å¤§çš„å…ƒç´ å°†ä½äºåºåˆ—çš„æœ«å°¾ï¼Œå¯¹å‰©ä½™å…ƒç´ ä¾æ¬¡è¿›è¡Œå†’æ³¡æ“ä½œï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</p>
<h3 id="å®ç°">å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bubble_sort</span><span class="params">(RandomIt first, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> i = first; i &lt; last; ++i) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> j = first; j &lt; last - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">      <span class="keyword">if</span> (*j &gt; *(j + <span class="number">1</span>)) &#123;</span><br><span class="line">        std::<span class="built_in">swap</span>(*j, *(j + <span class="number">1</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ">åˆ†æ</h3>
<ul>
<li>ç¨³å®šæ’åºç®—æ³•</li>
<li>æœ€åæ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n^{2})\)</span></li>
<li>æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n)\)</span></li>
<li>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n^{2})\)</span></li>
<li>æœ€åç©ºé—´å¤æ‚åº¦ï¼šå…± <span class="math inline">\(O(n)\)</span>ï¼Œéœ€è¦è¾…åŠ©ç©ºé—´ <span class="math inline">\(O(1)\)</span></li>
</ul>
<h2 id="å½’å¹¶æ’åº-merge-sort">å½’å¹¶æ’åº (Merge Sort)</h2>
<h3 id="åŸç†-1">åŸç†</h3>
<p>åˆ†æ²»æ³• (Divide and Conquer)ï¼šé€’å½’åœ°å°†åºåˆ—å¹³å‡åˆ†å‰²ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼Œç›´åˆ°åºåˆ—ä¸­åªå«æœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆå³æœ‰åºï¼‰ï¼›å†åˆ©ç”¨å½’å¹¶æ“ä½œ (merge) å°†æœ‰åºåºåˆ—åˆå¹¶èµ·æ¥ã€‚</p>
<h3 id="å®ç°-1">å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ©ç”¨è¾…åŠ©ç©ºé—´çš„åˆå¹¶</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(RandomIt first, RandomIt mid, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">using</span> data_type = <span class="keyword">typename</span> std::remove_reference&lt;<span class="keyword">decltype</span>(*first)&gt;::type;</span><br><span class="line">  <span class="function">vector&lt;data_type&gt; <span class="title">left_sub</span><span class="params">(first, mid)</span></span>;</span><br><span class="line">  <span class="function">vector&lt;data_type&gt; <span class="title">right_sub</span><span class="params">(mid, last)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> left_it = left_sub.<span class="built_in">cbegin</span>();</span><br><span class="line">  <span class="keyword">auto</span> right_it = right_sub.<span class="built_in">cbegin</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> it = first; it != last; ++it) &#123;</span><br><span class="line">    <span class="keyword">if</span> (left_it == left_sub.<span class="built_in">cend</span>()) &#123;</span><br><span class="line">      *it = *right_it;</span><br><span class="line">      ++right_it;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (right_it == right_sub.<span class="built_in">cend</span>()) &#123;</span><br><span class="line">      *it = *left_it;</span><br><span class="line">      ++left_it;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (*left_it &lt; *right_it) &#123;</span><br><span class="line">      *it = *left_it;</span><br><span class="line">      ++left_it;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      *it = *right_it;</span><br><span class="line">      ++right_it;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ©ç”¨ 3 æ¬¡åè½¬ï¼ŒåŸåœ°åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">inplace_merge</span><span class="params">(RandomIt first, RandomIt mid, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (first &lt; mid &amp;&amp; mid &lt; last) &#123;</span><br><span class="line">    <span class="keyword">while</span> (first &lt; mid &amp;&amp; *first &lt; *mid) &#123;</span><br><span class="line">      ++first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> index = mid;</span><br><span class="line">    <span class="keyword">while</span> (mid &lt; last &amp;&amp; *mid &lt; *first) &#123;</span><br><span class="line">      ++mid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::<span class="built_in">reverse</span>(first, index);</span><br><span class="line">    std::<span class="built_in">reverse</span>(index, mid);</span><br><span class="line">    std::<span class="built_in">reverse</span>(first, mid);</span><br><span class="line"></span><br><span class="line">    first += mid - index + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge_sort</span><span class="params">(RandomIt first, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (last - first &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> mid = first + (last - first) / <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">merge_sort</span>(first, mid);</span><br><span class="line">  <span class="built_in">merge_sort</span>(mid, last);</span><br><span class="line">  <span class="built_in">inplace_merge</span>(first, mid, last);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ-1">åˆ†æ</h3>
<ul>
<li>ç¨³å®šæ’åºç®—æ³•</li>
<li>æœ€åæ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n \log{n})\)</span></li>
<li>æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n \log{n})\)</span></li>
<li>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n \log{n})\)</span></li>
<li>æœ€åç©ºé—´å¤æ‚åº¦ï¼šå…± <span class="math inline">\(O(n)\)</span></li>
</ul>
<h2 id="é€‰æ‹©æ’åº-selection-sort">é€‰æ‹©æ’åº (Selection Sort)</h2>
<h3 id="åŸç†-2">åŸç†</h3>
<p>å°†åºåˆ—åˆ’åˆ†ä¸ºå·²æ’åºå’Œæœªæ’åºä¸¤ä¸ªå­åºåˆ—ã€‚èµ·å§‹æ—¶ï¼Œå·²æ’åºåºåˆ—ä¸ºç©ºï¼Œæœªæ’åºåºåˆ—ä¸ºæ•´ä¸ªåŸå§‹åºåˆ—ã€‚ä¾æ¬¡åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°å…ƒç´ ï¼Œå¹¶å°†å…¶æ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ï¼Œç›´åˆ°æœªæ’åºåºåˆ—æœªç©ºã€‚</p>
<h3 id="å®ç°-2">å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">selection_sort</span><span class="params">(RandomIt first, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> i = first; i &lt; last - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">auto</span> min_it = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> j = i; j &lt; last; ++j) &#123;</span><br><span class="line">      <span class="keyword">if</span> (*j &lt; *min_it) &#123;</span><br><span class="line">        min_it = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::<span class="built_in">swap</span>(*i, *min_it);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ-2">åˆ†æ</h3>
<ul>
<li>æœ€åæ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n^{2})\)</span></li>
<li>æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n^{2})\)</span></li>
<li>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n^{2})\)</span></li>
<li>æœ€åç©ºé—´å¤æ‚åº¦ï¼šå…± <span class="math inline">\(O(n)\)</span>ï¼Œéœ€è¦è¾…åŠ©ç©ºé—´ <span class="math inline">\(O(1)\)</span></li>
</ul>
<h2 id="æ’å…¥æ’åº-insertion-sort">æ’å…¥æ’åº (Insertion Sort)</h2>
<h3 id="åŸç†-3">åŸç†</h3>
<p>å¯¹äºæœªæ’åºåºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œä»å‰å‘åæ‰«æå·²æ’åºå…ƒç´ ï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶å°†å…¶æ’å…¥å·²æ’åºåºåˆ—ã€‚</p>
<h3 id="å®ç°-3">å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insertion_sort</span><span class="params">(RandomIt first, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> i = first + <span class="number">1</span>; i &lt; last; ++i) &#123;</span><br><span class="line">    <span class="keyword">auto</span> temp = *i;</span><br><span class="line">    <span class="keyword">auto</span> j = i - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; first &lt;= j &amp;&amp; temp &lt; *j; --j) &#123;</span><br><span class="line">      *(j + <span class="number">1</span>) = *j;</span><br><span class="line">    &#125;</span><br><span class="line">    *(j + <span class="number">1</span>) = temp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ-3">åˆ†æ</h3>
<ul>
<li>æœ€åæ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n^{2})\)</span></li>
<li>æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n)\)</span></li>
<li>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n^{2})\)</span></li>
<li>æœ€åç©ºé—´å¤æ‚åº¦ï¼šå…± <span class="math inline">\(O(n)\)</span>ï¼Œéœ€è¦è¾…åŠ©ç©ºé—´ <span class="math inline">\(O(1)\)</span></li>
</ul>
<h2 id="å¿«é€Ÿæ’åº-quick-sort">å¿«é€Ÿæ’åº (Quick Sort)</h2>
<h3 id="åŸç†-4">åŸç†</h3>
<p>åˆ†æ²»æ³•ï¼š</p>
<ol type="1">
<li>æŒ‘é€‰åŸºå‡†å€¼ï¼šä»åºåˆ—ä¸­æŒ‘é€‰å‡ºä¸€ä¸ª â€œåŸºå‡†â€ å…ƒç´ </li>
<li>é‡æ–°æ’åˆ—åºåˆ—ï¼Œä½¿å¾—æ‰€æœ‰æ¯”åŸºå‡†å…ƒç´ å°çš„å…ƒç´ éƒ½åœ¨å…¶å·¦è¾¹ï¼Œæ¯”åŸºå‡†å…ƒç´ å¤§çš„å…ƒç´ éƒ½åœ¨å…¶å³è¾¹ï¼Œæ­¤æ—¶åŸºå‡†å…ƒç´ å·²ç»å°±ä½</li>
<li>é€’å½’åœ°æ’åºåŸºå‡†å…ƒç´ å·¦ã€å³ä¸¤è¾¹çš„å­åºåˆ—</li>
</ol>
<p>é€‰å–åŸºå‡†çš„æ–¹å¼ï¼š</p>
<ul>
<li>å›ºå®šä½ç½®ï¼šå–åºåˆ—ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼</li>
<li>éšæœºé€‰å–ï¼šéšæœºé€‰å–å¾…æ’åºåºåˆ—ä¸­ä»»æ„ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼</li>
<li>ä¸‰æ•°å–ä¸­ï¼šé€‰æ‹©æœ€å·¦ç«¯ã€æœ€å³ç«¯å’Œä¸­é—´ä½ç½®ä¸‰ä¸ªå…ƒç´ çš„ä¸­å€¼ä½œä¸ºåŸºå‡†å€¼</li>
</ul>
<p>å¯¹äºè¾ƒå°çš„æ•°ç»„ï¼Œå¿«é€Ÿæ’åºä¸å¦‚æ’å…¥æ’åºã€‚</p>
<h3 id="å®ç°-4">å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quick_sort</span><span class="params">(RandomIt first, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (first == last) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">auto</span> pivot = *first;</span><br><span class="line">  <span class="keyword">auto</span> i = first;</span><br><span class="line">  <span class="keyword">auto</span> j = last - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; j) &#123;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j &amp;&amp; *j &gt;= pivot) &#123;</span><br><span class="line">      --j;</span><br><span class="line">    &#125;</span><br><span class="line">    *i = *j;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; j &amp;&amp; *i &lt;= pivot) &#123;</span><br><span class="line">      ++i;</span><br><span class="line">    &#125;</span><br><span class="line">    *j = *i;</span><br><span class="line">  &#125;</span><br><span class="line">  *i = pivot;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">quick_sort</span>(first, i);</span><br><span class="line">  <span class="built_in">quick_sort</span>(i + <span class="number">1</span>, last);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ-4">åˆ†æ</h3>
<ul>
<li>æœ€åæ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(\Theta(n^{2})\)</span></li>
<li>æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(\Theta(n \log{n})\)</span></li>
<li>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(\Theta(n \log{n})\)</span></li>
<li>æœ€åç©ºé—´å¤æ‚åº¦ï¼šå–å†³äºå®ç°æ–¹å¼</li>
</ul>
<h2 id="å †æ’åº-heap-sort">å †æ’åº (Heap Sort)</h2>
<h3 id="åŸç†-5">åŸç†</h3>
<p><strong>å †</strong> (Heap)ï¼šå®Œå…¨äºŒå‰æ ‘ä¸”æ»¡è¶³å­èŠ‚ç‚¹çš„å€¼æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚è‹¥çˆ¶èŠ‚ç‚¹çš„å€¼æ’å°äºç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™æˆä¸ºæœ€å°å † (Min Heap)ï¼›åä¹‹ï¼Œè‹¥çˆ¶èŠ‚ç‚¹çš„å€¼æ’å¤§äºç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™æˆä¸ºæœ€å¤§å † (Max Heap)ã€‚</p>
<p>å †é€šå¸¸ä½¿ç”¨ä¸€ç»´æ•°ç»„å®ç°ã€‚å½“æ•°ç»„çš„èµ·å§‹ç´¢å¼•ä¸º <span class="math inline">\(0\)</span> æ—¶ï¼š</p>
<ul>
<li>èŠ‚ç‚¹ <span class="math inline">\(i\)</span> çš„å·¦å­èŠ‚ç‚¹ç´¢å¼•ä¸º <span class="math inline">\(2 i + 1\)</span></li>
<li>èŠ‚ç‚¹ <span class="math inline">\(i\)</span> çš„å³å­èŠ‚ç‚¹ç´¢å¼•ä¸º <span class="math inline">\(2 i + 2\)</span></li>
<li>èŠ‚ç‚¹ <span class="math inline">\(i\)</span> çš„çˆ¶èŠ‚ç‚¹ç´¢å¼•ä¸º <span class="math inline">\(\lfloor \frac{i - 1}{2} \rfloor\)</span></li>
</ul>
<p>å †æ’åºæ˜¯åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„è¿›è¡Œæ’åºçš„æ–¹æ³•ï¼šé¦–å…ˆæŠŠåºåˆ—è½¬æ¢ä¸ºæœ€å¤§å †ï¼Œä¾æ¬¡ä»æœ€å¤§å †ä¸­å–å‡ºæ ¹èŠ‚ç‚¹ï¼ˆå°†æ ¹èŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢ï¼Œå†æŠŠæœ€åä¸€ä¸ªèŠ‚ç‚¹ç§»å‡ºå †ï¼‰ï¼Œå¹¶è®©å‰©ä½™å…ƒç´ ä»ç»´æŒæœ€å¤§å †çš„æ€§è´¨ã€‚</p>
<h3 id="å®ç°-5">å®ç°</h3>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt, <span class="keyword">typename</span> Distance&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">max_heapify</span><span class="params">(RandomIt first, Distance begin, Distance end)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> parent = begin;</span><br><span class="line">  <span class="keyword">auto</span> child = <span class="number">2</span> * parent + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (child &lt; end) &#123;</span><br><span class="line">    <span class="keyword">if</span> (child + <span class="number">1</span> &lt; end &amp;&amp; *(first + child) &lt; *(first + child + <span class="number">1</span>)) &#123;</span><br><span class="line">      ++child;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (*(first + parent) &gt; *(first + child)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::<span class="built_in">swap</span>(*(first + parent), *(first + child));</span><br><span class="line">    parent = child;</span><br><span class="line">    child = <span class="number">2</span> * parent + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> RandomIt&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heap_sort</span><span class="params">(RandomIt first, RandomIt last)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// æ„é€ æœ€å¤§å †</span></span><br><span class="line">  <span class="keyword">auto</span> len = last - first;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> i = len / <span class="number">2</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">    <span class="built_in">max_heapify</span>(first, i, len);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¾æ¬¡å–å‡ºæœ€å¤§å€¼ï¼šäº¤æ¢æ ¹èŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†å–å‡ºæœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> i = len - <span class="number">1</span>; i &gt; <span class="number">0</span>; --i) &#123;</span><br><span class="line">    std::<span class="built_in">swap</span>(*first, *(first + i));</span><br><span class="line">    <span class="built_in">max_heapify</span>(first, <span class="built_in">static_cast</span>&lt;<span class="keyword">decltype</span>(i)&gt;(<span class="number">0</span>), i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ-5">åˆ†æ</h3>
<ul>
<li>ä¸ç¨³å®šæ’åºç®—æ³•</li>
<li>æœ€åæ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n \log{n})\)</span></li>
<li>æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(O(n \log{n})\)</span></li>
<li>å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼š<span class="math inline">\(\Theta(n \log{n})\)</span></li>
<li>æœ€åç©ºé—´å¤æ‚åº¦ï¼šå…± <span class="math inline">\(O(n)\)</span>ï¼Œéœ€è¦è¾…åŠ©ç©ºé—´ <span class="math inline">\(O(1)\)</span></li>
</ul>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡¨è¾¾å¼æ±‚å€¼é—®é¢˜</title>
    <url>/2018/10/20/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="è¡¨è¾¾å¼çš„è¡¨ç¤ºæ–¹æ³•">è¡¨è¾¾å¼çš„è¡¨ç¤ºæ–¹æ³•</h2>
<p>æ ¹æ®è¡¨ç¤ºæ–¹æ³•çš„ä¸åŒï¼Œè¡¨è¾¾å¼çš„ä¸€èˆ¬æœ‰ä¸‰ç§ï¼šå‰ç¼€ï¼ˆæ³¢å…°ï¼‰è¡¨è¾¾å¼ (Polish Notation)ã€ä¸­ç¼€è¡¨è¾¾å¼ä»¥åŠåç¼€ï¼ˆé€†æ³¢å…°ï¼‰è¡¨è¾¾å¼ (Reverse Polish Notation, RPN)ã€‚</p>
<span id="more"></span>
<ul>
<li><p><strong>å‰ç¼€è¡¨è¾¾å¼</strong>ï¼šæ“ä½œç¬¦ç½®äºæ“ä½œæ•°çš„å‰é¢ï¼Œå¦‚ <code>+ 3 4</code> è¡¨ç¤º â€œä¸‰åŠ å››â€ã€‚å¦‚æœæ“ä½œç¬¦çš„å…ƒæ•°ï¼ˆæ‰€éœ€å‚æ•°æˆ–ç®—å­çš„æ•°é‡ï¼‰æ˜¯å›ºå®šçš„ï¼Œåˆ™è¯­æ³•ä¸Šä¸éœ€è¦æ‹¬å·ä¹Ÿèƒ½è¢«æ— æ­§ä¹‰åœ°è§£æï¼Œä¾‹å¦‚ï¼Œå‰ç¼€è¡¨è¾¾å¼ <code>* - 5 6 7</code>ï¼Œå³ â€œäº”å’Œå…­çš„å·®å†ä¹˜ä»¥ä¸ƒâ€ï¼Œç”±äºç®€å•çš„ç®—æœ¯è¿ç®—ç¬¦éƒ½æ˜¯äºŒå…ƒçš„ï¼Œå› æ­¤è¯¥è¡¨è¾¾å¼æ— éœ€æ‹¬å·ï¼Œä¹Ÿæ— æ­§ä¹‰ã€‚</p></li>
<li><p><strong>ä¸­ç¼€è¡¨è¾¾å¼</strong>ï¼šæ“ä½œç¬¦ä»¥ä¸­ç¼€å½¢å¼ä½äºæ“ä½œæ•°çš„ä¸­é—´ï¼Œå¦‚ <code>3 + 4</code> è¡¨ç¤º â€œä¸‰åŠ å››â€ã€‚ä¸­ç¼€è¡¨è¾¾å¼ç¬¦åˆæˆ‘ä»¬æ—¥å¸¸çš„ä¹ æƒ¯ï¼Œä½†æ˜¯ä¸å®¹æ˜“è¢«ç”µè„‘è§£æã€‚</p></li>
<li><p><strong>åç¼€è¡¨è¾¾å¼</strong>ï¼šæ“ä½œç¬¦ç½®äºæ“ä½œæ•°çš„åé¢ï¼Œå¦‚ <code>3 4 +</code> è¡¨ç¤º â€œä¸‰åŠ å››â€ã€<code>3 2 + 5 *</code> è¡¨ç¤º â€œä¸‰åŠ ä¸ŠäºŒçš„ç»“æœå†ä¹˜ä»¥äº”â€ã€‚åç¼€è¡¨ç¤ºæ³•ä¹Ÿä¸éœ€è¦æ‹¬å·æ¥æ ‡ç¤ºæ“ä½œç¬¦çš„ä¼˜å…ˆçº§ã€‚åç¼€è¡¨è¾¾å¼çš„è§£æè¿‡ç¨‹æ˜¯åŸºäºå †æ ˆçš„ï¼Œå…¶è§£æè¿‡ç¨‹ä¸€èˆ¬æ˜¯ï¼šæ“ä½œæ•°å…¥æ ˆï¼›é‡åˆ°æ“ä½œç¬¦æ—¶ï¼Œæ“ä½œæ•°å‡ºæ ˆï¼Œæ±‚å€¼ï¼Œå°†ç»“æœå…¥æ ˆï¼›ä¸æ–­è¿­ä»£ï¼Œæœ€ç»ˆæ ˆé¡¶å°±æ˜¯è¡¨è¾¾å¼çš„å€¼ã€‚</p></li>
</ul>
<p>ç®€å•ç®—æœ¯çš„å‰ç¼€è¡¨è¾¾å¼ä¸»è¦ç”¨äºå­¦æœ¯ç ”ç©¶æ–¹é¢ï¼Œè€Œå•†ä¸šè®¡ç®—å™¨å‡ ä¹ä¸ä½¿ç”¨è¿™ç§è¡¨è¾¾å¼ï¼›ä¸­ç¼€è¡¨è¾¾å¼æ˜¯æœ€ç¬¦åˆäººä»¬æ€ç»´æ–¹å¼çš„è¡¨è¾¾å¼ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ—¥å¸¸ä¹¦å†™å’Œè¾“å…¥è¡¨è¾¾å¼çš„æ–¹å¼ï¼›åç¼€è¡¨è¾¾å¼çš„æ±‚å€¼è¿‡ç¨‹å¯¹äºè®¡ç®—æœºæ¥è¯´æ˜¯å¾ˆå®¹æ˜“å®ç°ï¼Œæ˜¯æœ€ç¬¦åˆè®¡ç®—æœºçš„å¤„ç†æ–¹å¼ã€‚</p>
<p>è¿™é‡Œä¸»è¦è®¨è®ºç®—æœ¯ä¸­ç¼€å’Œåç¼€è¡¨è¾¾å¼çš„æ±‚å€¼ä»¥åŠäºŒè€…é—´çš„è½¬æ¢é—®é¢˜ã€‚</p>
<h2 id="ä¸­ç¼€è¡¨è¾¾å¼ç›´æ¥æ±‚å€¼">ä¸­ç¼€è¡¨è¾¾å¼ç›´æ¥æ±‚å€¼</h2>
<p>ä¸­ç¼€è¡¨è¾¾å¼çš„ç›´æ¥æ±‚å€¼ï¼Œæœ€å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸¤ä¸ªå †æ ˆï¼šä¸€ä¸ªç”¨äºä¿å­˜æ“ä½œæ•°ï¼Œå¦ä¸€ä¸ªç”¨äºä¿å­˜æ“ä½œç¬¦ã€‚</p>
<p>é¦–å…ˆè€ƒè™‘åªæœ‰åŠ ã€å‡ã€ä¹˜ã€é™¤å››åˆ™è¿ç®—çš„ç®€å•ç®—æœ¯è¡¨è¾¾å¼ï¼š</p>
<p><span class="math display">\[
3 + 2 \times 5
\]</span></p>
<p>åœ¨æ‰‹åŠ¨è®¡ç®—è¿™ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œç”±äºæˆ‘ä»¬äº‹å…ˆçŸ¥é“ä¹˜æ³•çš„ä¼˜å…ˆçº§é«˜äºåŠ æ³•ï¼Œå› æ­¤æˆ‘ä»¬ä¼šå…ˆè®¡ç®— <span class="math inline">\(2 \times 5 = 10\)</span>ï¼Œå†è®¡ç®— <span class="math inline">\(3 + 10 = 13\)</span> å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p>
<p>å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œç”±äºä½¿ç”¨å †æ ˆæ¥è®¡ç®—å’Œä¿å­˜ç»“æœï¼Œå°±éœ€è¦ä¸“é—¨è®¾è®¡å…¥æ ˆå’Œå‡ºæ ˆè§„åˆ™ã€‚å› ä¸ºå››åˆ™è¿ç®—çš„è¿ç®—ç¬¦éƒ½æ˜¯äºŒå…ƒè¿ç®—ç¬¦ï¼Œå³éœ€è¦ä¸¤ä¸ªæ“ä½œæ•°æ‰èƒ½å®Œæˆè®¡ç®—ï¼Œä½†æ˜¯ç”±äºæ“ä½œç¬¦ä½äºæ“ä½œæ•°çš„ä¸­é—´ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªæ“ä½œç¬¦è¿›æ“ä½œç¬¦æ ˆæ—¶ï¼Œè¯¥æ“ä½œç¬¦çš„ä¸¤ä¸ªæ“ä½œæ•°å¹¶æ²¡æœ‰éƒ½è¿›å…¥åˆ°æ“ä½œæ•°æ ˆä¸­ã€‚å› æ­¤ï¼Œåªæœ‰åœ¨åé¢ä¸€ä¸ªæ“ä½œç¬¦è¿›æ“ä½œç¬¦æ ˆæ—¶ï¼Œå‰é¢çš„ä¸€ä¸ªæ“ä½œç¬¦æ‰€ä½œç”¨çš„ä¸¤ä¸ªæ“ä½œæ•°æ‰ä¼šå…¨éƒ¨è¿›æ ˆã€‚æˆ‘ä»¬æ¥çœ‹æ“ä½œæ•°æ ˆå’Œæ“ä½œç¬¦æ ˆçš„å˜åŒ–è¿‡ç¨‹ï¼š</p>
<table>
<thead>
<tr class="header">
<th>åºå·</th>
<th>æ“ä½œæ•°æ ˆ</th>
<th>æ“ä½œç¬¦æ ˆ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td><span class="math inline">\(3\)</span></td>
<td>ç©º</td>
</tr>
<tr class="even">
<td>2</td>
<td><span class="math inline">\(3\)</span></td>
<td><span class="math inline">\(+\)</span></td>
</tr>
<tr class="odd">
<td>3</td>
<td><span class="math inline">\(3,\ 2\)</span></td>
<td><span class="math inline">\(+\)</span></td>
</tr>
</tbody>
</table>
<p>æ­¤æ—¶ï¼Œé‡åˆ°æ“ä½œç¬¦ <span class="math inline">\(\times\)</span>ï¼Œå¦‚æœå¼¹å‡º <span class="math inline">\(3\)</span>ã€<span class="math inline">\(2\)</span> ä»¥åŠ <span class="math inline">\(+\)</span> è¿›è¡Œè®¡ç®—ï¼Œåˆ™åŸè¡¨è¾¾å¼å°±å˜æˆäº† <span class="math inline">\((3 + 2) \times 5\)</span>ï¼Œå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚ç”±äºå½“å‰æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜äºæ“ä½œç¬¦æ ˆæ ˆé¡¶å…ƒç´ çš„ä¼˜å…ˆçº§ï¼Œæ•…éœ€è¦å°†å½“å‰æ“ä½œèµ‹å‹å…¥æ“ä½œç¬¦æ ˆï¼Œå¹¶å°†å½“å‰æ“ä½œç¬¦çš„æ“ä½œæ•°ä¹Ÿå‹å…¥æ ˆã€‚</p>
<table>
<thead>
<tr class="header">
<th>åºå·</th>
<th>æ“ä½œæ•°æ ˆ</th>
<th>æ“ä½œç¬¦æ ˆ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>4</td>
<td><span class="math inline">\(3,\ 2\)</span></td>
<td><span class="math inline">\(+,\ \times\)</span></td>
</tr>
<tr class="even">
<td>5</td>
<td><span class="math inline">\(3,\ 2,\ 5\)</span></td>
<td><span class="math inline">\(+,\ \times\)</span></td>
</tr>
</tbody>
</table>
<p>æ­¤æ—¶ï¼Œåˆ°äº†è¡¨è¾¾å¼çš„ç»“å°¾ï¼Œä¾æ¬¡å¼¹å‡ºæ“ä½œæ•°æ ˆé¡¶éƒ¨çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå†å¼¹å‡ºæ“ä½œç¬¦æ ˆé¡¶çš„å…ƒç´ ï¼Œè¿›è¡Œè®¡ç®—ï¼Œå°†è®¡ç®—åçš„ç»“æœå‹å…¥æ“ä½œæ•°æ ˆï¼Œå¹¶ä¸æ–­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ“ä½œç¬¦æ ˆä¸ºç©ºï¼Œä¸”æ“ä½œæ•°æ ˆåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå³è¡¨è¾¾å¼çš„æœ€ç»ˆç»“æœã€‚</p>
<table>
<thead>
<tr class="header">
<th>åºå·</th>
<th>æ“ä½œæ•°æ ˆ</th>
<th>æ“ä½œç¬¦æ ˆ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>6</td>
<td><span class="math inline">\(3,\ 10\)</span></td>
<td><span class="math inline">\(+\)</span></td>
</tr>
<tr class="even">
<td>7</td>
<td><span class="math inline">\(13\)</span></td>
<td>ç©º</td>
</tr>
</tbody>
</table>
<p>å¯¹äºå¸¦æœ‰æ‹¬å·çš„ç­‰æ›´å¤æ‚çš„è¡¨è¾¾å¼ï¼Œå…¶è®¡ç®—è¿‡ç¨‹ä¸ä¸Šé¢ç±»ä¼¼ï¼šé‡åˆ° <span class="math inline">\((\)</span> åˆ™ç›´æ¥å‹å…¥æ“ä½œç¬¦æ ˆï¼›é‡åˆ° <span class="math inline">\()\)</span> åˆ™ä¸€ç›´å¼¹å‡ºæ“ä½œç¬¦å’Œå¯¹åº”çš„æ“ä½œæ•°ï¼Œå°†è®¡ç®—ç»“æœå†å‹å…¥æ“ä½œæ•°æ ˆï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°å°† <span class="math inline">\((\)</span> ä¹Ÿå¼¹å‡ºã€‚</p>
<p>ä¸­ç¼€è¡¨è¾¾å¼çš„ç›´æ¥æ±‚å€¼æœ‰ä¸€æ¡åŸåˆ™ï¼š<font color=#ff4444>å½“å‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§é«˜äºæ“ä½œç¬¦æ ˆæ ˆé¡¶æ“ä½œç¬¦çš„ä¼˜å…ˆçº§æ—¶ï¼Œå°†å½“å‰æ“ä½œç¬¦å‹å…¥æ“ä½œç¬¦æ ˆï¼›å¦åˆ™ï¼Œå¼¹å‡ºæ“ä½œç¬¦ä»¥åŠå¯¹åº”çš„æ“ä½œæ•°è¿›è¡Œè®¡ç®—ç›´è‡³æ ˆé¡¶æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ä½äºå½“å‰æ“ä½œç¬¦ï¼Œç„¶åå°†å½“å‰æ“ä½œç¬¦å‹æ ˆã€‚å½“æ‰€æœ‰çš„æ“ä½œç¬¦å¤„ç†å®Œæ¯•ï¼ˆå³æ“ä½œç¬¦æ ˆä¸ºç©ºæ—¶ï¼‰ï¼Œæ“ä½œæ•°æ ˆä¸­å‰©ä¸‹çš„å”¯ä¸€ä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ€ç»ˆè¡¨è¾¾å¼çš„å€¼ã€‚</font></p>
<p>å¯¹äºå¸¸ç”¨çš„ç®—æœ¯è¿ç®—ç¬¦ï¼Œ<span class="math inline">\(+\)</span> ä¸ <span class="math inline">\(-\)</span> çš„ä¼˜å…ˆçº§ç›¸åŒï¼›<span class="math inline">\(\times\)</span> ä¸ <span class="math inline">\(\div\)</span> çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œä¸”é«˜äº<span class="math inline">\(+\)</span>ã€<span class="math inline">\(-\)</span> çš„ä¼˜å…ˆçº§ï¼›è€Œ <span class="math inline">\(()\)</span> çš„ä¼˜å…ˆçº§æœ€é«˜ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦æ ¹æ®æƒ…å†µåŒºåˆ† <span class="math inline">\(-\)</span> æ˜¯è¡¨ç¤ºè´Ÿå·è¿˜æ˜¯å‡å·ï¼š</p>
<ul>
<li>è‹¥å‰é¢ä¸º <span class="math inline">\((\)</span> æˆ–å…¶ä»–è¿ç®—ç¬¦ï¼Œåˆ™è¡¨ç¤ºè´Ÿå·</li>
<li>è‹¥å‰é¢ä¸º <span class="math inline">\()\)</span> æˆ–æ•°å­—ï¼Œåˆ™è¡¨ç¤ºå‡å·</li>
<li>è‹¥å‰é¢æ²¡æœ‰å­—ç¬¦ï¼Œå³ <span class="math inline">\(-\)</span> æ˜¯è¡¨è¾¾å¼çš„å¼€å§‹ï¼Œåˆ™è¡¨ç¤ºè´Ÿå·</li>
</ul>
<h2 id="åç¼€è¡¨è¾¾å¼ç›´æ¥æ±‚å€¼">åç¼€è¡¨è¾¾å¼ç›´æ¥æ±‚å€¼</h2>
<p>åç¼€è¡¨è¾¾å¼ä¸éœ€è¦æ‹¬å·æ¥æ ‡ç¤ºæ“ä½œç¬¦çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤å¯ä»¥ç›´æ¥åˆ©ç”¨æ ˆæ¥æ¨¡æ‹Ÿè®¡ç®—ï¼šé‡åˆ°æ“ä½œæ•°å°±å°†å…¶ç›´æ¥å‹å…¥æ“ä½œæ•°æ ˆï¼›é‡åˆ°æ“ä½œç¬¦åˆ™å¼¹å‡ºæ“ä½œæ•°æ ˆé¡¶çš„ä¸¤ä¸ªå…ƒç´ è¿›è¡Œè®¡ç®—ï¼Œå†å°†è®¡ç®—ç»“æœå‹å…¥æ“ä½œæ•°æ ˆï¼›å¦‚æ­¤å¾ªç¯ï¼Œç›´åˆ°è¡¨è¾¾å¼ç»“å°¾ï¼Œæ“ä½œæ•°æ ˆä¸­å”¯ä¸€çš„å…ƒç´ å°±æ˜¯è¡¨è¾¾å¼çš„ç»“æœã€‚</p>
<h2 id="ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼">ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼</h2>
<h3 id="åˆ©ç”¨äºŒå‰æ ‘è½¬æ¢">åˆ©ç”¨äºŒå‰æ ‘è½¬æ¢</h3>
<p>åˆ©ç”¨äºŒå‰æ ‘çš„æ€§è´¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ã€‚é¦–å…ˆåˆ©ç”¨äºŒå‰æ ‘è¡¨ç¤ºä¸­ç¼€è¡¨è¾¾å¼ï¼šç”¨å¶å­èŠ‚ç‚¹å­˜å‚¨æ“ä½œæ•°ï¼Œå…¶ä»–èŠ‚ç‚¹å­˜å‚¨æ“ä½œç¬¦ï¼›å†å¯¹äºŒå‰æ ‘è¿›è¡Œéå†å³å¯å¾—åˆ°åç¼€è¡¨è¾¾å¼ã€‚ä»¥è¡¨è¾¾å¼</p>
<p><span class="math display">\[
3 \times 5 + 5 \div 2 + (3 + 5) \times 2
\]</span></p>
<p>ä¸ºä¾‹ï¼Œå°†å…¶è¡¨ç¤ºæˆäºŒå‰æ ‘å½¢å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://drive.google.com/uc?export=view&id=1wR-MK17mWAAnw6yypNF6rEzbaoaFGtrI" alt="äºŒå‰æ ‘å½¢å¼" width="30%"></p>
<p>å°†ä¸­ç¼€è¡¨è¾¾å¼è¡¨ç¤ºä¸ºäºŒå‰æ ‘å½¢å¼çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>æ‰¾å‡ºè¡¨è¾¾å¼ä¸­æœ€åè¿›è¡Œè¿ç®—çš„æ“ä½œç¬¦ï¼Œå³ä¼˜å…ˆçº§æœ€ä½çš„æ“ä½œç¬¦ï¼Œä½œä¸ºæ ¹èŠ‚ç‚¹</li>
<li>åœ¨æ­¥éª¤ 1 æ‰¾å‡ºçš„æ“ä½œç¬¦çš„å·¦ä¾§éƒ¨åˆ†æ‰¾å‡ºæœ€åè¿›è¡Œè¿ç®—çš„æ“ä½œç¬¦ï¼Œä½œä¸ºæ­¥éª¤ 1 æ ¹èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ï¼›å³ä¾§éƒ¨åˆ†è¿›è¡ŒåŒæ ·çš„æ“ä½œ</li>
<li>è‹¥æ­¥éª¤ 1 æ‰¾å‡ºçš„æ“ä½œç¬¦å·¦ä¾§æˆ–å³ä¾§éƒ¨åˆ†åªå«æœ‰æ“ä½œæ•°ï¼Œä¸å«æœ‰æ“ä½œç¬¦ï¼Œåˆ™å°†è¯¥æ“ä½œæ•°ä½œä¸ºå¯¹åº”çš„å¶å­èŠ‚ç‚¹ã€‚</li>
<li>ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°äºŒå‰æ ‘åŒ…å«è¡¨è¾¾å¼çš„æ‰€æœ‰æ“ä½œæ•°å’Œæ“ä½œç¬¦</li>
</ol>
<p>å»ºç«‹å®Œæ¯•è¡¨è¾¾å¼çš„äºŒå‰æ ‘ï¼Œä»å¶å­èŠ‚ç‚¹å¼€å§‹å¯¹äºŒå‰æ ‘è¿›è¡Œååºéå†ï¼ˆå·¦å­æ ‘-&gt;å³å­æ ‘-&gt;æ ¹èŠ‚ç‚¹ï¼‰ï¼Œå³å¯å¾—åˆ°ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„åç¼€è¡¨è¾¾å¼ã€‚</p>
<h3 id="åˆ©ç”¨æ ˆè½¬æ¢">åˆ©ç”¨æ ˆè½¬æ¢</h3>
<p>åˆ©ç”¨æ ˆå°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼çš„è¿‡ç¨‹ä¸è®¡ç®—ä¸­ç¼€è¡¨è¾¾å¼çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œä½¿ç”¨ä¸€ä¸ªæ ˆä¿å­˜æ“ä½œç¬¦ï¼Œä¸€ä¸ªæ•°ç»„ç”¨äºä¿å­˜è½¬æ¢å¾—åˆ°çš„åç¼€è¡¨è¾¾å¼ã€‚å…¶è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>ä»å¤´åˆ°å°¾æ‰«æè¡¨è¾¾å¼ï¼Œè‹¥é‡åˆ°æ“ä½œç¬¦ï¼Œåˆ™ä¸æ“ä½œç¬¦æ ˆçš„æ ˆé¡¶å…ƒç´ æ¯”è¾ƒä¼˜å…ˆçº§ï¼šå¦‚æœå½“å‰æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜äºæ ˆé¡¶å…ƒç´ çš„ä¼˜å…ˆçº§ï¼Œåˆ™å‹å…¥æ“ä½œç¬¦æ ˆï¼›å¦åˆ™ä¸æ–­å¼¹å‡ºæ“ä½œç¬¦æ ˆé¡¶å…ƒç´ æ·»åŠ åˆ°ç»“æœæ•°ç»„çš„æœ«å°¾ï¼Œç›´åˆ°æ ˆé¡¶å…ƒç´ çš„ä¼˜å…ˆçº§ä½äºå½“å‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ï¼Œå°†å½“å‰æ“ä½œç¬¦å‹å…¥æ“ä½œç¬¦æ ˆ</li>
<li>è‹¥é‡åˆ°æ“ä½œæ•°ï¼Œåˆ™ç›´æ¥æ·»åŠ åˆ°ç»“æœæ•°ç»„çš„æœ«å°¾</li>
<li>è‹¥é‡åˆ°å·¦æ‹¬å·ï¼Œåˆ™å‹å…¥æ“ä½œç¬¦æ ˆ</li>
<li>è‹¥é‡åˆ°å³æ‹¬å·ï¼Œåˆ™ä¾æ¬¡å¼¹å‡ºæ“ä½œç¬¦æ ˆé¡¶å…ƒç´ æ·»åŠ åˆ°ç»“æœæ•°ç»„çš„æœ«å°¾ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·ï¼Œå°†å·¦æ‹¬å·å¼¹å‡ºæ“ä½œç¬¦æ ˆ</li>
</ol>
<h3 id="æ‰‹åŠ¨è½¬æ¢">æ‰‹åŠ¨è½¬æ¢</h3>
<p>é€šè¿‡å¯¹è¡¨è¾¾å¼çš„æ¯ä¸€éƒ¨åˆ†æ·»åŠ æ‹¬å·ï¼Œå†å°†æ“ä½œç¬¦ç§»åŠ¨åˆ°å¯¹åº”æ‹¬å·çš„åé¢ï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ä¸­ç¼€è¡¨è¾¾å¼</p>
<p><span class="math display">\[
(3 + 5 \times 2) - 2 \times 3
\]</span></p>
<p>è½¬æ¢è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li>é¦–å…ˆå¯¹æ¯ä¸€éƒ¨åˆ†æ·»åŠ æ‹¬å·ï¼Œåˆ™æœ‰ <span class="math inline">\(((3 + (5 \times 2)) - (2 \times 3))\)</span></li>
<li>å°†æ“ä½œç¬¦ç§»åŠ¨åˆ°å¯¹åº”æ‹¬å·çš„åé¢ï¼š<span class="math inline">\(((3\ (5\ 2)\times) + (2\ 3)\times)-\)</span></li>
<li>æœ€åå»æ‰æ‰€æœ‰æ‹¬å·ï¼Œå¯å¾—å¯¹åº”çš„åç¼€è¡¨è¾¾å¼ <span class="math inline">\(3\ 5\ 2 \times +\ 2\ 3 \times -\)</span></li>
</ol>
<hr />
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://www.cnblogs.com/dolphin0520/p/3708602.html">ä¸­ç¼€è¡¨è¾¾å¼æ±‚å€¼é—®é¢˜ - æµ· å­</a></li>
</ul>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
</search>
